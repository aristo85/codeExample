"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6216],{43180:function(n,t,e){e.d(t,{ES:function(){return l},Kz:function(){return f},L$:function(){return g},X4:function(){return h},_h:function(){return x},f4:function(){return d},kP:function(){return p},lq:function(){return s},tH:function(){return c},xg:function(){return a}});var o,i,r=e(49305);(o=i||(i={})).NIGHT_RATE="NightRate",o.DAILY_RATE="DailyRate";let u=r.gk.injectEndpoints({endpoints:n=>({calculatePenalty:n.mutation({query:n=>({url:"/booking/".concat(n,"/calculate-penalty"),method:"POST"})}),getDetailBooking:n.query({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t)}},keepUnusedDataFor:0}),cancelBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/cancel"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:i,queryFulfilled:r}=t,{data:c}=await r,l=i(u.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await r}catch(n){l.undo()}},invalidatesTags:["bookings","notifications","bookedByID"]}),approveBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/approve"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:i,queryFulfilled:r}=t,{data:c}=await r,l=i(u.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await r}catch(n){l.undo()}},invalidatesTags:["bookings","notifications"]}),bookExcursion:n.mutation({query:n=>({url:"/booking/excursion",method:"POST",body:n}),extraOptions:{name:"bookExcursion"}}),reInitPayment:n.mutation({query:n=>({url:"/booking/".concat(n,"/payment"),method:"PUT"}),extraOptions:{name:"reInitPayment"}}),bookGuide:n.mutation({query:n=>({url:"/booking/guide",method:"POST",body:n}),extraOptions:{name:"bookGuide"}}),getBookingInfoById:n.query({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/info/").concat(e),method:"GET"}},extraOptions:{name:"bookingInfo"}}),cancelBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/cancel/").concat(e),method:"PUT"}},extraOptions:{name:"cancelBookingWithToken"}}),approveBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/approve/").concat(e),method:"PUT"}},extraOptions:{name:"approveBookingWithToken"}})}),overrideExisting:!0}),{useGetDetailBookingQuery:c,useApproveBookingMutation:l,useCancelBookingMutation:a,useCalculatePenaltyMutation:d,useBookExcursionMutation:s,useBookGuideMutation:f,useReInitPaymentMutation:g,useGetBookingInfoByIdQuery:h,useCancelBookingWithTokenMutation:p,useApproveBookingWithTokenMutation:x}=u,{endpoints:{getDetailBooking:m}}=u},20293:function(n,t,e){var o,i;e.d(t,{g:function(){return o}}),(i=o||(o={})).WAITING_PARTNER="WAITING_PARTNER",i.WAITING_PAYMENT="WAITING_PAYMENT",i.PARTNER_ACCEPTED="PARTNER_ACCEPTED",i.PAID="PAID",i.CANCELLED="CANCELLED"},79417:function(n,t,e){e.d(t,{Z:function(){return D}});var o=e(85893),i=e(7297),r=e(186),u=e(41664),c=e.n(u);function l(){let n=(0,i.Z)([""]);return l=function(){return n},n}function a(){let n=(0,i.Z)(["\n     align-items: center;\n  "]);return a=function(){return n},n}function d(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  list-style-type: none;\n  align-items: center;\n  flex-wrap: wrap;\n\n  ","\n"]);return d=function(){return n},n}function s(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 8px;\n"]);return s=function(){return n},n}function f(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return f=function(){return n},n}function g(){let n=(0,i.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    ",";\n  "]);return g=function(){return n},n}function h(){let n=(0,i.Z)(["\n  ","\n"]);return h=function(){return n},n}function p(){let n=(0,i.Z)(["\n      max-width: 34vw;\n    "]);return p=function(){return n},n}function x(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return x=function(){return n},n}function m(){let n=(0,i.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return m=function(){return n},n}function w(){let n=(0,i.Z)(["\n  ","\n"]);return w=function(){return n},n}function v(){let n=(0,i.Z)(["\n      max-width: 34vw;\n    "]);return v=function(){return n},n}function T(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return T=function(){return n},n}function b(){let n=(0,i.Z)(["\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return b=function(){return n},n}function P(){let n=(0,i.Z)(["\n  ","\n"]);return P=function(){return n},n}let y=r.ZP.nav.withConfig({componentId:"sc-39019b6d-0"})(l()),E=r.ZP.ul.withConfig({componentId:"sc-39019b6d-1"})(d(),n=>{let{theme:t}=n;return t.media.down("xs")(a())}),I=r.ZP.li.withConfig({componentId:"sc-39019b6d-2"})(s()),A=r.ZP.span.withConfig({componentId:"sc-39019b6d-3"})(h(),n=>{let{theme:t}=n;return(0,r.iv)(g(),t.colors.primary,t.font.weight,t.font.size.subtitle1,t.media.down("xs")(f(),t.font.size.body2))}),Z=r.ZP.span.withConfig({componentId:"sc-39019b6d-4"})(w(),n=>{let{theme:t}=n;return(0,r.iv)(m(),t.colors.default,t.font.weight,t.font.size.subtitle1,t.media.down("md")(p()),t.media.down("xs")(x(),t.font.size.body2))}),k=(0,r.ZP)(c()).withConfig({componentId:"sc-39019b6d-5"})(P(),n=>{let{theme:t}=n;return(0,r.iv)(b(),t.media.down("md")(v()),t.media.down("xs")(T(),t.font.size.body2))});var C=e(67294),N=e(34956);let j=n=>{let{paths:t,isMobile:e}=n,i=t,r=!1;return e&&t.length>2&&(i=t.slice(-2),r=!0),(0,o.jsx)(y,{children:(0,o.jsxs)(E,{children:[r&&(0,o.jsxs)(I,{children:[(0,o.jsx)("span",{children:"..."}),(0,o.jsx)(N.Z,{})]}),i.map((n,t)=>(0,o.jsxs)(C.Fragment,{children:[(0,o.jsx)(I,{children:n.url&&t!==i.length-1?(0,o.jsx)(k,{href:n.url,passHref:!0,children:(0,o.jsx)(A,{children:n.label})}):(0,o.jsx)(Z,{children:n.label})}),i.length-1>t&&(0,o.jsx)(I,{children:(0,o.jsx)(N.Z,{})})]},t))]})})};var D=j},27030:function(n,t,e){e.d(t,{Z:function(){return E}});var o=e(85893);e(67294);var i=e(7297),r=e(186);let u={WAITING_PARTNER:"WAITING_PARTNER",WAITING_PAYMENT:"WAITING_PAYMENT",PARTNER_ACCEPTED:"PARTNER_ACCEPTED",PAID:"PAID",CANCELLED:"CANCELLED"};function c(){let n=(0,i.Z)(["\n      padding: 16px;\n      border-radius: 8px;\n      border: 1px solid #1d7abd;\n    "]);return c=function(){return n},n}function l(){let n=(0,i.Z)(["\n  min-width: 120px;\n  width: max-content;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  ",";\n"]);return l=function(){return n},n}function a(){let n=(0,i.Z)(["\n  width: 7px;\n  height: 7px;\n  border-radius: 7px;\n  background-color: ",";\n"]);return a=function(){return n},n}function d(){let n=(0,i.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return d=function(){return n},n}function s(){let n=(0,i.Z)(["\n  ",";\n  line-height: normal;\n  vertical-align: middle;\n"]);return s=function(){return n},n}function f(){let n=(0,i.Z)(["\n  width: 100px;\n  height: 34px;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: ",";\n"]);return f=function(){return n},n}function g(){let n=(0,i.Z)(["\n    font-family: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return g=function(){return n},n}function h(){let n=(0,i.Z)(["\n  font-size: 11px;\n  text-align: center;\n  ",";\n"]);return h=function(){return n},n}let p=(n,t)=>n===u.PAID?t?"#6fcf97":"rgb(111, 207, 151, 0.3)":n===u.CANCELLED?t?"#de3730":"rgb(222, 55, 48, 0.3)":n===u.WAITING_PAYMENT?t?"#f29200":"rgb(242, 146, 0, 0.3)":n===u.WAITING_PARTNER||n===u.PARTNER_ACCEPTED?t?"#f29200":"rgb(5, 49, 118, 0.3)":"inherit",x=r.ZP.div.withConfig({componentId:"sc-3d156085-0"})(l(),n=>{let{$bordered:t}=n;return t&&(0,r.iv)(c())}),m=r.ZP.div.withConfig({componentId:"sc-3d156085-1"})(a(),n=>{let{$status:t}=n;return p(t,!0)}),w=r.ZP.span.withConfig({componentId:"sc-3d156085-2"})(s(),n=>{let{theme:t,isTable:e}=n;return(0,r.iv)(d(),e?t.font.family.gothicBook:t.font.family.gothicMedium,t.font.size.body2,t.font.weight.regular,t.colors.default)}),v=r.ZP.div.withConfig({componentId:"sc-3d156085-3"})(f(),n=>{let{$status:t}=n;return p(t,!1)}),T=r.ZP.p.withConfig({componentId:"sc-3d156085-4"})(h(),n=>{let{theme:t,$status:e,isTable:o}=n;return(0,r.iv)(g(),t.font.family.gothicMedium,o?400:700,p(e,!0))});var b=e(40152),P=e(80514);let y=n=>{var t,e;let{status:i,bordered:r,isTable:c}=n,l=(0,b.Z)("(max-width: ".concat(P.AV.xs,"px)")),a=new Map([[u.WAITING_PARTNER,"Ожидание подтверждения"],[u.WAITING_PAYMENT,"Ожидание оплаты"],[u.PAID,"Оплачено"],[u.CANCELLED,"Отменено"],[u.PARTNER_ACCEPTED,"Подтверждено партнером"]]);return l?(0,o.jsx)(v,{$status:i,children:(0,o.jsx)(T,{$status:i,isTable:c,children:null!==(t=a.get(i))&&void 0!==t?t:"-"})}):(0,o.jsxs)(x,{$bordered:r,children:[(0,o.jsx)(m,{$status:i}),(0,o.jsx)(w,{isTable:c,children:null!==(e=a.get(i))&&void 0!==e?e:"-"})]})};var E=y},34956:function(n,t,e){var o=e(85893);e(67294);let i=n=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:20,fill:"none",...n,children:(0,o.jsx)("path",{stroke:n.stroke?n.stroke:"#222121",strokeLinecap:"round",strokeWidth:2,d:"m1 1 7.293 7.293a1 1 0 0 1 0 1.414L1 17"})});t.Z=i},49043:function(n,t,e){e.d(t,{L:function(){return a}});var o=e(67294),i=e(43180),r=e(51949),u=e(41248),c=e(68270),l=e(96245);let a=()=>{var n;let t=(0,r.l)(),[e,a]=(0,o.useState)(null),[d,s]=(0,o.useState)(null),[f,g]=(0,o.useState)(!1),h=(0,u.v9)(c.vI),[p,{isLoading:x}]=(0,i.f4)(),[m,{isLoading:w}]=(0,i.xg)(),v=()=>{a(null),g(!1)},T=null===(n=(0,l.Z)(h))||void 0===n?void 0:n.user,b=T.roleType===c.dC.TOURIST,P=async n=>{if(b)try{a(n);let t=await p(n).unwrap();s(t.data.amount),g(!0)}catch(n){a(null),g(!1)}else a(n),g(!0)},y=n=>{a(n),g(!0)},E=async()=>{if(e)try{let n=await m({id:e}).unwrap();n.success&&t("Вы успешно отменили бронирование","success")}catch(n){console.error(n)}finally{g(!1),a(null)}};return{cancellationId:e,penaltyAmount:d,isCancellationModalOpen:f,isCalculatePenaltyLoading:x,isLoadingCancel:w,onCancelButtonClick:P,modalCancelButtonClickFunction:v,modalAcceptButtonClickFunction:E,onCancelButtonWithoutCalculatePenaltyClick:y}}},51949:function(n,t,e){e.d(t,{l:function(){return i}});var o=e(20377);function i(){let{enqueueSnackbar:n}=(0,o.Ds)(),t=(t,e)=>{n(t,{variant:e})};return t}},69398:function(n,t,e){var o=e(67294),i=e(20293);let r=(n,t)=>{(0,o.useEffect)(()=>{var e,o;let r=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.status)===i.g.CANCELLED||(null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.status)===i.g.PAID;n&&!r&&t()},[])};t.Z=r},74037:function(n,t,e){e.d(t,{W:function(){return x}});var o=e(85893);e(67294);var i=e(84276),r=e(42143),u=e(7297),c=e(57681),l=e(186);function a(){let n=(0,u.Z)([""]);return a=function(){return n},n}function d(){let n=(0,u.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  gap: 10px;\n  margin-top: 30px;\n"]);return d=function(){return n},n}function s(){let n=(0,u.Z)(["\n  ","\n"]);return s=function(){return n},n}let f=(0,l.ZP)(c.Z).withConfig({componentId:"sc-df9bad11-0"})(a()),g=l.ZP.div.withConfig({componentId:"sc-df9bad11-1"})(d()),h=l.ZP.h3.withConfig({componentId:"sc-df9bad11-2"})(s(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-weight: ").concat(t.font.weight,";\n    font-size: ").concat(t.font.size.subtitle3,";\n    text-align: center;\n    margin-top: 16px;\n  ")});var p=e(64468);let x=n=>{let{closeButton:t,cancelBooking:e,isOpen:u,penaltyAmount:c}=n;return(0,o.jsxs)(f,{isOpen:u,onClose:t,children:[(0,o.jsx)(i.r6,{children:"Вы уверены, что хотите отменить бронирование?"}),c?(0,o.jsx)(h,{children:"Сумма штрафа - ".concat(c," ").concat((0,p.fd)(c||0,p.Tl.rubles))}):null,(0,o.jsxs)(g,{children:[(0,o.jsx)(r.Z,{onClick:t,children:"Нет"}),(0,o.jsx)(r.Z,{dark:!0,onClick:e,children:"Да"})]})]})}}}]);