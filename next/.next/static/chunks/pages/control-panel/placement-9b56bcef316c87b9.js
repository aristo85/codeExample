(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6082],{60357:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/control-panel/placement",function(){return t(9431)}])},79417:function(n,e,t){"use strict";t.d(e,{Z:function(){return E}});var r=t(85893),i=t(7297),o=t(186),l=t(41664),s=t.n(l);function a(){let n=(0,i.Z)([""]);return a=function(){return n},n}function u(){let n=(0,i.Z)(["\n     align-items: center;\n  "]);return u=function(){return n},n}function c(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  list-style-type: none;\n  align-items: center;\n  flex-wrap: wrap;\n\n  ","\n"]);return c=function(){return n},n}function d(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 8px;\n"]);return d=function(){return n},n}function f(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return f=function(){return n},n}function h(){let n=(0,i.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    ",";\n  "]);return h=function(){return n},n}function p(){let n=(0,i.Z)(["\n  ","\n"]);return p=function(){return n},n}function x(){let n=(0,i.Z)(["\n      max-width: 34vw;\n    "]);return x=function(){return n},n}function m(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return m=function(){return n},n}function g(){let n=(0,i.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return g=function(){return n},n}function v(){let n=(0,i.Z)(["\n  ","\n"]);return v=function(){return n},n}function w(){let n=(0,i.Z)(["\n      max-width: 34vw;\n    "]);return w=function(){return n},n}function j(){let n=(0,i.Z)(["\n      font-size: ","\n    "]);return j=function(){return n},n}function Z(){let n=(0,i.Z)(["\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return Z=function(){return n},n}function y(){let n=(0,i.Z)(["\n  ","\n"]);return y=function(){return n},n}let C=o.ZP.nav.withConfig({componentId:"sc-39019b6d-0"})(a()),b=o.ZP.ul.withConfig({componentId:"sc-39019b6d-1"})(c(),n=>{let{theme:e}=n;return e.media.down("xs")(u())}),k=o.ZP.li.withConfig({componentId:"sc-39019b6d-2"})(d()),P=o.ZP.span.withConfig({componentId:"sc-39019b6d-3"})(p(),n=>{let{theme:e}=n;return(0,o.iv)(h(),e.colors.primary,e.font.weight,e.font.size.subtitle1,e.media.down("xs")(f(),e.font.size.body2))}),T=o.ZP.span.withConfig({componentId:"sc-39019b6d-4"})(v(),n=>{let{theme:e}=n;return(0,o.iv)(g(),e.colors.default,e.font.weight,e.font.size.subtitle1,e.media.down("md")(x()),e.media.down("xs")(m(),e.font.size.body2))}),D=(0,o.ZP)(s()).withConfig({componentId:"sc-39019b6d-5"})(y(),n=>{let{theme:e}=n;return(0,o.iv)(Z(),e.media.down("md")(w()),e.media.down("xs")(j(),e.font.size.body2))});var z=t(67294),R=t(34956);let q=n=>{let{paths:e,isMobile:t}=n,i=e,o=!1;return t&&e.length>2&&(i=e.slice(-2),o=!0),(0,r.jsx)(C,{children:(0,r.jsxs)(b,{children:[o&&(0,r.jsxs)(k,{children:[(0,r.jsx)("span",{children:"..."}),(0,r.jsx)(R.Z,{})]}),i.map((n,e)=>(0,r.jsxs)(z.Fragment,{children:[(0,r.jsx)(k,{children:n.url&&e!==i.length-1?(0,r.jsx)(D,{href:n.url,passHref:!0,children:(0,r.jsx)(P,{children:n.label})}):(0,r.jsx)(T,{children:n.label})}),i.length-1>e&&(0,r.jsx)(k,{children:(0,r.jsx)(R.Z,{})})]},e))]})})};var E=q},19656:function(n,e,t){"use strict";t.d(e,{Z:function(){return g}});var r=t(85893);t(67294);var i=t(76997),o=t(93946),l=t(88159),s=t(2749),a=t(32820),u=t(7297),c=t(186);function d(){let n=(0,u.Z)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  justify-content: center;\n"]);return d=function(){return n},n}let f=c.ZP.div.withConfig({componentId:"sc-e87dff9c-0"})(d());var h=t(41664),p=t.n(h),x=t(43795);let m=n=>{let{width:e,isHideValue:t,onHideShowButtonClickFn:u,onDeleteClickFn:c,id:d,editLink:h}=n;return(0,r.jsxs)(f,{style:{width:e},children:[!t&&(0,r.jsx)(i.Z,{title:"Скрыть отображение",children:(0,r.jsx)(o.Z,{onClick:()=>u(d,t),children:(0,r.jsx)(l.Z,{fill:"#8DAEC1"})})}),t&&(0,r.jsx)(i.Z,{title:"Открыть отображение",children:(0,r.jsx)(o.Z,{onClick:()=>u(d,t),children:(0,r.jsx)(s.Z,{fill:"#8DAEC1"})})}),h&&(0,r.jsx)(i.Z,{title:"Редактировать",children:(0,r.jsx)(p(),{href:h,children:(0,r.jsx)(o.Z,{children:(0,r.jsx)(x.Z,{})})})}),(0,r.jsx)(i.Z,{title:"Удалить",children:(0,r.jsx)(o.Z,{onClick:()=>c(d),children:(0,r.jsx)(a.Z,{})})})]})};var g=m},80357:function(n,e,t){"use strict";t.d(e,{p:function(){return h}});var r=t(85893);t(67294);var i=t(84276),o=t(7297),l=t(57681),s=t(186);function a(){let n=(0,o.Z)([""]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  gap: 10px;\n  margin-top: 30px;\n"]);return u=function(){return n},n}let c=(0,s.ZP)(l.Z).withConfig({componentId:"sc-5c51a4ad-0"})(a()),d=s.ZP.div.withConfig({componentId:"sc-5c51a4ad-1"})(u());var f=t(42143);let h=n=>{let{closeButtonFn:e,deletePlacementFn:t,deletingText:o}=n;return(0,r.jsxs)(c,{isOpen:!0,onClose:e,children:[(0,r.jsx)(i.r6,{children:o}),(0,r.jsxs)(d,{children:[(0,r.jsx)(f.Z,{onClick:e,children:"Нет"}),(0,r.jsx)(f.Z,{dark:!0,onClick:t,children:"Да"})]})]})}},32820:function(n,e,t){"use strict";var r=t(85893);t(67294);let i=n=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...n,children:[(0,r.jsx)("path",{fill:"#8DAEC1",fillRule:"evenodd",d:"M2 6a1 1 0 0 1 1-1h18a1 1 0 1 1 0 2H3a1 1 0 0 1-1-1Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#8DAEC1",fillRule:"evenodd",d:"M10 3a1 1 0 0 0-1 1v2a1 1 0 0 1-2 0V4a3 3 0 0 1 3-3h4a3 3 0 0 1 3 3v2a1 1 0 1 1-2 0V4a1 1 0 0 0-1-1h-4ZM5 5a1 1 0 0 1 1 1v14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V6a1 1 0 1 1 2 0v14a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V6a1 1 0 0 1 1-1Z",clipRule:"evenodd"}),(0,r.jsx)("path",{fill:"#8DAEC1",fillRule:"evenodd",d:"M10 10a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0v-6a1 1 0 0 1 1-1ZM14 10a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0v-6a1 1 0 0 1 1-1Z",clipRule:"evenodd"})]});e.Z=i},34956:function(n,e,t){"use strict";var r=t(85893);t(67294);let i=n=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:20,fill:"none",...n,children:(0,r.jsx)("path",{stroke:n.stroke?n.stroke:"#222121",strokeLinecap:"round",strokeWidth:2,d:"m1 1 7.293 7.293a1 1 0 0 1 0 1.414L1 17"})});e.Z=i},43795:function(n,e,t){"use strict";var r=t(85893);t(67294);let i=n=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...n,children:(0,r.jsx)("path",{fill:"#8DAEC1",fillRule:"evenodd",d:"M11 20a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1ZM18 3.879c-.297 0-.583.118-.793.328L4.903 16.511l-.529 2.115 2.115-.529L18.793 5.793A1.123 1.123 0 0 0 18 3.879Zm-2.207-1.086a3.121 3.121 0 0 1 4.414 4.414l-12.5 12.5a1 1 0 0 1-.464.263l-4 1a1 1 0 0 1-1.213-1.212l1-4a1 1 0 0 1 .263-.465l12.5-12.5Z",clipRule:"evenodd"})});e.Z=i},51949:function(n,e,t){"use strict";t.d(e,{l:function(){return i}});var r=t(20377);function i(){let{enqueueSnackbar:n}=(0,r.Ds)(),e=(e,t)=>{n(e,{variant:t})};return e}},88025:function(n,e,t){"use strict";t.d(e,{F8:function(){return p},G9:function(){return x},HK:function(){return h},PK:function(){return d},PM:function(){return g},Qw:function(){return m},TK:function(){return a},YE:function(){return c},mQ:function(){return v},px:function(){return f}});var r=t(49836),i=t(49305);let o=i.gk.injectEndpoints({endpoints:n=>({blockPlacement:n.mutation({query:n=>({url:"/placement/".concat(n,"/block"),method:"PUT"})}),unblockPlacement:n.mutation({query:n=>({url:"/placement/".concat(n,"/unblock"),method:"PUT"})}),deletePlacement:n.mutation({query:n=>({url:"/placement/".concat(n),method:"DELETE",body:n})}),getPartnerPlacements:n.query({query:n=>({url:"/placement?".concat(n)}),transformResponse:(n,e,t)=>{var r;return{...n,totalCount:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["Placements"],keepUnusedDataFor:0}),getBookingData:n.query({query:n=>({url:"/placement?".concat((0,r.z)(n))}),transformResponse:(n,e,t)=>{var r;return{data:n,totalCount:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0}),getDetailBookingData:n.query({query:n=>{let{id:e,urlQueries:t}=n;return{url:"/placement/".concat(e,"?").concat("string"!=typeof t?(0,r.z)(t):t)}}}),getSpecialOffer:n.query({query:()=>({url:"/placement?specialOffer=true"})}),bookCurrentRoom:n.mutation({query:n=>({url:"/booking/verify",method:"POST",body:n}),extraOptions:{name:"bookCurrentRoom"}}),getBookedListItems:n.query({query:n=>({url:"/booking?".concat(n)}),transformResponse:(n,e)=>{var t;return{...n,totalCount:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["bookings"],keepUnusedDataFor:0}),getBookedExcursionGroupedItems:n.query({query:n=>({url:"/booking/excursion?".concat(n)}),transformResponse:(n,e)=>{var t;return{...n,totalCount:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0,providesTags:["bookings"]}),addPlacementById:n.mutation({query:n=>({url:"/placement",method:"POST",body:n}),invalidatesTags:["Placements"],extraOptions:{name:"addPlacement"}}),getBookingDataByAmenities:n.query({query:n=>({url:"/placement?".concat((0,r.z)(n))}),transformResponse:(n,e,t)=>{var r;return{data:n.data,totalCount:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1",amenitiesData:n.amenitiesData}}}),addExcursionExternalPlaces:n.mutation({query:n=>({url:"/booking/excursion",method:"PUT",body:n})})}),overrideExisting:!0}),{endpoints:{getBookingData:l,getDetailBookingData:s}}=o,{useGetDetailBookingDataQuery:a,useGetSpecialOfferQuery:u,useBookCurrentRoomMutation:c,useGetBookedListItemsQuery:d,useAddPlacementByIdMutation:f,useGetPartnerPlacementsQuery:h,useDeletePlacementMutation:p,useUnblockPlacementMutation:x,useBlockPlacementMutation:m,useGetBookedExcursionGroupedItemsQuery:g,useAddExcursionExternalPlacesMutation:v,useGetBookingDataByAmenitiesQuery:w}=o},9431:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return P}});var r=t(85893),i=t(67294),o=t(88025),l=t(27060),s=t(74094),a=t(34443),u=t(49836),c=t(65959),d=t(40152),f=t(80514),h=t(51949),p=t(19656),x=t(80357),m=t(15442),g=t(96894);let v=()=>{let n=(0,l.Cl)(),[e,t]=(0,i.useState)(1),[v,w]=(0,i.useState)(0),[j,{isLoading:Z}]=(0,o.F8)(),[y,{isLoading:C}]=(0,o.G9)(),[b,{isLoading:k}]=(0,o.Qw)(),[P,T]=(0,i.useState)(!1),[D,z]=(0,i.useState)(null),R=(0,d.Z)("(max-width: ".concat(f.AV.sm,"px)")),q=(0,h.l)(),{data:E,isLoading:O,isError:A,refetch:M}=(0,o.HK)((0,u.z)({limit:g.UZ,offset:v})),S=n=>{z(n),T(!0)},U=()=>{z(null),T(!1)},L=async(n,e)=>{e?await y(n).unwrap():await b(n).unwrap(),M()},F=async()=>{if(D)try{await j(D).unwrap(),q("Объект размещения был удален успешно","success"),M()}catch(n){q("Объект размещения не был удален. Попробуйте заново","error")}finally{T(!1)}},I=n=>{w((n-1)*g.UZ),t(n)},_=(0,i.useMemo)(()=>Math.ceil(Number(null==E?void 0:E.totalCount)/g.UZ),[null==E?void 0:E.totalCount]),B=(0,i.useMemo)(()=>[n.accessor("name",{size:657,header:()=>"Название жилья",cell:n=>(0,r.jsx)(m.ZR,{children:n.getValue()})}),n.accessor("city",{size:130,header:()=>"Населенный пункт",cell:n=>n.getValue()}),n.accessor("address",{size:300,enableHiding:!0,header:()=>"Адрес",cell:n=>n.getValue()}),n.accessor("id",{id:"actions",size:96,header:()=>"Действия",cell:n=>(0,r.jsx)(p.Z,{id:n.row.original.id,width:n.column.columnDef.size,isHideValue:n.row.original.isHide,onHideShowButtonClickFn:L,onDeleteClickFn:S})})],[E]),N=(0,s.b7)({data:(null==E?void 0:E.data)||[],columns:B,state:{columnVisibility:{address:!R}},enableColumnResizing:!1,getCoreRowModel:(0,l.sC)()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.xJ,{children:[!O&&!A&&(0,r.jsxs)(m.iA,{children:[(0,r.jsx)(m.ss,{children:N.getHeaderGroups().map(n=>(0,r.jsx)(m.SC,{children:n.headers.map(n=>(0,r.jsx)(m.xs,{style:{width:n.column.columnDef.size},children:n.isPlaceholder?null:(0,s.ie)(n.column.columnDef.header,n.getContext())},n.id))},n.id))}),N.getRowModel().rows.length&&!O?(0,r.jsx)(m.RM,{children:N.getRowModel().rows.map(n=>(0,r.jsx)(m.SC,{children:n.getVisibleCells().map(n=>(0,r.jsx)(m.pj,{style:{width:n.column.columnDef.size},children:(0,s.ie)(n.column.columnDef.cell,n.getContext())},n.id))},n.id))}):(0,r.jsx)(m.RM,{children:(0,r.jsx)(m.SC,{children:(0,r.jsx)(m.pj,{colSpan:6,style:{textAlign:"center"},children:"Здесь будет ваше жильё"})})})]}),E&&_>1&&(0,r.jsx)(a.Z,{leftSideButtons:1,rightSideButtons:1,visiblePages:4,currentPage:e,totalPages:_,onPageChange:I})]}),P&&(0,r.jsx)(x.p,{deletingText:"Вы уверены, что хотите удалить объект размещения?",deletePlacementFn:F,closeButtonFn:U}),(0,r.jsx)(c.Z,{showSpinner:Z||k||C})]})};var w=t(27982),j=t(42143),Z=t(41664),y=t.n(Z),C=t(79417);let b=[{label:"Панель управления",url:"/control-panel"},{label:"Жилье"}],k=()=>(0,r.jsxs)(w.yr,{children:[(0,r.jsxs)(w.vO,{children:[(0,r.jsx)(C.Z,{paths:b}),(0,r.jsx)(y(),{href:"/control-panel/placement/add",children:(0,r.jsx)(j.Z,{dark:!0,children:"Добавить жилье"})})]}),(0,r.jsx)(v,{})]});var P=k}},function(n){n.O(0,[8999,9246,5647,9774,2888,179],function(){return n(n.s=60357)}),_N_E=n.O()}]);