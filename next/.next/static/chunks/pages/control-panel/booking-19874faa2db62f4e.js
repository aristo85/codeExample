(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{8940:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/control-panel/booking",function(){return t(73310)}])},86998:function(e,n,t){"use strict";t.d(n,{t:function(){return l}});var o=t(7297),r=t(186);function i(){let e=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 26px;\n  width: 100%;\n"]);return i=function(){return e},e}let l=r.ZP.div.withConfig({componentId:"sc-9dddfa2c-0"})(i())},47805:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var o=t(85893),r=t(67294),i=t(7297),l=t(186);function c(){let e=(0,i.Z)(["\n      margin: 16px 0;\n    "]);return c=function(){return e},e}function a(){let e=(0,i.Z)(["\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n    font-family: ",";\n    position: relative;\n    padding: 0 8px;\n    cursor: pointer;\n\n    &::after {\n      position: absolute;\n      content: '';\n      display: ",";\n      height: 2px;\n      background-color: ",";\n      bottom: -8px;\n      left: 0;\n      width: 100%;\n      z-index: 1;\n    }\n\n    ","\n  "]);return a=function(){return e},e}function s(){let e=(0,i.Z)(["\n  ","\n"]);return s=function(){return e},e}function u(){let e=(0,i.Z)(["\n      overflow-y: hidden;\n      overflow-x: auto;\n      \n      &::after {\n      bottom: 8px;\n        width: ",";\n      }\n    "]);return u=function(){return e},e}function d(){let e=(0,i.Z)(["\n    ","\n  "]);return d=function(){return e},e}function f(){let e=(0,i.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 24px;\n  position: relative;\n  width: 100%;\n  overflow: visible;\n\n  &::after {\n    position: absolute;\n    content: '';\n    display: block;\n    height: 2px;\n    background-color: #c6e1f3;\n    bottom: -8px;\n    width: 100%;\n  }\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  ","\n"]);return f=function(){return e},e}let g=l.ZP.div.withConfig({componentId:"sc-70e301c7-0"})(s(),e=>{let{theme:n,isActive:t}=e;return(0,l.iv)(a(),n.font.size.subtitle2,n.font.weight.regular,t?n.colors.primary:n.colors.default,n.font.family.gothicMedium,t?"block":"none",n.colors.primary,n.media.down("xs")(c()))}),h=l.ZP.div.withConfig({componentId:"sc-70e301c7-1"})(f(),e=>{let{theme:n,wholeWidth:t}=e;return(0,l.iv)(d(),n.media.down("xs")(u(),t?"".concat(t,"px"):"100%"))}),m=e=>{let{setActiveTab:n,activeTab:t,tabs:i}=e,[l,c]=(0,r.useState)(null),a=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{a.current&&c(a.current.scrollWidth)},[]),(0,o.jsx)(h,{ref:a,wholeWidth:l,children:Object.entries(i).map(e=>{let[r]=e,l=i[r];return(0,o.jsx)(g,{onClick:()=>n(r),isActive:r===t,children:l.title},l.title)})})};var p=m},73624:function(e,n,t){"use strict";t.d(n,{Z:function(){return T}});var o=t(85893),r=t(7297),i=t(186);function l(){let e=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  min-width: 122px;\n  height: 37px;\n  border-radius: 8px;\n  border: 1px solid #222121;\n  align-items: center;\n  justify-content: center;\n"]);return l=function(){return e},e}function c(){let e=(0,r.Z)(["\n        width: 36px;\n    "]);return c=function(){return e},e}function a(){let e=(0,r.Z)(["\n    ","\n  "]);return a=function(){return e},e}function s(){let e=(0,r.Z)(["\n          border-right: 1px solid #222121;\n          border-radius: 8px 0 0 8px;\n        "]);return s=function(){return e},e}function u(){let e=(0,r.Z)(["\n          border-left: 1px solid #222121;\n          border-radius: 0 8px 8px 0;\n        "]);return u=function(){return e},e}function d(){let e=(0,r.Z)(["\n  background: #ffffff;\n  outline: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 46px;\n  height: 100%;\n  border: none;\n  cursor: ",";\n\n  ","\n\n  ",";\n  &:disabled {\n    cursor: not-allowed;\n\n    &:hover {\n    }\n  }\n  &:active {\n    background: ",";\n  }\n"]);return d=function(){return e},e}function f(){let e=(0,r.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n    flex: 1;\n    text-align: center;\n    padding: 0 8px;\n    min-width: ",";\n  "]);return f=function(){return e},e}function g(){let e=(0,r.Z)(["\n  ","\n"]);return g=function(){return e},e}function h(){let e=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n"]);return h=function(){return e},e}function m(){let e=(0,r.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n    text-align: center;\n    width: 29px;\n    white-space: nowrap;\n  "]);return m=function(){return e},e}function p(){let e=(0,r.Z)(["\n  ","\n"]);return p=function(){return e},e}let x=i.ZP.div.withConfig({componentId:"sc-1e3d2e29-0"})(l()),w=i.ZP.button.withConfig({componentId:"sc-1e3d2e29-1"})(d(),e=>{let{disabled:n}=e;return"".concat(n?"not-allowed":"pointer")},e=>{let{theme:n}=e;return(0,i.iv)(a(),n.media.down("xs")(c()))},e=>{let{side:n}=e;return"left"===n?(0,i.iv)(s()):"right"===n?(0,i.iv)(u()):""},e=>e.theme.colors.lightDefault),b=i.ZP.h3.withConfig({componentId:"sc-1e3d2e29-2"})(g(),e=>{let{theme:n,longCounter:t}=e;return(0,i.iv)(f(),n.font.family.gothicMedium,n.font.size.subtitle3,n.font.weight.regular,n.colors.default,t?"80px":"50px")}),v=i.ZP.div.withConfig({componentId:"sc-1e3d2e29-3"})(h()),C=i.ZP.h3.withConfig({componentId:"sc-1e3d2e29-4"})(p(),e=>{let{theme:n}=e;return(0,i.iv)(m(),n.font.family.gothicMedium,n.font.size.subtitle2,n.font.weight.regular,n.colors.default)});var j=t(51527),y=t(51489);let Z=e=>{let{onAddButtonClick:n,onDecreaseButtonClick:t,counter:r,label:i,minValue:l,longCounter:c,maxValue:a}=e;return(0,o.jsxs)(v,{children:[i&&(0,o.jsx)(C,{children:i}),(0,o.jsxs)(x,{children:[(0,o.jsx)(w,{type:"button",side:"left",onClick:t,disabled:null!=l&&!!l.toString()&&Number(r)<=l,children:(0,o.jsx)(j.Z,{stroke:"#222121"})}),(0,o.jsx)(b,{longCounter:c,children:r}),(0,o.jsx)(w,{side:"right",onClick:n,type:"button",disabled:null!=a&&!!a.toString()&&Number(r)>=a,children:(0,o.jsx)(y.Z,{stroke:"#222121"})})]})]})};var T=Z},27030:function(e,n,t){"use strict";t.d(n,{Z:function(){return Z}});var o=t(85893);t(67294);var r=t(7297),i=t(186);let l={WAITING_PARTNER:"WAITING_PARTNER",WAITING_PAYMENT:"WAITING_PAYMENT",PARTNER_ACCEPTED:"PARTNER_ACCEPTED",PAID:"PAID",CANCELLED:"CANCELLED"};function c(){let e=(0,r.Z)(["\n      padding: 16px;\n      border-radius: 8px;\n      border: 1px solid #1d7abd;\n    "]);return c=function(){return e},e}function a(){let e=(0,r.Z)(["\n  min-width: 120px;\n  width: max-content;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  ",";\n"]);return a=function(){return e},e}function s(){let e=(0,r.Z)(["\n  width: 7px;\n  height: 7px;\n  border-radius: 7px;\n  background-color: ",";\n"]);return s=function(){return e},e}function u(){let e=(0,r.Z)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return u=function(){return e},e}function d(){let e=(0,r.Z)(["\n  ",";\n  line-height: normal;\n  vertical-align: middle;\n"]);return d=function(){return e},e}function f(){let e=(0,r.Z)(["\n  width: 100px;\n  height: 34px;\n  border-radius: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: ",";\n"]);return f=function(){return e},e}function g(){let e=(0,r.Z)(["\n    font-family: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return g=function(){return e},e}function h(){let e=(0,r.Z)(["\n  font-size: 11px;\n  text-align: center;\n  ",";\n"]);return h=function(){return e},e}let m=(e,n)=>e===l.PAID?n?"#6fcf97":"rgb(111, 207, 151, 0.3)":e===l.CANCELLED?n?"#de3730":"rgb(222, 55, 48, 0.3)":e===l.WAITING_PAYMENT?n?"#f29200":"rgb(242, 146, 0, 0.3)":e===l.WAITING_PARTNER||e===l.PARTNER_ACCEPTED?n?"#f29200":"rgb(5, 49, 118, 0.3)":"inherit",p=i.ZP.div.withConfig({componentId:"sc-3d156085-0"})(a(),e=>{let{$bordered:n}=e;return n&&(0,i.iv)(c())}),x=i.ZP.div.withConfig({componentId:"sc-3d156085-1"})(s(),e=>{let{$status:n}=e;return m(n,!0)}),w=i.ZP.span.withConfig({componentId:"sc-3d156085-2"})(d(),e=>{let{theme:n,isTable:t}=e;return(0,i.iv)(u(),t?n.font.family.gothicBook:n.font.family.gothicMedium,n.font.size.body2,n.font.weight.regular,n.colors.default)}),b=i.ZP.div.withConfig({componentId:"sc-3d156085-3"})(f(),e=>{let{$status:n}=e;return m(n,!1)}),v=i.ZP.p.withConfig({componentId:"sc-3d156085-4"})(h(),e=>{let{theme:n,$status:t,isTable:o}=e;return(0,i.iv)(g(),n.font.family.gothicMedium,o?400:700,m(t,!0))});var C=t(40152),j=t(80514);let y=e=>{var n,t;let{status:r,bordered:i,isTable:c}=e,a=(0,C.Z)("(max-width: ".concat(j.AV.xs,"px)")),s=new Map([[l.WAITING_PARTNER,"Ожидание подтверждения"],[l.WAITING_PAYMENT,"Ожидание оплаты"],[l.PAID,"Оплачено"],[l.CANCELLED,"Отменено"],[l.PARTNER_ACCEPTED,"Подтверждено партнером"]]);return a?(0,o.jsx)(b,{$status:r,children:(0,o.jsx)(v,{$status:r,isTable:c,children:null!==(n=s.get(r))&&void 0!==n?n:"-"})}):(0,o.jsxs)(p,{$bordered:i,children:[(0,o.jsx)(x,{$status:r}),(0,o.jsx)(w,{isTable:c,children:null!==(t=s.get(r))&&void 0!==t?t:"-"})]})};var Z=y},6153:function(e,n,t){"use strict";var o=t(85893);t(67294);let r=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...e,children:(0,o.jsx)("path",{fill:"#8DAEC1",d:"M21.188 24H8.438a2.815 2.815 0 01-2.813-2.813V8.438a2.815 2.815 0 012.813-2.812h12.75A2.815 2.815 0 0124 8.438v12.75A2.815 2.815 0 0121.187 24zM8.438 7.5a.939.939 0 00-.938.938v12.75c0 .516.42.937.938.937h12.75c.516 0 .937-.42.937-.938V8.438a.939.939 0 00-.938-.937H8.438zm-4.688 9h-.938a.939.939 0 01-.937-.938V2.813c0-.516.42-.937.938-.937h12.75c.516 0 .937.42.937.938v.89h1.875v-.89A2.815 2.815 0 0015.562 0H2.813A2.815 2.815 0 000 2.813v12.75a2.815 2.815 0 002.813 2.812h.937V16.5z"})});n.Z=r},85038:function(e,n,t){"use strict";var o=t(85893);t(67294);let r=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"2 2 20 20",fill:"none",...e,children:(0,o.jsx)("path",{fill:"#fff",d:"m12 18.5 4-4H8l4 4ZM16 10.5l-4-4-4 4h8Z"})});n.Z=r},51527:function(e,n,t){"use strict";var o=t(85893);t(67294);let r=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:(0,o.jsx)("path",{fill:"#0071C2",d:"M13.5 8.5h-11a.5.5 0 1 1 0-1h11a.5.5 0 0 1 0 1Z"})});n.Z=r},51489:function(e,n,t){"use strict";var o=t(85893);t(67294);let r=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:(0,o.jsx)("path",{fill:"#0071C2",d:"M13.5 7.5h-5v-5a.5.5 0 1 0-1 0v5h-5a.5.5 0 1 0 0 1h5v5a.5.5 0 0 0 1 0v-5h5a.5.5 0 0 0 0-1Z"})});n.Z=r},95513:function(e,n,t){"use strict";t.d(n,{m:function(){return r}});var o=t(51949);let r=()=>{let e=(0,o.l)(),n=n=>{navigator.clipboard.writeText(n).then(()=>e("Вы удачно скопировали поле","success")).catch(()=>e("Что-то пошло не так, попробуйте заново","error"))};return[n]}},21973:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var o=t(85893);t(67294);var r=t(7297),i=t(186);function l(){let e=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return l=function(){return e},e}function c(){let e=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  width: fit-content;\n  border-radius: 4px;\n  border: 1px solid ",";\n"]);return c=function(){return e},e}function a(){let e=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n"]);return a=function(){return e},e}function s(){let e=(0,r.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: none;\n  padding: 4px 5px;\n  border: 0;\n  cursor: ",";\n  border-right: 1px solid ",";\n\n  &:first-child {\n    border-bottom: 1px solid ",";\n  }\n"]);return s=function(){return e},e}function u(){let e=(0,r.Z)(["\n    padding: 0 8px;\n    font-family: ",";\n    font-size: ",";\n  "]);return u=function(){return e},e}function d(){let e=(0,r.Z)(["\n  ","\n"]);return d=function(){return e},e}let f=i.ZP.div.withConfig({componentId:"sc-a6a2d954-0"})(l()),g=i.ZP.div.withConfig({componentId:"sc-a6a2d954-1"})(c(),e=>{let{theme:n}=e;return n.colors.default}),h=i.ZP.div.withConfig({componentId:"sc-a6a2d954-2"})(a()),m=i.ZP.button.withConfig({componentId:"sc-a6a2d954-3"})(s(),e=>{let{disabled:n}=e;return"".concat(n?"not-allowed":"pointer")},e=>{let{theme:n}=e;return n.colors.default},e=>{let{theme:n}=e;return n.colors.default}),p=i.ZP.div.withConfig({componentId:"sc-a6a2d954-4"})(d(),e=>{let{theme:n}=e;return(0,i.iv)(u(),n.font.family.gothicMedium,n.font.size.subtitle2)});var x=t(24570),w=t(73624);let b=e=>{let{label:n,value:t,minValue:r,setValue:i,className:l,isMobile:c,maxValue:a}=e,s=()=>{i(t+1)},u=()=>{i(t-1)};return c?(0,o.jsx)(w.Z,{counter:t,onAddButtonClick:s,onDecreaseButtonClick:u,label:n,minValue:r,maxValue:a}):(0,o.jsxs)(f,{className:l,children:[(0,o.jsxs)(g,{children:[(0,o.jsxs)(h,{children:[(0,o.jsx)(m,{type:"button",onClick:s,disabled:null!=a&&!!a.toString()&&t>=a,children:(0,o.jsx)(x.Z,{style:{rotate:"180deg"}})}),(0,o.jsx)(m,{type:"button",onClick:u,disabled:null!=r&&!!r.toString()&&t<=r,children:(0,o.jsx)(x.Z,{})})]}),(0,o.jsx)(p,{children:t})]}),(0,o.jsx)(p,{children:n})]})};var v=b},88025:function(e,n,t){"use strict";t.d(n,{F8:function(){return h},G9:function(){return m},HK:function(){return g},PK:function(){return d},PM:function(){return x},Qw:function(){return p},TK:function(){return a},YE:function(){return u},mQ:function(){return w},px:function(){return f}});var o=t(49836),r=t(49305);let i=r.gk.injectEndpoints({endpoints:e=>({blockPlacement:e.mutation({query:e=>({url:"/placement/".concat(e,"/block"),method:"PUT"})}),unblockPlacement:e.mutation({query:e=>({url:"/placement/".concat(e,"/unblock"),method:"PUT"})}),deletePlacement:e.mutation({query:e=>({url:"/placement/".concat(e),method:"DELETE",body:e})}),getPartnerPlacements:e.query({query:e=>({url:"/placement?".concat(e)}),transformResponse:(e,n,t)=>{var o;return{...e,totalCount:(null==n?void 0:null===(o=n.response)||void 0===o?void 0:o.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["Placements"],keepUnusedDataFor:0}),getBookingData:e.query({query:e=>({url:"/placement?".concat((0,o.z)(e))}),transformResponse:(e,n,t)=>{var o;return{data:e,totalCount:(null==n?void 0:null===(o=n.response)||void 0===o?void 0:o.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0}),getDetailBookingData:e.query({query:e=>{let{id:n,urlQueries:t}=e;return{url:"/placement/".concat(n,"?").concat("string"!=typeof t?(0,o.z)(t):t)}}}),getSpecialOffer:e.query({query:()=>({url:"/placement?specialOffer=true"})}),bookCurrentRoom:e.mutation({query:e=>({url:"/booking/verify",method:"POST",body:e}),extraOptions:{name:"bookCurrentRoom"}}),getBookedListItems:e.query({query:e=>({url:"/booking?".concat(e)}),transformResponse:(e,n)=>{var t;return{...e,totalCount:(null==n?void 0:null===(t=n.response)||void 0===t?void 0:t.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["bookings"],keepUnusedDataFor:0}),getBookedExcursionGroupedItems:e.query({query:e=>({url:"/booking/excursion?".concat(e)}),transformResponse:(e,n)=>{var t;return{...e,totalCount:(null==n?void 0:null===(t=n.response)||void 0===t?void 0:t.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0,providesTags:["bookings"]}),addPlacementById:e.mutation({query:e=>({url:"/placement",method:"POST",body:e}),invalidatesTags:["Placements"],extraOptions:{name:"addPlacement"}}),getBookingDataByAmenities:e.query({query:e=>({url:"/placement?".concat((0,o.z)(e))}),transformResponse:(e,n,t)=>{var o;return{data:e.data,totalCount:(null==n?void 0:null===(o=n.response)||void 0===o?void 0:o.headers.get("X-TOTAL-COUNT"))||"1",amenitiesData:e.amenitiesData}}}),addExcursionExternalPlaces:e.mutation({query:e=>({url:"/booking/excursion",method:"PUT",body:e})})}),overrideExisting:!0}),{endpoints:{getBookingData:l,getDetailBookingData:c}}=i,{useGetDetailBookingDataQuery:a,useGetSpecialOfferQuery:s,useBookCurrentRoomMutation:u,useGetBookedListItemsQuery:d,useAddPlacementByIdMutation:f,useGetPartnerPlacementsQuery:g,useDeletePlacementMutation:h,useUnblockPlacementMutation:m,useBlockPlacementMutation:p,useGetBookedExcursionGroupedItemsQuery:x,useAddExcursionExternalPlacesMutation:w,useGetBookingDataByAmenitiesQuery:b}=i},73310:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var o=t(85893),r=t(27982),i=t(47805),l=t(67294),c=t(78872);let a={[c.UW.PLACEMENT]:{title:"Жилье",query:"PLACEMENT"},[c.UW.EXCURSION]:{title:"Экскурсии",query:"EXCURSION"},[c.UW.GUIDE]:{title:"Гиды",query:"GUIDE"}};var s=t(86998),u=t(88025),d=t(49836),f=t(34443),g=t(96894),h=t(65959),m=t(27060),p=t(74094),x=t(27030),w=t(15442),b=t(27484),v=t.n(b),C=t(11163),j=t(6153),y=t(95513);let Z=e=>{let{data:n}=e,[t]=(0,y.m)(),r=(0,m.Cl)(),i=(0,l.useMemo)(()=>[r.accessor("guest",{size:657,header:()=>"Имя туриста",cell:e=>"".concat(e.row.original.guest.firstName," ").concat(e.row.original.guest.lastName)}),r.accessor("owner",{size:657,header:()=>"Имя гида",cell:e=>"".concat(e.row.original.name)}),r.accessor("eventStartDateTime",{size:657,header:()=>"Дата",cell:e=>"".concat(v()(e.row.original.eventStartDateTime).utc(!1).format(g.K_))}),r.accessor("eventStartDateTime",{size:657,header:()=>"Время",cell:e=>"".concat(v()(e.row.original.eventStartDateTime).utc(!1).format("HH:mm"))}),r.accessor("guest.email",{size:200,enableHiding:!0,header:()=>"Email",cell:e=>(0,o.jsxs)(w.Ll,{children:[e.getValue(),(0,o.jsx)(j.Z,{onClick:n=>{n.stopPropagation(),t(e.getValue()||"")}})]})}),r.accessor("guest.phone",{size:200,enableHiding:!0,header:()=>"Телефон",cell:e=>e.getValue()}),r.accessor("status",{size:100,enableHiding:!0,header:()=>"Статус",cell:e=>(0,o.jsx)(x.Z,{status:e.getValue(),bordered:!1,isTable:!0})}),r.accessor("bookingNumber",{size:100,enableHiding:!0,header:()=>"№",cell:e=>e.getValue()})],[n]),c=(0,p.b7)({data:n||[],columns:i,enableColumnResizing:!1,getCoreRowModel:(0,m.sC)()}),a=(0,C.useRouter)(),s=e=>{a.push("/control-panel/booking/guide/".concat(e))};return(0,o.jsx)(w.xJ,{children:(0,o.jsxs)(w.iA,{children:[(0,o.jsx)(w.ss,{children:c.getHeaderGroups().map(e=>(0,o.jsx)(w.SC,{children:e.headers.map((e,n)=>(0,o.jsx)(w.xs,{style:{width:e.column.columnDef.size},children:e.isPlaceholder?null:(0,p.ie)(e.column.columnDef.header,e.getContext())},"".concat(e.id,"-").concat(n)))},e.id))}),c.getRowModel().rows.length>0?(0,o.jsx)(w.RM,{children:c.getRowModel().rows.map(e=>(0,o.jsx)(w.SC,{onClick:()=>s(e.original.id),children:e.getVisibleCells().map(e=>(0,o.jsx)(w.pj,{style:{width:e.column.columnDef.size},children:(0,p.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))}):(0,o.jsx)(w.RM,{children:(0,o.jsx)(w.SC,{children:(0,o.jsx)(w.pj,{colSpan:8,style:{textAlign:"center"},children:"Здесь будут ваши бронирования гидов"})})})]})})},T=e=>{let{data:n}=e,t=(0,m.Cl)(),r=(0,l.useMemo)(()=>[t.accessor("guest",{size:657,header:()=>"Имя гостя",cell:e=>"".concat(e.row.original.guest.firstName," ").concat(e.row.original.guest.lastName)}),t.accessor("name",{size:657,header:()=>"Объект размещения",cell:e=>e.getValue()}),t.accessor("arrivalDateTime",{size:657,header:()=>"Заезд",cell:e=>"".concat(v()(e.row.original.arrivalDateTime).format("".concat(g.K_," HH:mm")))}),t.accessor("departureDateTime",{size:657,header:()=>"Выезд",cell:e=>"".concat(v()(e.row.original.departureDateTime).format("".concat(g.K_," HH:mm")))}),t.accessor("bookingDateTime",{size:200,enableHiding:!0,header:()=>"Дата брони",cell:e=>"".concat(v()(e.row.original.bookingDateTime).format("".concat(g.K_," HH:mm")))}),t.accessor("status",{size:100,enableHiding:!0,header:()=>"Статус",cell:e=>(0,o.jsx)(x.Z,{status:e.getValue(),bordered:!1,isTable:!0})}),t.accessor("price",{size:100,enableHiding:!0,header:()=>"Цена",cell:e=>e.getValue()}),t.accessor("commission",{size:100,enableHiding:!0,header:()=>"Комиссия",cell:e=>e.getValue()}),t.accessor("bookingNumber",{size:100,enableHiding:!0,header:()=>"№ брони",cell:e=>e.getValue()})],[n]),i=(0,p.b7)({data:n||[],columns:r,enableColumnResizing:!1,getCoreRowModel:(0,m.sC)()}),c=(0,C.useRouter)(),a=e=>{c.push("/control-panel/booking/placement/".concat(e))};return(0,o.jsx)(w.xJ,{children:(0,o.jsxs)(w.iA,{children:[(0,o.jsx)(w.ss,{children:i.getHeaderGroups().map(e=>(0,o.jsx)(w.SC,{children:e.headers.map((e,n)=>(0,o.jsx)(w.xs,{style:{width:e.column.columnDef.size},children:e.isPlaceholder?null:(0,p.ie)(e.column.columnDef.header,e.getContext())},"".concat(e.id,"-").concat(n)))},e.id))}),i.getRowModel().rows.length>0?(0,o.jsx)(w.RM,{children:i.getRowModel().rows.map(e=>(0,o.jsx)(w.SC,{onClick:()=>a(e.original.id),children:e.getVisibleCells().map(e=>(0,o.jsx)(w.pj,{style:{width:e.column.columnDef.size},children:(0,p.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))}):(0,o.jsx)(w.RM,{children:(0,o.jsx)(w.SC,{children:(0,o.jsx)(w.pj,{colSpan:9,style:{textAlign:"center"},children:"Здесь будут ваши бронирования жилья"})})})]})})};var P=t(85038),E=t(21973);let k=e=>{let{data:n,setSorting:t,sorting:r,refetch:i}=e,[c]=(0,u.mQ)(),a=(0,m.Cl)(),s=(0,l.useMemo)(()=>[a.accessor("name",{size:657,enableSorting:!0,header:()=>"Название экскурсии",cell:e=>(0,o.jsx)(w.G9,{onClick:()=>g(e.row.original),children:e.getValue()})}),a.accessor("date",{size:400,enableSorting:!0,header:()=>"Дата - время",cell:e=>"".concat(e.row.original.date," ").concat(e.row.original.time)}),a.accessor("totalCount",{size:200,enableSorting:!1,header:()=>"Количество мест",cell:e=>"".concat(e.row.original.busyCount,"/").concat(e.row.original.totalCount)}),a.accessor("externalCount",{size:200,enableHiding:!1,enableSorting:!1,header:()=>"Занято мест",cell:e=>(0,o.jsx)(E.Z,{isMobile:!1,minValue:0,maxValue:e.row.original.totalCount,value:e.getValue(),setValue:async n=>{await c({excursionId:e.row.original.id,date:e.row.original.date,time:e.row.original.time,count:n}),await i()}})})],[n]),d=(0,p.b7)({data:n||[],columns:s,enableColumnResizing:!1,getCoreRowModel:(0,m.sC)(),state:{sorting:r},onSortingChange:t,manualSorting:!0,getSortedRowModel:(0,m.tj)()}),f=(0,C.useRouter)(),g=e=>{f.push("/control-panel/booking/table/excursion?id=".concat(e.id,"&time=").concat(e.time,"&dateTime=").concat(e.date,"&name=").concat(e.name))};return(0,o.jsx)(w.xJ,{children:(0,o.jsxs)(w.iA,{children:[(0,o.jsx)(w.ss,{children:d.getHeaderGroups().map((e,n)=>(0,o.jsx)(w.SC,{children:e.headers.map((e,n)=>(0,o.jsx)(w.xs,{style:{width:e.column.columnDef.size},colSpan:e.colSpan,onClick:e.column.getToggleSortingHandler(),children:e.isPlaceholder?null:e.column.getCanSort()?(0,o.jsxs)(w.NF,{children:[(0,p.ie)(e.column.columnDef.header,e.getContext()),e.column.getIsSorted()?({asc:(0,o.jsx)(w.St,{}),desc:(0,o.jsx)(w.xk,{})})[e.column.getIsSorted()]:(0,o.jsx)(P.Z,{})]}):(0,p.ie)(e.column.columnDef.header,e.getContext())},"".concat(e.id,"-").concat(n)))},"".concat(e.id,"-").concat(n)))}),d.getRowModel().rows.length>0?(0,o.jsx)(w.RM,{children:d.getRowModel().rows.map((e,n)=>(0,o.jsx)(w.SZ,{children:e.getVisibleCells().map((e,n)=>(0,o.jsx)(w.pj,{style:{width:e.column.columnDef.size},children:(0,p.ie)(e.column.columnDef.cell,e.getContext())},"".concat(e.id,"-").concat(n)))},"".concat(e.id,"-").concat(n)))}):(0,o.jsx)(w.RM,{children:(0,o.jsx)(w.SC,{children:(0,o.jsx)(w.pj,{colSpan:8,style:{textAlign:"center"},children:"Здесь будут ваши бронирования экскурсий"})})})]})})},A=()=>{var e,n;let[t,r]=(0,l.useState)(0),[m,p]=(0,l.useState)(1),[x,w]=(0,l.useState)(c.UW.PLACEMENT),[b,v]=(0,l.useState)([]),j=(0,C.useRouter)();(0,l.useLayoutEffect)(()=>{j.query.bookingActiveTab&&w(j.query.bookingActiveTab)},[j]);let{data:y,isLoading:P,isError:E,isFetching:A}=(0,u.PK)((0,d.z)({type:x,limit:g.UZ,offset:t,sortBy:"createdAt",orderBy:d.K.DESC}),{skip:x===c.UW.EXCURSION}),{data:S,refetch:N}=(0,u.PM)((0,d.z)({limit:g.UZ,offset:t,sortBy:null===(e=b[0])||void 0===e?void 0:e.id,orderBy:(null===(n=b[0])||void 0===n?void 0:n.desc)?d.K.ASC:d.K.DESC}),{skip:x!==c.UW.EXCURSION}),D=(0,l.useMemo)(()=>Math.ceil(Number(x===c.UW.EXCURSION?null==S?void 0:S.totalCount:null==y?void 0:y.totalCount)/g.UZ),[null==y?void 0:y.totalCount,x,null==S?void 0:S.totalCount]),R=e=>{r((e-1)*g.UZ),p(e)},I=e=>{p(1),r(0),w(e)},z=!A&&!P&&!E;return(0,o.jsxs)(s.t,{children:[(0,o.jsx)(i.Z,{tabs:a,activeTab:x,setActiveTab:I}),z&&x===c.UW.PLACEMENT&&(0,o.jsx)(T,{data:null==y?void 0:y.data}),z&&x===c.UW.EXCURSION&&(0,o.jsx)(k,{sorting:b,refetch:N,data:null==S?void 0:S.data,setSorting:v}),z&&x===c.UW.GUIDE&&(0,o.jsx)(Z,{data:null==y?void 0:y.data}),z&&(null==y?void 0:y.data)&&D>1&&(0,o.jsx)(f.Z,{leftSideButtons:1,rightSideButtons:1,visiblePages:4,currentPage:m,totalPages:D,onPageChange:R,isRewindButtonsShown:!0}),(0,o.jsx)(h.Z,{showSpinner:P})]})},S=()=>(0,o.jsx)(r.FE,{children:(0,o.jsx)(A,{})});var N=S}},function(e){e.O(0,[8999,4881,5647,9774,2888,179],function(){return e(e.s=8940)}),_N_E=e.O()}]);