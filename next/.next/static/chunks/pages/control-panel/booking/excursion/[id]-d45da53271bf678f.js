(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[247],{61928:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/control-panel/booking/excursion/[id]",function(){return e(56594)}])},87295:function(n,t,e){"use strict";e.d(t,{Z:function(){return C}});var i=e(85893);e(67294);var r=e(7297),o=e(25675),c=e.n(o),l=e(57333),u=e(186);function d(){let n=(0,r.Z)(["\n  width: 300px;\n  border-radius: 32px;\n  background: #c6e1f3;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  align-items: center;\n  justify-content: center;\n"]);return d=function(){return n},n}function s(){let n=(0,r.Z)(["\n  border-radius: ",";\n  object-fit: cover;\n"]);return s=function(){return n},n}function f(){let n=(0,r.Z)(["\n  font-size: 24px;\n  color: #222121;\n  text-align: center;\n"]);return f=function(){return n},n}function a(){let n=(0,r.Z)(["\n  font-size: 24px;\n  color: #6c7a89;\n"]);return a=function(){return n},n}function x(){let n=(0,r.Z)(["\n  font-size: 20px;\n  color: #1d7abd;\n"]);return x=function(){return n},n}function h(){let n=(0,r.Z)(["\n  font-size: 20px;\n  color: #4f4f4f;\n  border: none;\n  background: none;\n  text-align: center;\n"]);return h=function(){return n},n}let p=u.ZP.div.withConfig({componentId:"sc-8c579864-0"})(d()),m=(0,u.ZP)(c()).withConfig({componentId:"sc-8c579864-1"})(s(),n=>n.isRectangle?"16px":"50%"),g=u.ZP.p.withConfig({componentId:"sc-8c579864-2"})(f()),b=u.ZP.p.withConfig({componentId:"sc-8c579864-3"})(a()),j=u.ZP.p.withConfig({componentId:"sc-8c579864-4"})(x()),Z=(0,u.ZP)(l.HH).withConfig({componentId:"sc-8c579864-5"})(h());var v=e(89882);let w=n=>{let{phone:t,photo:e,names:r,age:o,jobTitle:c}=n;return(0,i.jsxs)(p,{children:[(0,i.jsx)(m,{src:e,alt:"profile image",width:130,height:130,isRectangle:"Гид"===c}),(0,i.jsx)(g,{children:r}),void 0!==o&&(0,i.jsx)(b,{children:"".concat(o," ").concat((0,v.$)(o,["год","года","лет"]))}),(0,i.jsx)(j,{children:c}),t&&(0,i.jsx)(Z,{format:"+# (###) ### ## ##",value:t})]})};var C=w},22865:function(n,t,e){"use strict";var i=e(85893);e(67294);var r=e(12918),o=e.n(r);let c=n=>{let{status:t,message:e}=n,r=(null==t?void 0:t.toString().startsWith("5"))?"Сервис недоступен":e;return(0,i.jsx)(o(),{title:r,statusCode:null!=t?t:500})};t.Z=c},56594:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return nm}});var i=e(85893);e(67294);var r=e(79417),o=e(7297),c=e(186),l=e(42143);function u(){let n=(0,o.Z)(["\n    "]);return u=function(){return n},n}function d(){let n=(0,o.Z)(["\n    padding: 0;\n    ","\n  "]);return d=function(){return n},n}function s(){let n=(0,o.Z)(["\n  padding: 0 0 calc(34px - 1rem);\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  ","\n"]);return s=function(){return n},n}function f(){let n=(0,o.Z)(["\n    "]);return f=function(){return n},n}function a(){let n=(0,o.Z)(["\n    flex-direction: column;\n    ","\n  "]);return a=function(){return n},n}function x(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  ","\n"]);return x=function(){return n},n}function h(){let n=(0,o.Z)(["\n    flex-direction: column;\n    gap: 0;\n    align-items: center;\n  "]);return h=function(){return n},n}function p(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10%;\n  ","\n"]);return p=function(){return n},n}function m(){let n=(0,o.Z)(["\n      width: 100%;\n    "]);return m=function(){return n},n}function g(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  ","\n"]);return g=function(){return n},n}function b(){let n=(0,o.Z)(["\n      align-self: normal;\n      flex-direction: column;\n      gap: 10px;\n    "]);return b=function(){return n},n}function j(){let n=(0,o.Z)(["\n    ","\n  "]);return j=function(){return n},n}function Z(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-self: flex-start;\n  margin-top: 30px;\n  gap: 24px;\n\n  ","\n"]);return Z=function(){return n},n}function v(){let n=(0,o.Z)(["\n    & > span {\n      & > h2 {\n        font-family: ",";\n        font-size: ",";\n        font-weight: 400;\n        line-height: 39px;\n        margin-bottom: 8px;\n      }\n      & > span {\n        font-family: ",";\n        font-size: ",";\n        font-weight: 400;\n      }\n    }\n  "]);return v=function(){return n},n}function w(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  gap: 10px;\n\n  ","\n"]);return w=function(){return n},n}function C(){let n=(0,o.Z)(["\n      flex-direction: column;\n    "]);return C=function(){return n},n}function P(){let n=(0,o.Z)(["\n    ","\n  "]);return P=function(){return n},n}function I(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 24px;\n  align-items: center;\n  padding-top: 32px;\n  padding-bottom: 32px;\n\n  ","\n"]);return I=function(){return n},n}function y(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  width: 100%;\n"]);return y=function(){return n},n}function k(){let n=(0,o.Z)(["\n  font-weight: 400;\n  font-size: 24px;\n  line-height: 27px;\n  color: #222121;\n"]);return k=function(){return n},n}function z(){let n=(0,o.Z)(["\n  font-size: 20px;\n  line-height: 23px;\n  color: #4f4f4f;\n"]);return z=function(){return n},n}function N(){let n=(0,o.Z)(["\n  height: 2px;\n  background: #8daec1;\n"]);return N=function(){return n},n}function _(){let n=(0,o.Z)(["\n    font-family: ",";\n    font-size: ",";\n    padding-top: 8px;\n    padding-bottom: 32px;\n    text-align: center;\n  "]);return _=function(){return n},n}function E(){let n=(0,o.Z)(["\n  ","\n"]);return E=function(){return n},n}function T(){let n=(0,o.Z)(["\n  width: 300px;\n"]);return T=function(){return n},n}function M(){let n=(0,o.Z)(["\n      border-radius: 20px;\n  "]);return M=function(){return n},n}function O(){let n=(0,o.Z)(["\n  width: 100%;\n  height: 167px;\n  object-fit: cover;\n  border-radius: 32px;\n  ","\n"]);return O=function(){return n},n}function R(){let n=(0,o.Z)(["\n  width: auto;\n  white-space: nowrap;\n  font-size: 24px;\n  color: #eb5757;\n  border-color: #eb5757;\n\n  &:hover {\n    background: rgba(235, 87, 87, 0.3);\n  }\n\n  &:active {\n    background: #fff;\n    color: #eb5757;\n  }\n"]);return R=function(){return n},n}function A(){let n=(0,o.Z)(["\n  width: auto;\n  white-space: nowrap;\n  font-size: 24px;\n"]);return A=function(){return n},n}let D=c.ZP.div.withConfig({componentId:"sc-83b9098b-0"})(s(),n=>{let{theme:t}=n;return t.media.down("sm")(d(),t.media.down("xs")(u()))}),S=c.ZP.div.withConfig({componentId:"sc-83b9098b-1"})(x(),n=>{let{theme:t}=n;return t.media.down("md")(a(),t.media.down("sm")(f()))}),W=c.ZP.div.withConfig({componentId:"sc-83b9098b-2"})(p(),n=>{let{theme:t}=n;return t.media.down("md")(h())}),Y=c.ZP.div.withConfig({componentId:"sc-83b9098b-3"})(g(),n=>{let{$fullWidth:t}=n;return t&&(0,c.iv)(m())}),B=c.ZP.div.withConfig({componentId:"sc-83b9098b-4"})(Z(),n=>{let{theme:t}=n;return(0,c.iv)(j(),t.media.down("md")(b()))}),H=c.ZP.div.withConfig({componentId:"sc-83b9098b-5"})(w(),n=>{let{theme:t}=n;return(0,c.iv)(v(),t.font.family.gothicMedium,t.font.size.heading2,t.font.family.gothicBook,t.font.size.subtitle5)}),L=c.ZP.div.withConfig({componentId:"sc-83b9098b-6"})(I(),n=>{let{theme:t}=n;return(0,c.iv)(P(),t.media.down("md")(C()))}),$=c.ZP.div.withConfig({componentId:"sc-83b9098b-7"})(y()),F=c.ZP.h6.withConfig({componentId:"sc-83b9098b-8"})(k()),G=c.ZP.p.withConfig({componentId:"sc-83b9098b-9"})(z()),X=c.ZP.div.withConfig({componentId:"sc-83b9098b-10"})(N()),q=c.ZP.div.withConfig({componentId:"sc-83b9098b-11"})(E(),n=>{let{theme:t}=n;return(0,c.iv)(_(),t.font.family.gothicMedium,t.font.size.subtitle3)}),K=c.ZP.div.withConfig({componentId:"sc-83b9098b-12"})(T()),J=c.ZP.img.withConfig({componentId:"sc-83b9098b-13"})(O(),n=>{let{theme:t}=n;return t.media.down("xs")(M())}),Q=(0,c.ZP)(l.Z).withConfig({componentId:"sc-83b9098b-14"})(R());(0,c.ZP)(l.Z).withConfig({componentId:"sc-83b9098b-15"})(A());var U=e(11163),V=e(43180),nn=e(9008),nt=e.n(nn),ne=e(27030),ni=e(65959),nr=e(27484),no=e.n(nr),nc=e(22865),nl=e(49043),nu=e(74037),nd=e(87295),ns=e(89882),nf=e(69398),na=e(20293),nx=e(51949);let nh=()=>{var n,t,e,o,c;let u=(0,U.useRouter)(),d=(0,nx.l)(),{id:s}=u.query,{data:f,isLoading:a,isError:x,error:h,refetch:p}=(0,V.tH)({id:Number(s)},{skip:!s}),[m,{isLoading:g}]=(0,V.ES)(),{isCancellationModalOpen:b,modalCancelButtonClickFunction:j,modalAcceptButtonClickFunction:Z,isLoadingCancel:v,onCancelButtonWithoutCalculatePenaltyClick:w}=(0,nl.L)();if((0,nf.Z)(f,p),x){let{data:n}=h;return(0,i.jsx)(nc.Z,{status:null==n?void 0:n.status,message:null==n?void 0:n.message})}if(a||v||(null==f?void 0:f.data)==void 0||g)return(0,i.jsx)(ni.Z,{showSpinner:!0});let{touristData:C,status:P,excursionData:I,isCanBeCancelled:y}=f.data,k=[{url:"/control-panel",label:"Панель управления"},{label:"Бронирования"},{url:"/control-panel/booking/excursion/".concat(s),label:null!==(e=null==I?void 0:I.name)&&void 0!==e?e:"Бронирование"}],z=async n=>{try{let t=await m({id:n}).unwrap();t.success&&d("Вы успешно подтвердили бронирование","success"),p()}catch(n){console.error(n)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nt(),{children:(0,i.jsxs)("title",{children:["Go2Kavkaz : Бронирование ",s]})}),(0,i.jsx)(nu.W,{isOpen:b,closeButton:j,cancelBooking:Z,penaltyAmount:null}),(0,i.jsxs)(S,{children:[(0,i.jsxs)(W,{children:[(0,i.jsxs)(Y,{$fullWidth:!0,children:[(0,i.jsx)(D,{children:(0,i.jsx)(r.Z,{paths:k})}),(0,i.jsxs)(H,{children:[(0,i.jsxs)("span",{children:[(0,i.jsxs)("h2",{children:[C.lastName," ",C.firstName,C.middleName?" ".concat(C.middleName):""]}),(0,i.jsxs)("span",{children:["№ брони ",s]})]}),(0,i.jsx)(ne.Z,{status:P,bordered:!0})]}),(0,i.jsxs)(L,{children:[(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Контактный телефон"}),(0,i.jsx)(G,{children:null==C?void 0:C.phone})]}),(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Электронная почта"}),(0,i.jsx)(G,{children:C.email})]})]}),(0,i.jsx)(X,{}),(0,i.jsxs)(L,{children:[(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Дата"}),(0,i.jsx)(G,{children:(null==I?void 0:I.excursionDate)?no()(null==I?void 0:I.excursionDate).format("DD MMMM YYYY"):null})]}),(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Время"}),(0,i.jsx)(G,{children:(null==I?void 0:I.excursionTime)?null==I?void 0:I.excursionTime:null})]}),(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Длительность"}),(0,i.jsx)(G,{children:(null==I?void 0:I.duration)&&"".concat(I.duration," ").concat((0,ns.$)(I.duration,["час","часа","часов"]))})]})]}),(0,i.jsx)(L,{children:(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Количество участников"}),(0,i.jsx)(G,{children:null==I?void 0:I.numberOfParticipants})]})}),(null==I?void 0:I.numberOfChildren)?(0,i.jsx)(L,{children:(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Дети до 7-ми лет"}),(0,i.jsx)(G,{children:null==I?void 0:I.numberOfChildren})]})}):null,C.comments&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(X,{}),(0,i.jsx)(L,{children:(0,i.jsxs)($,{children:[(0,i.jsx)(F,{children:"Комментарий"}),(0,i.jsx)(G,{style:{whiteSpace:"pre-wrap"},children:C.comments})]})})]})]}),(0,i.jsxs)(Y,{children:[(0,i.jsxs)(K,{children:[(0,i.jsx)(J,{src:null==I?void 0:I.mainImage}),(0,i.jsx)(q,{children:null==I?void 0:I.name})]}),(0,i.jsx)("div",{children:(0,i.jsx)(nd.Z,{photo:null!==(o=null==I?void 0:null===(n=I.guide)||void 0===n?void 0:n.guideAvatar)&&void 0!==o?o:"",names:null!==(c=null==I?void 0:null===(t=I.guide)||void 0===t?void 0:t.guideName)&&void 0!==c?c:"",jobTitle:"Экскурсовод"})})]})]}),(0,i.jsxs)(B,{children:[P===na.g.WAITING_PARTNER&&(0,i.jsx)(l.Z,{onClick:()=>s&&z(Number(s)),children:"Подтвердить"}),y&&(0,i.jsx)(Q,{onClick:()=>s&&w(+s),children:"Отменить бронирование"})]})]})]})},np=()=>(0,i.jsx)(nh,{});var nm=np},12918:function(n,t,e){n.exports=e(43499)}},function(n){n.O(0,[6216,9774,2888,179],function(){return n(n.s=61928)}),_N_E=n.O()}]);