(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5695],{73126:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notification",function(){return e(24480)}])},43180:function(n,t,e){"use strict";e.d(t,{ES:function(){return a},Kz:function(){return f},L$:function(){return p},X4:function(){return g},_h:function(){return m},f4:function(){return s},kP:function(){return h},lq:function(){return d},tH:function(){return c},xg:function(){return l}});var o,i,r=e(49305);(o=i||(i={})).NIGHT_RATE="NightRate",o.DAILY_RATE="DailyRate";let u=r.gk.injectEndpoints({endpoints:n=>({calculatePenalty:n.mutation({query:n=>({url:"/booking/".concat(n,"/calculate-penalty"),method:"POST"})}),getDetailBooking:n.query({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t)}},keepUnusedDataFor:0}),cancelBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/cancel"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:i,queryFulfilled:r}=t,{data:c}=await r,a=i(u.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await r}catch(n){a.undo()}},invalidatesTags:["bookings","notifications","bookedByID"]}),approveBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/approve"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:i,queryFulfilled:r}=t,{data:c}=await r,a=i(u.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await r}catch(n){a.undo()}},invalidatesTags:["bookings","notifications"]}),bookExcursion:n.mutation({query:n=>({url:"/booking/excursion",method:"POST",body:n}),extraOptions:{name:"bookExcursion"}}),reInitPayment:n.mutation({query:n=>({url:"/booking/".concat(n,"/payment"),method:"PUT"}),extraOptions:{name:"reInitPayment"}}),bookGuide:n.mutation({query:n=>({url:"/booking/guide",method:"POST",body:n}),extraOptions:{name:"bookGuide"}}),getBookingInfoById:n.query({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/info/").concat(e),method:"GET"}},extraOptions:{name:"bookingInfo"}}),cancelBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/cancel/").concat(e),method:"PUT"}},extraOptions:{name:"cancelBookingWithToken"}}),approveBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/approve/").concat(e),method:"PUT"}},extraOptions:{name:"approveBookingWithToken"}})}),overrideExisting:!0}),{useGetDetailBookingQuery:c,useApproveBookingMutation:a,useCancelBookingMutation:l,useCalculatePenaltyMutation:s,useBookExcursionMutation:d,useBookGuideMutation:f,useReInitPaymentMutation:p,useGetBookingInfoByIdQuery:g,useCancelBookingWithTokenMutation:h,useApproveBookingWithTokenMutation:m}=u,{endpoints:{getDetailBooking:x}}=u},20293:function(n,t,e){"use strict";var o,i;e.d(t,{g:function(){return o}}),(i=o||(o={})).WAITING_PARTNER="WAITING_PARTNER",i.WAITING_PAYMENT="WAITING_PAYMENT",i.PARTNER_ACCEPTED="PARTNER_ACCEPTED",i.PAID="PAID",i.CANCELLED="CANCELLED"},49043:function(n,t,e){"use strict";e.d(t,{L:function(){return l}});var o=e(67294),i=e(43180),r=e(51949),u=e(41248),c=e(68270),a=e(96245);let l=()=>{var n;let t=(0,r.l)(),[e,l]=(0,o.useState)(null),[s,d]=(0,o.useState)(null),[f,p]=(0,o.useState)(!1),g=(0,u.v9)(c.vI),[h,{isLoading:m}]=(0,i.f4)(),[x,{isLoading:k}]=(0,i.xg)(),y=()=>{l(null),p(!1)},T=null===(n=(0,a.Z)(g))||void 0===n?void 0:n.user,w=T.roleType===c.dC.TOURIST,b=async n=>{if(w)try{l(n);let t=await h(n).unwrap();d(t.data.amount),p(!0)}catch(n){l(null),p(!1)}else l(n),p(!0)},P=n=>{l(n),p(!0)},E=async()=>{if(e)try{let n=await x({id:e}).unwrap();n.success&&t("Вы успешно отменили бронирование","success")}catch(n){console.error(n)}finally{p(!1),l(null)}};return{cancellationId:e,penaltyAmount:s,isCancellationModalOpen:f,isCalculatePenaltyLoading:m,isLoadingCancel:k,onCancelButtonClick:b,modalCancelButtonClickFunction:y,modalAcceptButtonClickFunction:E,onCancelButtonWithoutCalculatePenaltyClick:P}}},51949:function(n,t,e){"use strict";e.d(t,{l:function(){return i}});var o=e(20377);function i(){let{enqueueSnackbar:n}=(0,o.Ds)(),t=(t,e)=>{n(t,{variant:e})};return t}},39027:function(n,t,e){"use strict";e.d(t,{FE:function(){return g},UP:function(){return m},V1:function(){return h}});var o=e(7297),i=e(186);function r(){let n=(0,o.Z)(["\n    gap: 16px;\n    padding-bottom: 16px;\n  "]);return r=function(){return n},n}function u(){let n=(0,o.Z)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 32px;\n  ","\n"]);return u=function(){return n},n}function c(){let n=(0,o.Z)(["\n    font-size: 48px;\n    line-height: 56px;\n    margin-top: 0; \n  "]);return c=function(){return n},n}function a(){let n=(0,o.Z)(["\n    font-size: 34px;\n    line-height: 46px;\n  "]);return a=function(){return n},n}function l(){let n=(0,o.Z)(["\n  width: 100%;\n  max-width: 1180px;\n  font-size: 48px;\n  line-height: 64px;\n  color: ",";\n  font-weight: 400;\n  margin-top: 16px;\n  text-align: left;\n\n  ","\n\n  ",";\n"]);return l=function(){return n},n}function s(){let n=(0,o.Z)(["\n      width: calc(100% - ",");\n    "]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n      width: calc(100% - ",");\n    "]);return d=function(){return n},n}function f(){let n=(0,o.Z)(["\n    ",";\n    ",";\n  "]);return f=function(){return n},n}function p(){let n=(0,o.Z)(["\n  position: absolute;\n  padding: 24px 0;\n  ","\n"]);return p=function(){return n},n}let g=i.ZP.div.withConfig({componentId:"sc-401accef-0"})(u(),n=>{let{theme:t}=n;return t.media.down("xs")(r())}),h=i.ZP.h1.withConfig({componentId:"sc-401accef-1"})(l(),n=>{let{theme:t}=n;return t.colors.default},n=>{let{theme:t}=n;return t.media.down("md")(c())},n=>{let{theme:t}=n;return t.media.down("xs")(a())}),m=i.ZP.div.withConfig({componentId:"sc-401accef-2"})(p(),n=>{let{theme:t}=n;return(0,i.iv)(f(),t.media.down("md")(s(),t.layouts.paddingMd),t.media.down("sm")(d(),t.layouts.paddingSm))})},74037:function(n,t,e){"use strict";e.d(t,{W:function(){return m}});var o=e(85893);e(67294);var i=e(84276),r=e(42143),u=e(7297),c=e(57681),a=e(186);function l(){let n=(0,u.Z)([""]);return l=function(){return n},n}function s(){let n=(0,u.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  gap: 10px;\n  margin-top: 30px;\n"]);return s=function(){return n},n}function d(){let n=(0,u.Z)(["\n  ","\n"]);return d=function(){return n},n}let f=(0,a.ZP)(c.Z).withConfig({componentId:"sc-df9bad11-0"})(l()),p=a.ZP.div.withConfig({componentId:"sc-df9bad11-1"})(s()),g=a.ZP.h3.withConfig({componentId:"sc-df9bad11-2"})(d(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-weight: ").concat(t.font.weight,";\n    font-size: ").concat(t.font.size.subtitle3,";\n    text-align: center;\n    margin-top: 16px;\n  ")});var h=e(64468);let m=n=>{let{closeButton:t,cancelBooking:e,isOpen:u,penaltyAmount:c}=n;return(0,o.jsxs)(f,{isOpen:u,onClose:t,children:[(0,o.jsx)(i.r6,{children:"Вы уверены, что хотите отменить бронирование?"}),c?(0,o.jsx)(g,{children:"Сумма штрафа - ".concat(c," ").concat((0,h.fd)(c||0,h.Tl.rubles))}):null,(0,o.jsxs)(p,{children:[(0,o.jsx)(r.Z,{onClick:t,children:"Нет"}),(0,o.jsx)(r.Z,{dark:!0,onClick:e,children:"Да"})]})]})}},24480:function(n,t,e){"use strict";e.r(t);var o=e(85893);e(67294);var i=e(47174),r=e(39027);let u=()=>(0,o.jsx)(r.FE,{children:(0,o.jsx)(i.Z,{})});t.default=u}},function(n){n.O(0,[7174,9774,2888,179],function(){return n(n.s=73126)}),_N_E=n.O()}]);