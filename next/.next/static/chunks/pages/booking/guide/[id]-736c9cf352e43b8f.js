(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9219],{79557:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking/guide/[id]",function(){return e(80177)}])},43180:function(n,t,e){"use strict";e.d(t,{ES:function(){return l},Kz:function(){return f},L$:function(){return p},X4:function(){return h},_h:function(){return x},f4:function(){return s},kP:function(){return m},lq:function(){return d},tH:function(){return u},xg:function(){return a}});var o,r,i=e(49305);(o=r||(r={})).NIGHT_RATE="NightRate",o.DAILY_RATE="DailyRate";let c=i.gk.injectEndpoints({endpoints:n=>({calculatePenalty:n.mutation({query:n=>({url:"/booking/".concat(n,"/calculate-penalty"),method:"POST"})}),getDetailBooking:n.query({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t)}},keepUnusedDataFor:0}),cancelBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/cancel"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:r,queryFulfilled:i}=t,{data:u}=await i,l=r(c.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,u)}));try{await i}catch(n){l.undo()}},invalidatesTags:["bookings","notifications","bookedByID"]}),approveBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/approve"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...o}=n,{dispatch:r,queryFulfilled:i}=t,{data:u}=await i,l=r(c.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,u)}));try{await i}catch(n){l.undo()}},invalidatesTags:["bookings","notifications"]}),bookExcursion:n.mutation({query:n=>({url:"/booking/excursion",method:"POST",body:n}),extraOptions:{name:"bookExcursion"}}),reInitPayment:n.mutation({query:n=>({url:"/booking/".concat(n,"/payment"),method:"PUT"}),extraOptions:{name:"reInitPayment"}}),bookGuide:n.mutation({query:n=>({url:"/booking/guide",method:"POST",body:n}),extraOptions:{name:"bookGuide"}}),getBookingInfoById:n.query({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/info/").concat(e),method:"GET"}},extraOptions:{name:"bookingInfo"}}),cancelBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/cancel/").concat(e),method:"PUT"}},extraOptions:{name:"cancelBookingWithToken"}}),approveBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/approve/").concat(e),method:"PUT"}},extraOptions:{name:"approveBookingWithToken"}})}),overrideExisting:!0}),{useGetDetailBookingQuery:u,useApproveBookingMutation:l,useCancelBookingMutation:a,useCalculatePenaltyMutation:s,useBookExcursionMutation:d,useBookGuideMutation:f,useReInitPaymentMutation:p,useGetBookingInfoByIdQuery:h,useCancelBookingWithTokenMutation:m,useApproveBookingWithTokenMutation:x}=c,{endpoints:{getDetailBooking:g}}=c},81489:function(n,t,e){"use strict";e.d(t,{RS:function(){return c},gD:function(){return u},uV:function(){return i}});var o=e(27484),r=e.n(o);let i="Оформляя заказ, вы соглашаетесь с нашей политикой конфиденциальности. Мы защищаем ваши данные и используем их только для обработки заказа и обеспечения качественного обслуживания. Мы не передаем вашу информацию третьим лицам без вашего согласия. Если у вас есть вопросы, свяжитесь с нами.",c="Соглашаясь с условиями использования данных, вы разрешаете нам использовать их в соответствии с нашей политикой конфиденциальности. Мы не передаем данные третьим лицам без вашего согласия, кроме случаев, когда это необходимо для выполнения наших обязательств или по закону. Если у вас есть вопросы, свяжитесь с нами.",u=n=>{let t=r()(null==n?void 0:n.freeCancellationDeadlineLocal).format("DD.MM.YYYY HH:mm"),e="В случае отмены бронирования";return(null==n?void 0:n.freeCancellationPossible)?(null==n?void 0:n.freeCancellationDeadlineLocal)?"".concat(e," до ").concat(t," (по местному времени отеля) вам возвращается вся оплаченная сумма. При отмене после ").concat(t,"\n      с вас будет удержан штраф в размере ").concat(n.penaltyAmount," ₽."):"".concat(e,"  вам возвращается оплаченная сумма."):"".concat(e," вам возвращается оплаченная сумма с удержанием штрафа в размере ").concat(null==n?void 0:n.penaltyAmount," ₽.")}},54952:function(n,t,e){"use strict";e.d(t,{Z:function(){return w}});var o=e(85893);e(67294);var r=e(7297),i=e(186),c=e(96910);function u(){let n=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  gap: 24px;\n  border-radius: 32px;\n  ",";\n"]);return u=function(){return n},n}function l(){let n=(0,r.Z)(["\n  display: grid;\n  grid-template-columns: 5% 95%;\n  grid-column-gap: 15px;\n  grid-row-gap: 4px;\n  grid-row: 2;\n"]);return l=function(){return n},n}function a(){let n=(0,r.Z)(["\n  align-self: center;\n"]);return a=function(){return n},n}function s(){let n=(0,r.Z)(["\n  white-space: nowrap;\n  grid-column: 2;\n  ",";\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  grid-column: 2;\n  ",";\n"]);return d=function(){return n},n}let f=i.ZP.div.withConfig({componentId:"sc-c99a7ba-0"})(u(),n=>{let{theme:t}=n;return"\n    border: 2px solid ".concat(t.colors.secondary,";\n  ")}),p=i.ZP.div.withConfig({componentId:"sc-c99a7ba-1"})(l()),h=(0,i.ZP)(c.Z).withConfig({componentId:"sc-c99a7ba-2"})(a()),m=i.ZP.h3.withConfig({componentId:"sc-c99a7ba-3"})(s(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=i.ZP.h4.withConfig({componentId:"sc-c99a7ba-4"})(d(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.secondary,";\n    font-size: ").concat(t.font.size.body3,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),g=n=>{let{items:t}=n;return(0,o.jsx)(f,{children:t.map((n,t)=>(0,o.jsxs)(p,{children:[n.icon?n.icon:(0,o.jsx)(h,{}),(0,o.jsx)(m,{children:n.title}),(0,o.jsx)(x,{children:n.text})]},t))})};var w=g},22865:function(n,t,e){"use strict";var o=e(85893);e(67294);var r=e(12918),i=e.n(r);let c=n=>{let{status:t,message:e}=n,r=(null==t?void 0:t.toString().startsWith("5"))?"Сервис недоступен":e;return(0,o.jsx)(i(),{title:r,statusCode:null!=t?t:500})};t.Z=c},13435:function(n,t,e){"use strict";e.d(t,{k:function(){return v}});var o=e(85893);e(67294);var r=e(7297),i=e(186);function c(){let n=(0,r.Z)(["\n        gap: 8px;\n    "]);return c=function(){return n},n}function u(){let n=(0,r.Z)(["\n  ","\n"]);return u=function(){return n},n}function l(){let n=(0,r.Z)(["\n        font-size: ",";\n    "]);return l=function(){return n},n}function a(){let n=(0,r.Z)(["\n  ","\n"]);return a=function(){return n},n}function s(){let n=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n        font-size: ",";\n    "]);return d=function(){return n},n}function f(){let n=(0,r.Z)(["\n  ","\n"]);return f=function(){return n},n}function p(){let n=(0,r.Z)(["\n  ","\n"]);return p=function(){return n},n}let h=i.ZP.div.withConfig({componentId:"sc-3b287813-0"})(u(),n=>{let{theme:t}=n;return"\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    ".concat(t.media.down("sm")(c()),"\n  ")}),m=i.ZP.h2.withConfig({componentId:"sc-3b287813-1"})(a(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.heading2,";\n    font-weight: ").concat(t.font.weight.regular,";\n    ").concat(t.media.down("sm")(l(),t.font.size.subtitle1),"\n  ")}),x=i.ZP.div.withConfig({componentId:"sc-3b287813-2"})(s()),g=i.ZP.h2.withConfig({componentId:"sc-3b287813-3"})(f(),n=>{let{theme:t,currentStep:e}=n;return"\n    font-weight: ".concat(t.font.weight.regular,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    color: ").concat(e?t.colors.default:"#8daec1",";\n    ").concat(t.media.down("xs")(d(),t.font.size.subtitle2),";\n  ")}),w=i.ZP.h3.withConfig({componentId:"sc-3b287813-4"})(p(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),v=n=>{let{currentStep:t,stepsAmount:e,subTitle:r,title:i}=n;return(0,o.jsxs)(h,{children:[i&&"string"==typeof i?(0,o.jsx)(m,{children:i}):i,t&&e&&(0,o.jsxs)(x,{children:[(0,o.jsxs)(g,{currentStep:!0,children:["Шаг ",t]}),(0,o.jsxs)(g,{children:["/",e]})]}),r&&(0,o.jsx)(w,{children:r})]})}},44643:function(n,t,e){"use strict";e.d(t,{Z:function(){return v}});var o=e(85893);e(67294);var r=e(7297),i=e(186);function c(){let n=(0,r.Z)(["\n  ",";\n"]);return c=function(){return n},n}function u(){let n=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  gap: 10px;\n  flex-wrap: wrap;\n"]);return u=function(){return n},n}function l(){let n=(0,r.Z)(["\n  ",";\n"]);return l=function(){return n},n}function a(){let n=(0,r.Z)(["\n  ",";\n"]);return a=function(){return n},n}function s(){let n=(0,r.Z)(["\n  width: 100%;\n  height: 1px;\n  background: #8daec1;\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  display: flex;\n  padding: 24px;\n  border-radius: 32px;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n  background: #c6e1f3;\n  height: auto;\n"]);return d=function(){return n},n}let f=i.ZP.h3.withConfig({componentId:"sc-5c378-0"})(c(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),p=i.ZP.div.withConfig({componentId:"sc-5c378-1"})(u()),h=i.ZP.h4.withConfig({componentId:"sc-5c378-2"})(l(),n=>{let{theme:t}=n;return"\n    color: #4F4F4F;\n    font-size: ".concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),m=i.ZP.h4.withConfig({componentId:"sc-5c378-3"})(a(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=i.ZP.span.withConfig({componentId:"sc-5c378-4"})(s()),g=i.ZP.div.withConfig({componentId:"sc-5c378-5"})(d()),w=n=>{let{upSection:t,downSection:e}=n,r=null==e?void 0:e.list.reduce((n,t)=>n+(null==t?void 0:t.price),0);return(0,o.jsxs)(g,{children:[(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f,{children:"Стоимость"}),t.list.map(n=>(0,o.jsxs)(p,{children:[(0,o.jsxs)(h,{children:[n.listTitle,":"]}),(0,o.jsxs)(m,{children:[n.price," ₽"]})]},n.listTitle))]}),(0,o.jsx)(x,{}),e&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p,{children:[(0,o.jsx)(f,{children:"Итого"}),(0,o.jsxs)(f,{children:[r," ₽"]})]}),null==e?void 0:e.list.map(n=>(0,o.jsxs)(p,{children:[(0,o.jsxs)(h,{children:[n.listTitle,":"]}),(0,o.jsxs)(m,{children:[n.price," ₽"]})]},n.listTitle))]})]})};var v=w},32762:function(n,t,e){"use strict";e.d(t,{Z:function(){return v}});var o=e(85893);e(67294);var r=e(7297),i=e(186),c=e(42143);function u(){let n=(0,r.Z)(["\n        margin: 0 ",";\n      "]);return u=function(){return n},n}function l(){let n=(0,r.Z)(["\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      margin: 0 auto;\n      max-width: 1180px;\n      padding: 32px;\n      z-index: 1001;\n\n      ","\n    "]);return l=function(){return n},n}function a(){let n=(0,r.Z)(["\n    margin: 0 ",";\n    border:none;\n    padding: 16px 0 16px 0;\n    \n    &.step3 {\n      flex-direction: column;\n    }\n    "]);return a=function(){return n},n}function s(){let n=(0,r.Z)(["\n    ","\n  "]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  border-top: 2px solid #1d7abd;\n  padding-top: 32px;\n  background: #fff;\n  display: flex;\n  direction: rtl;\n  gap: 16px;\n  max-width: 1440px;\n\n  ","\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,r.Z)(["\n      width: 100%;\n      font-size: 20px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    "]);return f=function(){return n},n}function p(){let n=(0,r.Z)(["\n        min-width: auto;\n        padding: 8px;\n        font-size: 16px;\n    "]);return p=function(){return n},n}function h(){let n=(0,r.Z)(["\n    display: ",";\n    ","\n    ","\n  "]);return h=function(){return n},n}function m(){let n=(0,r.Z)(["\n  width: 256px;\n  min-width: fit-content;\n\n  ","\n"]);return m=function(){return n},n}let x=i.ZP.div.withConfig({componentId:"sc-e6ade91f-0"})(d(),n=>{let{sticky:t,theme:e}=n;return t&&(0,i.iv)(l(),e.media.down("md")(u(),e.layouts.paddingMd))},n=>{let{theme:t,sticky:e}=n;return(0,i.iv)(s(),t.media.down("sm")(a(),t.layouts.paddingSm))}),g=(0,i.ZP)(c.Z).withConfig({componentId:"sc-e6ade91f-1"})(m(),n=>{let{theme:t,hidden:e}=n;return(0,i.iv)(h(),e?"none":"unset",t.media.down("sm")(f()),t.media.down("xxs")(p()))}),w=n=>{let{totalSteps:t,currentStep:e,handleNextStep:r,handleBackStep:i,sticky:c,booking:u,className:l}=n,a=e===t;return(0,o.jsxs)(x,{sticky:c,className:l,children:[(0,o.jsx)(g,{hidden:!a,dark:!0,type:"submit",children:u?"Подтвердить бронирование":"Далее"}),(0,o.jsx)(g,{hidden:a,dark:!0,type:"button",onClick:r,children:"Далее"}),e>1&&(0,o.jsx)(g,{type:"button",onClick:i,children:"Назад"})]})};var v=w},96910:function(n,t,e){"use strict";var o=e(85893);e(67294);let r=n=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",...n,children:(0,o.jsx)("path",{stroke:"#8DAEC1",strokeLinecap:"round",strokeWidth:2,d:"m11 1-5.43 9.05a1 1 0 0 1-1.457.285L1 8"})});t.Z=r},88e3:function(n,t,e){"use strict";e.d(t,{Z:function(){return P}});var o=e(85893),r=e(67294),i=e(7297),c=e(186);function u(){let n=(0,i.Z)(["\n  position: relative;\n  display: block;\n  width: 100%;\n  padding-bottom: 17px;\n"]);return u=function(){return n},n}function l(){let n=(0,i.Z)(["\n    font-size: ",";\n    color: ",";\n  "]);return l=function(){return n},n}function a(){let n=(0,i.Z)(["\n  display: block;\n  margin-bottom: 8px;\n  line-height: 23px;\n  ","\n"]);return a=function(){return n},n}function s(){let n=(0,i.Z)(["\n      &::after {\n        transform: scaleX(1);\n      }\n    "]);return s=function(){return n},n}function d(){let n=(0,i.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  border-bottom: 1px solid ",";\n  overflow: hidden;\n  transition: ",";\n  height: 88px;\n  background: #ffffff !important;\n  border: 3px solid\n    ",";\n  border-radius: 16px;\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 2px;\n    transform: scaleX(0);\n    transition: ",";\n  }\n\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,i.Z)(["\n      margin-left: 17px;\n    "]);return f=function(){return n},n}function p(){let n=(0,i.Z)(["\n      margin-left: 8px;\n    "]);return p=function(){return n},n}function h(){let n=(0,i.Z)(["\n      cursor: pointer;\n    "]);return h=function(){return n},n}function m(){let n=(0,i.Z)(["\n  display: flex;\n\n  ","\n\n  ","\n\n  ","\n"]);return m=function(){return n},n}function x(){let n=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n  border: none;\n  outline: none;\n  font-size: ",";\n  font-weight: ",";\n  padding: 6px 16px;\n  resize: none;\n  &::-ms-reveal,\n  &::-ms-clear {\n    display: none;\n  }\n\n  &:disabled {\n    background-color: ",";\n    color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"]);return x=function(){return n},n}function g(){let n=(0,i.Z)(["\n  position: absolute;\n  left: 0;\n  color: red;\n  font-size: 14px;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return g=function(){return n},n}let w=c.ZP.label.withConfig({componentId:"sc-9639c41f-0"})(u()),v=c.ZP.label.withConfig({componentId:"sc-9639c41f-1"})(a(),n=>{let{theme:t}=n;return(0,c.iv)(l(),t.font.size.subtitle2,t.colors.default)}),Z=c.ZP.div.withConfig({componentId:"sc-9639c41f-2"})(d(),n=>{let{theme:t,isError:e}=n;return e?"red":"grey"},n=>n.theme.transition.fast,n=>{let{theme:t,isError:e,isFilled:o}=n;return o&&!e?t.colors.primary:e?"red":t.colors.secondary},n=>n.theme.transition.fast,n=>n.isFocused&&(0,c.iv)(s())),b=c.ZP.div.withConfig({componentId:"sc-9639c41f-3"})(m(),n=>"left"===n.position&&(0,c.iv)(f()),n=>"right"===n.position&&(0,c.iv)(p()),n=>n.isPassword&&(0,c.iv)(h())),j=c.ZP.textarea.withConfig({componentId:"sc-9639c41f-4"})(x(),n=>n.theme.font.size.body2,n=>n.theme.font.weight.semiBold,n=>n.theme.colors.lightDefault,n=>n.theme.colors.default,n=>n.theme.colors.secondary),y=c.ZP.span.withConfig({componentId:"sc-9639c41f-5"})(g());var C=e(62405);let k=(0,r.forwardRef)((n,t)=>{let{name:e,label:i,placeholder:c,startAdornment:u,endAdornment:l,className:a,style:s,disabled:d=!1,error:f,onFocus:p,onBlur:h,...m}=n,[x,g]=(0,C.k)(),[k,P]=(0,r.useState)(!1),[I,z]=(0,r.useState)(!1),S=(0,r.useCallback)(n=>{p&&p(n),g.on()},[p,g.on]),N=(0,r.useCallback)(n=>{h&&h(n),g.off(),z(!0)},[h,g.off]);return(0,o.jsxs)(w,{className:a,style:s,children:[!!i&&(0,o.jsx)(v,{children:i}),(0,o.jsxs)(Z,{className:"textarea",isError:!!f,isFocused:x,isFilled:I,children:[u&&(0,o.jsx)(b,{position:"left",children:u}),(0,o.jsx)(j,{placeholder:c,name:e,disabled:d,ref:t,onFocus:S,onBlur:N,...m}),l&&(0,o.jsx)(b,{position:"right",children:l})]}),!!f&&(0,o.jsx)(y,{children:f})]})});k.displayName="TextareaStyled";var P=k},60268:function(n,t,e){"use strict";e.d(t,{g:function(){return i}});var o=e(67294),r=e(11163);let i=(n,t,e)=>{let i=(0,r.useRouter)(),[c,u]=(0,o.useState)(1),l=t=>{let e=i.query.id,o=e?i.pathname.replace("[id]","".concat(e)):i.pathname;t<=n&&i.push("".concat(o,"?step=").concat(t),void 0,{shallow:!0})};return(0,o.useEffect)(()=>{i.query.step&&u(Number(i.query.step))},[i.query.step]),(0,o.useEffect)(()=>{var n;let o=null!==(n=i.query.step)&&void 0!==n?n:1;if(t&&+o>1&&e){let n=i.pathname.includes("[id]")?i.asPath.split("?step")[0]:i.pathname;i.push("".concat(n,"?step=1"))}},[t,i,e]),{currentStep:c,setStep:l}}},80177:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSP:function(){return n5},default:function(){return n7}});var o=e(7297),r=e(85893),i=e(67294),c=e(22865),u=e(186),l=e(9008),a=e.n(l),s=e(87536),d=e(65959),f=e(13435),p=e(32762),h=e(40152),m=e(80514),x=e(41248),g=e(68270),w=e(11163),v=e(47533),Z=e(24062),b=e(8825);function j(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n"]);return j=function(){return n},n}function y(){let n=(0,o.Z)(["\n      flex-direction: column;\n      gap: 24px;\n  "]);return y=function(){return n},n}function C(){let n=(0,o.Z)(["\n    ","\n  "]);return C=function(){return n},n}function k(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 52px;\n\n  ","\n"]);return k=function(){return n},n}function P(){let n=(0,o.Z)(["\n      gap: 0px;\n  "]);return P=function(){return n},n}function I(){let n=(0,o.Z)(["\n    ","\n  "]);return I=function(){return n},n}function z(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 32px;\n  flex-direction: column;\n  width: 100%;\n\n  ","\n"]);return z=function(){return n},n}function S(){let n=(0,o.Z)(["\n        max-width: 100%;\n        flex-direction: row;\n        width: 100%;\n        gap: 24px;\n      "]);return S=function(){return n},n}function N(){let n=(0,o.Z)(["\n        flex-direction: column;\n        gap: 24px;\n      "]);return N=function(){return n},n}function T(){let n=(0,o.Z)(["\n    width: min-content;\n    max-width: 328px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n\n    ","\n\n    ","\n  "]);return T=function(){return n},n}function D(){let n=(0,o.Z)(["\n  ","\n"]);return D=function(){return n},n}function q(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: 32px;\n  margin-top: 32px;\n"]);return q=function(){return n},n}function E(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0px;\n  align-items: start;\n"]);return E=function(){return n},n}function _(){let n=(0,o.Z)(["\n  color: #222121;\n  font-size: 16px;\n  line-height: 22px;\n  span {\n    color: #27ae60;\n  }\n"]);return _=function(){return n},n}function O(){let n=(0,o.Z)(["\n     .selector {\n      height: ","px;\n      padding-right: 20px;\n    }\n    "]);return O=function(){return n},n}function B(){let n=(0,o.Z)(["\n    ","\n  "]);return B=function(){return n},n}function R(){let n=(0,o.Z)(["\n  width: 288px;\n  .optionsMenu {\n    overflow: inherit;\n  }\n\n  ","\n"]);return R=function(){return n},n}function U(){let n=(0,o.Z)(["\n  color: red;\n  font-size: 14px;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return U=function(){return n},n}function F(){let n=(0,o.Z)(["\n     flex-direction: column;\n    "]);return F=function(){return n},n}function G(){let n=(0,o.Z)(["\n    ","\n  "]);return G=function(){return n},n}function L(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 24px;\n  flex-wrap: wrap;\n  align-items: center;\n  position: relative;\n\n  ","\n"]);return L=function(){return n},n}function M(){let n=(0,o.Z)(["\n      > div.inputwrapper {\n      height: ","px;\n    }\n    input {\n      margin-top: -","px;\n    }\n     input::placeholder {\n      white-space: normal;\n    }\n    "]);return M=function(){return n},n}function V(){let n=(0,o.Z)(["\n    flex-basis: ",";\n    ","\n  "]);return V=function(){return n},n}function A(){let n=(0,o.Z)(["\n  ","\n"]);return A=function(){return n},n}function Y(){let n=(0,o.Z)(["\n    width: 100%;\n    "]);return Y=function(){return n},n}function Q(){let n=(0,o.Z)(["\n    ","\n  "]);return Q=function(){return n},n}function W(){let n=(0,o.Z)(["\n  flex-basis: 48%;\n\n  ","\n"]);return W=function(){return n},n}function H(){let n=(0,o.Z)(["\n  margin-top: -32px;\n  color: #8daec1;\n  font-size: 14px;\n"]);return H=function(){return n},n}function K(){let n=(0,o.Z)(["\n     flex-direction: column;\n    "]);return K=function(){return n},n}function X(){let n=(0,o.Z)(["\n    ","\n  "]);return X=function(){return n},n}function $(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 24px;\n  flex-wrap: wrap;\n\n  ","\n"]);return $=function(){return n},n}function J(){let n=(0,o.Z)(["\n  min-width: 30%;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]);return J=function(){return n},n}function nn(){let n=(0,o.Z)(["\n  color: #222121;\n  font-size: 24px;\n  white-space: nowrap;\n"]);return nn=function(){return n},n}function nt(){let n=(0,o.Z)(["\n  color: #4f4f4f;\n  font-size: 20px;\n"]);return nt=function(){return n},n}function ne(){let n=(0,o.Z)(["\n  height: 2px;\n  background: #c6e1f3;\n"]);return ne=function(){return n},n}function no(){let n=(0,o.Z)(["\n     flex-direction: column;\n    "]);return no=function(){return n},n}function nr(){let n=(0,o.Z)(["\n    ","\n  "]);return nr=function(){return n},n}function ni(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 24px;\n  align-items: center;\n  margin-top: 32px;\n\n  ","\n"]);return ni=function(){return n},n}let nc=u.ZP.form.withConfig({componentId:"sc-b495421c-0"})(j()),nu=u.ZP.div.withConfig({componentId:"sc-b495421c-1"})(k(),n=>{let{theme:t}=n;return(0,u.iv)(C(),t.media.down("md")(y()))}),nl=u.ZP.div.withConfig({componentId:"sc-b495421c-2"})(z(),n=>{let{theme:t}=n;return(0,u.iv)(I(),t.media.down("md")(P()))}),na=u.ZP.div.attrs({className:"infoBlock"}).withConfig({componentId:"sc-b495421c-3"})(D(),n=>{let{theme:t}=n;return(0,u.iv)(T(),t.media.down("md")(S()),t.media.down("sm")(N()))}),ns=u.ZP.div.withConfig({componentId:"sc-b495421c-4"})(q()),nd=u.ZP.div.withConfig({componentId:"sc-b495421c-5"})(E()),nf=u.ZP.p.withConfig({componentId:"sc-b495421c-6"})(_()),np=(0,u.ZP)(b.Z).withConfig({componentId:"sc-b495421c-7"})(R(),n=>{let{theme:t,mobileh:e,error:o}=n;return(0,u.iv)(B(),t.media.down("sm")(O(),null!=e?e:48))}),nh=u.ZP.span.withConfig({componentId:"sc-b495421c-8"})(U()),nm=u.ZP.div.withConfig({componentId:"sc-b495421c-9"})(L(),n=>{let{theme:t}=n;return(0,u.iv)(G(),t.media.down("sm")(F()))}),nx=(0,u.ZP)(Z.Z).withConfig({componentId:"sc-b495421c-10"})(A(),n=>{let{theme:t,mobileh:e,fullWidth:o}=n;return(0,u.iv)(V(),o?"100%":"48%",t.media.down("sm")(M(),null!=e?e:48,e?.4*e:0))}),ng=u.ZP.div.withConfig({componentId:"sc-b495421c-11"})(W(),n=>{let{theme:t}=n;return(0,u.iv)(Q(),t.media.down("sm")(Y()))}),nw=u.ZP.p.withConfig({componentId:"sc-b495421c-12"})(H()),nv=u.ZP.div.withConfig({componentId:"sc-b495421c-13"})($(),n=>{let{theme:t}=n;return(0,u.iv)(X(),t.media.down("sm")(K()))}),nZ=u.ZP.div.withConfig({componentId:"sc-b495421c-14"})(J()),nb=u.ZP.p.withConfig({componentId:"sc-b495421c-15"})(nn()),nj=u.ZP.p.withConfig({componentId:"sc-b495421c-16"})(nt()),ny=u.ZP.div.withConfig({componentId:"sc-b495421c-17"})(ne()),nC=u.ZP.div.withConfig({componentId:"sc-b495421c-18"})(ni(),n=>{let{theme:t}=n;return(0,u.iv)(nr(),t.media.down("sm")(no()))});var nk=e(44643),nP=e(54952),nI=e(81489),nz=e(57441),nS=e(37574),nN=e(57632),nT=e(19218),nD=e(75797),nq=e(27484),nE=e.n(nq),n_=e(30838),nO=e(96894);let nB=n=>{let{schedule:t,maxNumberOfParticipants:e,guideDuration:o}=n,{control:i,formState:{errors:c},setValue:u}=(0,s.Gc)();return(0,r.jsx)(ns,{children:(0,r.jsx)(s.Qr,{name:"date",control:i,render:n=>{var l;let{field:{value:a,onChange:d},fieldState:{error:f}}=n;return(0,r.jsxs)(nd,{children:[(0,r.jsx)(nD.Z,{numOfMonths:2,maxNumberOfParticipants:e,schedule:t,value:a?new Date(a):void 0,onChange:n=>{d(nE()(n).format(nO.K_)),u("time",""),u("duration",null)}}),(0,r.jsxs)(nf,{children:["Выбранная дата: ",(0,r.jsx)("span",{children:a})]}),a?(0,r.jsxs)(nC,{children:[(0,r.jsx)(s.Qr,{name:"time",control:i,render:n=>{var e,o,i,u;let{field:l}=n,s=null===(e=t.find(n=>n.date===a))||void 0===e?void 0:e.timeList.map(n=>({value:n.time,title:n.time}));return(0,r.jsx)(np,{label:"Время",options:s,...l,value:null!==(u=null===(o=l.value)||void 0===o?void 0:o.toString())&&void 0!==u?u:null,error:null===(i=c.time)||void 0===i?void 0:i.message,onChange:n=>{l.onChange(n)},placeholder:"Выберите время",mobileh:68})}}),(0,r.jsx)(s.Qr,{name:"duration",control:i,render:n=>{var t,e;let{field:i}=n,u=n_.fW.filter(n=>+n.value<=o);return(0,r.jsx)(np,{label:"Длительность",options:u,...i,value:(null===(t=i.value)||void 0===t?void 0:t.toString())||null,error:null===(e=c.duration)||void 0===e?void 0:e.message,onChange:n=>{i.onChange(n)},placeholder:"Выберите Длительность",mobileh:68})}})]}):(0,r.jsx)(nh,{children:null===(l=c.date)||void 0===l?void 0:l.message})]})}})})};var nR=e(88620),nU=e(88e3);let nF=n=>{var t,e,o,c,u,l;let{maxNumberOfParticipants:a,withChildren:d,userProfile:f}=n,{register:p,control:h,reset:m,setValue:x,trigger:g,formState:{errors:w}}=(0,s.Gc)();return(0,i.useEffect)(()=>{f&&m(n=>({...n,firstName:f.firstName,lastName:f.lastName,email:f.email,phone:f.phone?f.phone:n.phone}))},[f]),(0,r.jsxs)(ns,{children:[(0,r.jsxs)(nm,{children:[(0,r.jsx)(nx,{label:"Фамилия",...p("lastName"),placeholder:"Введите вашу фамилию",error:null===(t=w.lastName)||void 0===t?void 0:t.message}),(0,r.jsx)(nx,{label:"Имя",...p("firstName"),placeholder:"Введите ваше имя",error:null===(e=w.firstName)||void 0===e?void 0:e.message}),(0,r.jsx)(ng,{children:(0,r.jsx)(s.Qr,{name:"phone",control:h,render:n=>{var t;let{field:e}=n;return(0,r.jsx)(nR.Z,{label:"Номер телефона",placeholder:"Введите ваш номер телефона",onChange:e.onChange,error:null===(t=w.phone)||void 0===t?void 0:t.message,phoneNumber:e.value})}})}),(0,r.jsx)(nx,{label:"Email",...p("email"),placeholder:"Введите ваш email",error:null===(o=w.email)||void 0===o?void 0:o.message}),(0,r.jsx)(nx,{label:"Количество взрослых",...p("adultCount"),placeholder:"Введите количество участников",error:null===(c=w.adultCount)||void 0===c?void 0:c.message,onChange:n=>{let t=Number(n.target.value.replace(/[^0-9]/g,""));x("adultCount",t),g("adultCount")},fullWidth:!d}),d&&(0,r.jsx)(nx,{label:"Количество детей младше 7 лет",...p("childrenCount"),placeholder:"Введите количество детей",error:null===(u=w.childrenCount)||void 0===u?void 0:u.message,onChange:n=>{let t=Number(n.target.value.replace(/[^0-9]/g,""));x("childrenCount",t),g("childrenCount")}})]}),(0,r.jsx)(nw,{children:"Максимум ".concat(a," человек")}),(0,r.jsx)(nU.Z,{label:"Комментарий",...p("bookingComments"),placeholder:"Расскажите о себе",error:null===(l=w.bookingComments)||void 0===l?void 0:l.message})]})};var nG=e(89882);let nL=()=>{let{getValues:n}=(0,s.Gc)(),{date:t,time:e,firstName:o,lastName:i,phone:c,email:u,bookingComments:l,adultCount:a,childrenCount:d,duration:f}=n();return(0,r.jsxs)(ns,{children:[(0,r.jsxs)(nv,{children:[(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Дата"}),(0,r.jsx)(nj,{children:nE()(t).format("DD MMM YYYY")})]}),(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Время"}),(0,r.jsx)(nj,{children:e})]}),(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Длительность"}),(0,r.jsx)(nj,{children:"".concat(f," ").concat(f?(0,nG.$)(f,["час","часа","часов"]):"")})]}),(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Количество взрослых"}),(0,r.jsx)(nj,{children:a})]}),d&&(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Количество детей младше 7 лет"}),(0,r.jsx)(nj,{children:d})]})]}),(0,r.jsx)(ny,{}),(0,r.jsxs)(nv,{children:[(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Имя"}),(0,r.jsxs)(nj,{children:[o," ",i]})]}),c&&(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Телефон"}),(0,r.jsxs)(nj,{children:["+",c]})]}),u&&(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Электронная почта"}),(0,r.jsx)(nj,{children:u})]})]}),(0,r.jsx)(ny,{}),(0,r.jsx)(nv,{children:l&&(0,r.jsxs)(nZ,{children:[(0,r.jsx)(nb,{children:"Комментарий"}),(0,r.jsx)(nj,{style:{whiteSpace:"pre-wrap"},children:l})]})})]})};var nM=e(38445),nV=e(16310);let nA=(n,t)=>nV.Rx().transform((n,t)=>""===t?void 0:n).min(t,"Минимальное количество участников ".concat(t)).max(n,"Максимальное количество участников ".concat(n)).typeError("Только цифры").required("Введите количество участников"),nY=n=>nV.Rx().transform((n,t)=>""===t?void 0:n).typeError("Только цифры").test("total-participants","максимальное количество участников ".concat(n),function(t){let e=this.parent.adultCount||0;return e+(t||0)<=n}),nQ=nV.Ry().shape({date:nV.Z_().required("Выберите дату"),time:nV.Z_().required("Выберите время"),duration:nV.Z_().required("Выберите длительность")}),nW=(n,t)=>nV.Ry().shape({firstName:(0,nM.Fw)("Введите ваше имя"),lastName:(0,nM.Fw)("Введите вашу фамилию"),phone:(0,nM.yV)(10+n),email:nM.Dp,adultCount:nA(t,1),childrenCount:nY(t),bookingComments:nM.K3});var nH=e(43180),nK=e(2982),nX=e(51667),n$=e(45138),nJ=e(60268);let n0=["Выберите дату и время бронирования","Укажите ваши контактные данные","Проверьте бронирование"],n1=n=>{let{guideData:t}=n,e=(0,nz.T)(),o=(0,w.useRouter)(),c=(0,x.v9)(n$.Mg),{currentStep:u,setStep:l}=(0,nJ.g)(3,!(null==c?void 0:c.date),!0),a=(0,nz.C)(g.NI),Z=(0,nz.C)(nK.jn),{queriesString:b}=(0,nX.w)(Z,nX.a.payment),{id:j}=o.query,y=(0,h.Z)("(max-width: ".concat(m.AV.xs,"px)")),C=(0,x.v9)(g.eV),[k,{isLoading:P}]=(0,nH.Kz)(),I=1===u?nQ:nW(C.codeNum.length,t.maxNumberOfParticipants),z=(0,s.cI)({resolver:(0,v.X)(I),mode:"onChange",defaultValues:{...c,guideId:Number(j),idempotenceKey:(0,nN.Z)()}}),{handleSubmit:S,formState:{errors:N},setError:T,trigger:D,getValues:q,watch:E}=z,_=E("duration"),O=async n=>{if(n.success){let{bookingId:t,...r}=n.data;e((0,nS.Ds)({...r}));let i=a?"/profile/booking/guide/".concat(t):"/booking/guide/".concat(j,"/auto-authorized-booking?bookingId=").concat(t);await o.replace(i),await o.push("/booking/guide/".concat(j,"/payment?bookingId=").concat(t,"&").concat(b))}},B=async n=>{try{let t=await k(n).unwrap();await O(t),e((0,n$.pJ)({}))}catch(n){n.data.data.forEach(n=>{T(n.field,n)}),401!==n.status||n.data.isBlocked||e((0,g.$_)(nT.G.LOGIN)),l(2)}},R=async()=>{try{let n=await D();await I.validate(q(),{abortEarly:!1}),n&&(e((0,n$.pJ)(q())),l(u+1))}catch(n){}},U=()=>{l(u-1)},F=(0,i.useMemo)(()=>({upSection:{title:"Стоимость",list:[{listTitle:"За час",price:t.costPerHour||0}]},downSection:_?{title:"Итого",list:[{listTitle:"".concat(_," ").concat((0,nG.$)(_,["час","часа","часов"])),price:_*t.costPerHour}]}:void 0}),[t,_]);return(0,i.useEffect)(()=>{let n=document.querySelector(".infoBlock"),t=document.querySelector(".footerBtns");y&&n&&t&&n.insertBefore(t,n.children[1])},[y]),(0,r.jsxs)(s.RV,{...z,children:[(0,r.jsx)(d.Z,{showSpinner:P}),(0,r.jsxs)(nc,{onSubmit:S(B),children:[(0,r.jsxs)(nu,{children:[(0,r.jsxs)(nl,{children:[(0,r.jsx)(f.k,{title:t.name,subTitle:n0[u-1],currentStep:u,stepsAmount:3}),1===u&&(0,r.jsx)(nB,{schedule:t.schedule,maxNumberOfParticipants:t.maxNumberOfParticipants,guideDuration:t.duration}),2===u&&(0,r.jsx)(nF,{maxNumberOfParticipants:t.maxNumberOfParticipants,withChildren:t.withChildren,userProfile:a}),3===u&&(0,r.jsx)(nL,{})]}),(0,r.jsxs)(na,{children:[(0,r.jsx)(nk.Z,{upSection:F.upSection,downSection:F.downSection}),(0,r.jsx)(nP.Z,{items:[{title:"Политика конфиденциальности",text:nI.uV},{title:"Условия использования данных",text:nI.RS}]})]})]}),(0,r.jsx)(p.Z,{className:"footerBtns step".concat(u),booking:!0,totalSteps:3,currentStep:u,handleNextStep:R,handleBackStep:U})]})]})};function n2(){let n=(0,o.Z)(["\n   \n    "]);return n2=function(){return n},n}function n4(){let n=(0,o.Z)(["\n    ","\n  "]);return n4=function(){return n},n}function n8(){let n=(0,o.Z)(["\n  padding-bottom: 16px;\n  max-width: 1700px;\n\n  ","\n"]);return n8=function(){return n},n}let n9=u.ZP.div.withConfig({componentId:"sc-7207aae9-0"})(n8(),n=>{let{theme:t}=n;return(0,u.iv)(n4(),t.media.down("sm")(n2()))}),n3=n=>{let{data:t,errorData:e}=n;return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"Go2Kavkaz : Бронирование"})}),(0,r.jsx)(n9,{children:(0,r.jsx)(n1,{guideData:t})})]}):(0,r.jsx)(c.Z,{status:null==e?void 0:e.data.status,message:null==e?void 0:e.data.message})};var n5=!0,n7=n3},12918:function(n,t,e){n.exports=e(43499)},57632:function(n,t,e){"use strict";let o;e.d(t,{Z:function(){return a}});let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:r};let c=new Uint8Array(16);function u(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(c)}let l=[];for(let n=0;n<256;++n)l.push((n+256).toString(16).slice(1));var a=function(n,t,e){if(i.randomUUID&&!t&&!n)return i.randomUUID();n=n||{};let o=n.random||(n.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=o[n];return t}return function(n,t=0){return(l[n[t+0]]+l[n[t+1]]+l[n[t+2]]+l[n[t+3]]+"-"+l[n[t+4]]+l[n[t+5]]+"-"+l[n[t+6]]+l[n[t+7]]+"-"+l[n[t+8]]+l[n[t+9]]+"-"+l[n[t+10]]+l[n[t+11]]+l[n[t+12]]+l[n[t+13]]+l[n[t+14]]+l[n[t+15]]).toLowerCase()}(o)}}},function(n){n.O(0,[5797,9774,2888,179],function(){return n(n.s=79557)}),_N_E=n.O()}]);