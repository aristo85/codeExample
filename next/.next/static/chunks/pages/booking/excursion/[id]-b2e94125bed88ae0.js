(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2337],{8126:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking/excursion/[id]",function(){return e(25602)}])},43180:function(n,t,e){"use strict";e.d(t,{ES:function(){return a},Kz:function(){return f},L$:function(){return p},X4:function(){return h},_h:function(){return x},f4:function(){return s},kP:function(){return m},lq:function(){return d},tH:function(){return c},xg:function(){return u}});var i,r,o=e(49305);(i=r||(r={})).NIGHT_RATE="NightRate",i.DAILY_RATE="DailyRate";let l=o.gk.injectEndpoints({endpoints:n=>({calculatePenalty:n.mutation({query:n=>({url:"/booking/".concat(n,"/calculate-penalty"),method:"POST"})}),getDetailBooking:n.query({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t)}},keepUnusedDataFor:0}),cancelBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/cancel"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...i}=n,{dispatch:r,queryFulfilled:o}=t,{data:c}=await o,a=r(l.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await o}catch(n){a.undo()}},invalidatesTags:["bookings","notifications","bookedByID"]}),approveBooking:n.mutation({query:n=>{let{id:t}=n;return{url:"/booking/".concat(t,"/approve"),method:"PUT"}},async onQueryStarted(n,t){let{id:e,...i}=n,{dispatch:r,queryFulfilled:o}=t,{data:c}=await o,a=r(l.util.updateQueryData("getDetailBooking",{id:e},n=>{Object.assign(n,c)}));try{await o}catch(n){a.undo()}},invalidatesTags:["bookings","notifications"]}),bookExcursion:n.mutation({query:n=>({url:"/booking/excursion",method:"POST",body:n}),extraOptions:{name:"bookExcursion"}}),reInitPayment:n.mutation({query:n=>({url:"/booking/".concat(n,"/payment"),method:"PUT"}),extraOptions:{name:"reInitPayment"}}),bookGuide:n.mutation({query:n=>({url:"/booking/guide",method:"POST",body:n}),extraOptions:{name:"bookGuide"}}),getBookingInfoById:n.query({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/info/").concat(e),method:"GET"}},extraOptions:{name:"bookingInfo"}}),cancelBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/cancel/").concat(e),method:"PUT"}},extraOptions:{name:"cancelBookingWithToken"}}),approveBookingWithToken:n.mutation({query:n=>{let{bookingId:t,token:e}=n;return{url:"/booking/".concat(t,"/approve/").concat(e),method:"PUT"}},extraOptions:{name:"approveBookingWithToken"}})}),overrideExisting:!0}),{useGetDetailBookingQuery:c,useApproveBookingMutation:a,useCancelBookingMutation:u,useCalculatePenaltyMutation:s,useBookExcursionMutation:d,useBookGuideMutation:f,useReInitPaymentMutation:p,useGetBookingInfoByIdQuery:h,useCancelBookingWithTokenMutation:m,useApproveBookingWithTokenMutation:x}=l,{endpoints:{getDetailBooking:g}}=l},81489:function(n,t,e){"use strict";e.d(t,{RS:function(){return l},gD:function(){return c},uV:function(){return o}});var i=e(27484),r=e.n(i);let o="Оформляя заказ, вы соглашаетесь с нашей политикой конфиденциальности. Мы защищаем ваши данные и используем их только для обработки заказа и обеспечения качественного обслуживания. Мы не передаем вашу информацию третьим лицам без вашего согласия. Если у вас есть вопросы, свяжитесь с нами.",l="Соглашаясь с условиями использования данных, вы разрешаете нам использовать их в соответствии с нашей политикой конфиденциальности. Мы не передаем данные третьим лицам без вашего согласия, кроме случаев, когда это необходимо для выполнения наших обязательств или по закону. Если у вас есть вопросы, свяжитесь с нами.",c=n=>{let t=r()(null==n?void 0:n.freeCancellationDeadlineLocal).format("DD.MM.YYYY HH:mm"),e="В случае отмены бронирования";return(null==n?void 0:n.freeCancellationPossible)?(null==n?void 0:n.freeCancellationDeadlineLocal)?"".concat(e," до ").concat(t," (по местному времени отеля) вам возвращается вся оплаченная сумма. При отмене после ").concat(t,"\n      с вас будет удержан штраф в размере ").concat(n.penaltyAmount," ₽."):"".concat(e,"  вам возвращается оплаченная сумма."):"".concat(e," вам возвращается оплаченная сумма с удержанием штрафа в размере ").concat(null==n?void 0:n.penaltyAmount," ₽.")}},54952:function(n,t,e){"use strict";e.d(t,{Z:function(){return v}});var i=e(85893);e(67294);var r=e(7297),o=e(186),l=e(96910);function c(){let n=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  gap: 24px;\n  border-radius: 32px;\n  ",";\n"]);return c=function(){return n},n}function a(){let n=(0,r.Z)(["\n  display: grid;\n  grid-template-columns: 5% 95%;\n  grid-column-gap: 15px;\n  grid-row-gap: 4px;\n  grid-row: 2;\n"]);return a=function(){return n},n}function u(){let n=(0,r.Z)(["\n  align-self: center;\n"]);return u=function(){return n},n}function s(){let n=(0,r.Z)(["\n  white-space: nowrap;\n  grid-column: 2;\n  ",";\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  grid-column: 2;\n  ",";\n"]);return d=function(){return n},n}let f=o.ZP.div.withConfig({componentId:"sc-c99a7ba-0"})(c(),n=>{let{theme:t}=n;return"\n    border: 2px solid ".concat(t.colors.secondary,";\n  ")}),p=o.ZP.div.withConfig({componentId:"sc-c99a7ba-1"})(a()),h=(0,o.ZP)(l.Z).withConfig({componentId:"sc-c99a7ba-2"})(u()),m=o.ZP.h3.withConfig({componentId:"sc-c99a7ba-3"})(s(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=o.ZP.h4.withConfig({componentId:"sc-c99a7ba-4"})(d(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.secondary,";\n    font-size: ").concat(t.font.size.body3,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),g=n=>{let{items:t}=n;return(0,i.jsx)(f,{children:t.map((n,t)=>(0,i.jsxs)(p,{children:[n.icon?n.icon:(0,i.jsx)(h,{}),(0,i.jsx)(m,{children:n.title}),(0,i.jsx)(x,{children:n.text})]},t))})};var v=g},22865:function(n,t,e){"use strict";var i=e(85893);e(67294);var r=e(12918),o=e.n(r);let l=n=>{let{status:t,message:e}=n,r=(null==t?void 0:t.toString().startsWith("5"))?"Сервис недоступен":e;return(0,i.jsx)(o(),{title:r,statusCode:null!=t?t:500})};t.Z=l},44643:function(n,t,e){"use strict";e.d(t,{Z:function(){return w}});var i=e(85893);e(67294);var r=e(7297),o=e(186);function l(){let n=(0,r.Z)(["\n  ",";\n"]);return l=function(){return n},n}function c(){let n=(0,r.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  gap: 10px;\n  flex-wrap: wrap;\n"]);return c=function(){return n},n}function a(){let n=(0,r.Z)(["\n  ",";\n"]);return a=function(){return n},n}function u(){let n=(0,r.Z)(["\n  ",";\n"]);return u=function(){return n},n}function s(){let n=(0,r.Z)(["\n  width: 100%;\n  height: 1px;\n  background: #8daec1;\n"]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  display: flex;\n  padding: 24px;\n  border-radius: 32px;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n  background: #c6e1f3;\n  height: auto;\n"]);return d=function(){return n},n}let f=o.ZP.h3.withConfig({componentId:"sc-5c378-0"})(l(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),p=o.ZP.div.withConfig({componentId:"sc-5c378-1"})(c()),h=o.ZP.h4.withConfig({componentId:"sc-5c378-2"})(a(),n=>{let{theme:t}=n;return"\n    color: #4F4F4F;\n    font-size: ".concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),m=o.ZP.h4.withConfig({componentId:"sc-5c378-3"})(u(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=o.ZP.span.withConfig({componentId:"sc-5c378-4"})(s()),g=o.ZP.div.withConfig({componentId:"sc-5c378-5"})(d()),v=n=>{let{upSection:t,downSection:e}=n,r=null==e?void 0:e.list.reduce((n,t)=>n+(null==t?void 0:t.price),0);return(0,i.jsxs)(g,{children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f,{children:"Стоимость"}),t.list.map(n=>(0,i.jsxs)(p,{children:[(0,i.jsxs)(h,{children:[n.listTitle,":"]}),(0,i.jsxs)(m,{children:[n.price," ₽"]})]},n.listTitle))]}),(0,i.jsx)(x,{}),e&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p,{children:[(0,i.jsx)(f,{children:"Итого"}),(0,i.jsxs)(f,{children:[r," ₽"]})]}),null==e?void 0:e.list.map(n=>(0,i.jsxs)(p,{children:[(0,i.jsxs)(h,{children:[n.listTitle,":"]}),(0,i.jsxs)(m,{children:[n.price," ₽"]})]},n.listTitle))]})]})};var w=v},32762:function(n,t,e){"use strict";e.d(t,{Z:function(){return w}});var i=e(85893);e(67294);var r=e(7297),o=e(186),l=e(42143);function c(){let n=(0,r.Z)(["\n        margin: 0 ",";\n      "]);return c=function(){return n},n}function a(){let n=(0,r.Z)(["\n      position: fixed;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      margin: 0 auto;\n      max-width: 1180px;\n      padding: 32px;\n      z-index: 1001;\n\n      ","\n    "]);return a=function(){return n},n}function u(){let n=(0,r.Z)(["\n    margin: 0 ",";\n    border:none;\n    padding: 16px 0 16px 0;\n    \n    &.step3 {\n      flex-direction: column;\n    }\n    "]);return u=function(){return n},n}function s(){let n=(0,r.Z)(["\n    ","\n  "]);return s=function(){return n},n}function d(){let n=(0,r.Z)(["\n  border-top: 2px solid #1d7abd;\n  padding-top: 32px;\n  background: #fff;\n  display: flex;\n  direction: rtl;\n  gap: 16px;\n  max-width: 1440px;\n\n  ","\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,r.Z)(["\n      width: 100%;\n      font-size: 20px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    "]);return f=function(){return n},n}function p(){let n=(0,r.Z)(["\n        min-width: auto;\n        padding: 8px;\n        font-size: 16px;\n    "]);return p=function(){return n},n}function h(){let n=(0,r.Z)(["\n    display: ",";\n    ","\n    ","\n  "]);return h=function(){return n},n}function m(){let n=(0,r.Z)(["\n  width: 256px;\n  min-width: fit-content;\n\n  ","\n"]);return m=function(){return n},n}let x=o.ZP.div.withConfig({componentId:"sc-e6ade91f-0"})(d(),n=>{let{sticky:t,theme:e}=n;return t&&(0,o.iv)(a(),e.media.down("md")(c(),e.layouts.paddingMd))},n=>{let{theme:t,sticky:e}=n;return(0,o.iv)(s(),t.media.down("sm")(u(),t.layouts.paddingSm))}),g=(0,o.ZP)(l.Z).withConfig({componentId:"sc-e6ade91f-1"})(m(),n=>{let{theme:t,hidden:e}=n;return(0,o.iv)(h(),e?"none":"unset",t.media.down("sm")(f()),t.media.down("xxs")(p()))}),v=n=>{let{totalSteps:t,currentStep:e,handleNextStep:r,handleBackStep:o,sticky:l,booking:c,className:a}=n,u=e===t;return(0,i.jsxs)(x,{sticky:l,className:a,children:[(0,i.jsx)(g,{hidden:!u,dark:!0,type:"submit",children:c?"Подтвердить бронирование":"Далее"}),(0,i.jsx)(g,{hidden:u,dark:!0,type:"button",onClick:r,children:"Далее"}),e>1&&(0,i.jsx)(g,{type:"button",onClick:o,children:"Назад"})]})};var w=v},96910:function(n,t,e){"use strict";var i=e(85893);e(67294);let r=n=>(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",...n,children:(0,i.jsx)("path",{stroke:"#8DAEC1",strokeLinecap:"round",strokeWidth:2,d:"m11 1-5.43 9.05a1 1 0 0 1-1.457.285L1 8"})});t.Z=r},88e3:function(n,t,e){"use strict";e.d(t,{Z:function(){return I}});var i=e(85893),r=e(67294),o=e(7297),l=e(186);function c(){let n=(0,o.Z)(["\n  position: relative;\n  display: block;\n  width: 100%;\n  padding-bottom: 17px;\n"]);return c=function(){return n},n}function a(){let n=(0,o.Z)(["\n    font-size: ",";\n    color: ",";\n  "]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n  display: block;\n  margin-bottom: 8px;\n  line-height: 23px;\n  ","\n"]);return u=function(){return n},n}function s(){let n=(0,o.Z)(["\n      &::after {\n        transform: scaleX(1);\n      }\n    "]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  border-bottom: 1px solid ",";\n  overflow: hidden;\n  transition: ",";\n  height: 88px;\n  background: #ffffff !important;\n  border: 3px solid\n    ",";\n  border-radius: 16px;\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 2px;\n    transform: scaleX(0);\n    transition: ",";\n  }\n\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,o.Z)(["\n      margin-left: 17px;\n    "]);return f=function(){return n},n}function p(){let n=(0,o.Z)(["\n      margin-left: 8px;\n    "]);return p=function(){return n},n}function h(){let n=(0,o.Z)(["\n      cursor: pointer;\n    "]);return h=function(){return n},n}function m(){let n=(0,o.Z)(["\n  display: flex;\n\n  ","\n\n  ","\n\n  ","\n"]);return m=function(){return n},n}function x(){let n=(0,o.Z)(["\n  width: 100%;\n  height: 100%;\n  border: none;\n  outline: none;\n  font-size: ",";\n  font-weight: ",";\n  padding: 6px 16px;\n  resize: none;\n  &::-ms-reveal,\n  &::-ms-clear {\n    display: none;\n  }\n\n  &:disabled {\n    background-color: ",";\n    color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"]);return x=function(){return n},n}function g(){let n=(0,o.Z)(["\n  position: absolute;\n  left: 0;\n  color: red;\n  font-size: 14px;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return g=function(){return n},n}let v=l.ZP.label.withConfig({componentId:"sc-9639c41f-0"})(c()),w=l.ZP.label.withConfig({componentId:"sc-9639c41f-1"})(u(),n=>{let{theme:t}=n;return(0,l.iv)(a(),t.font.size.subtitle2,t.colors.default)}),Z=l.ZP.div.withConfig({componentId:"sc-9639c41f-2"})(d(),n=>{let{theme:t,isError:e}=n;return e?"red":"grey"},n=>n.theme.transition.fast,n=>{let{theme:t,isError:e,isFilled:i}=n;return i&&!e?t.colors.primary:e?"red":t.colors.secondary},n=>n.theme.transition.fast,n=>n.isFocused&&(0,l.iv)(s())),b=l.ZP.div.withConfig({componentId:"sc-9639c41f-3"})(m(),n=>"left"===n.position&&(0,l.iv)(f()),n=>"right"===n.position&&(0,l.iv)(p()),n=>n.isPassword&&(0,l.iv)(h())),y=l.ZP.textarea.withConfig({componentId:"sc-9639c41f-4"})(x(),n=>n.theme.font.size.body2,n=>n.theme.font.weight.semiBold,n=>n.theme.colors.lightDefault,n=>n.theme.colors.default,n=>n.theme.colors.secondary),j=l.ZP.span.withConfig({componentId:"sc-9639c41f-5"})(g());var C=e(62405);let k=(0,r.forwardRef)((n,t)=>{let{name:e,label:o,placeholder:l,startAdornment:c,endAdornment:a,className:u,style:s,disabled:d=!1,error:f,onFocus:p,onBlur:h,...m}=n,[x,g]=(0,C.k)(),[k,I]=(0,r.useState)(!1),[P,S]=(0,r.useState)(!1),D=(0,r.useCallback)(n=>{p&&p(n),g.on()},[p,g.on]),N=(0,r.useCallback)(n=>{h&&h(n),g.off(),S(!0)},[h,g.off]);return(0,i.jsxs)(v,{className:u,style:s,children:[!!o&&(0,i.jsx)(w,{children:o}),(0,i.jsxs)(Z,{className:"textarea",isError:!!f,isFocused:x,isFilled:P,children:[c&&(0,i.jsx)(b,{position:"left",children:c}),(0,i.jsx)(y,{placeholder:l,name:e,disabled:d,ref:t,onFocus:D,onBlur:N,...m}),a&&(0,i.jsx)(b,{position:"right",children:a})]}),!!f&&(0,i.jsx)(j,{children:f})]})});k.displayName="TextareaStyled";var I=k},60268:function(n,t,e){"use strict";e.d(t,{g:function(){return o}});var i=e(67294),r=e(11163);let o=(n,t,e)=>{let o=(0,r.useRouter)(),[l,c]=(0,i.useState)(1),a=t=>{let e=o.query.id,i=e?o.pathname.replace("[id]","".concat(e)):o.pathname;t<=n&&o.push("".concat(i,"?step=").concat(t),void 0,{shallow:!0})};return(0,i.useEffect)(()=>{o.query.step&&c(Number(o.query.step))},[o.query.step]),(0,i.useEffect)(()=>{var n;let i=null!==(n=o.query.step)&&void 0!==n?n:1;if(t&&+i>1&&e){let n=o.pathname.includes("[id]")?o.asPath.split("?step")[0]:o.pathname;o.push("".concat(n,"?step=1"))}},[t,o,e]),{currentStep:l,setStep:a}}},12439:function(n,t,e){"use strict";var i,r,o,l;e.d(t,{o:function(){return r},p:function(){return i}}),(o=i||(i={})).ACTIVE="ACTIVE",o.DISABLED="DISABLED",o.CHECK="CHECK",(l=r||(r={})).GROUP="GROUP",l.INDIVIDUAL="INDIVIDUAL"},25602:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSP:function(){return tu},default:function(){return ts}});var i=e(7297),r=e(85893),o=e(67294),l=e(22865),c=e(87536),a=e(65959),u=e(13435),s=e(32762),d=e(40152),f=e(80514),p=e(41248),h=e(68270),m=e(11163),x=e(47533),g=e(38445),v=e(16310);let w=(n,t)=>v.Rx().transform((n,t)=>""===t?void 0:n).min(t,"Минимальное количество участников ".concat(t)).max(n,"Максимальное количество участников ".concat(n)).typeError("Только цифры").required("Введите количество участников"),Z=n=>v.Rx().transform((n,t)=>""===t?void 0:n).typeError("Только цифры").test("total-participants","максимальное количество участников ".concat(n),function(t){let e=this.parent.adultCount||0;return e+(t||0)<=n}),b=v.Ry().shape({date:v.Z_().required("Выберите дату"),time:v.Z_().required("Выберите время")}),y=(n,t)=>v.Ry().shape({firstName:(0,g.Fw)("Введите ваше имя"),lastName:(0,g.Fw)("Введите вашу фамилию"),phone:(0,g.yV)(10+n),email:g.Dp,adultCount:w(t,1),childrenCount:Z(t),bookingComments:g.K3});var j=e(75797),C=e(27484),k=e.n(C),I=e(24062),P=e(8825),S=e(186);function D(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n"]);return D=function(){return n},n}function N(){let n=(0,i.Z)(["\n      flex-direction: column;\n      gap: 24px;\n  "]);return N=function(){return n},n}function T(){let n=(0,i.Z)(["\n    ","\n  "]);return T=function(){return n},n}function R(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 52px;\n\n  ","\n"]);return R=function(){return n},n}function E(){let n=(0,i.Z)(["\n      gap: 0px;\n  "]);return E=function(){return n},n}function z(){let n=(0,i.Z)(["\n    ","\n  "]);return z=function(){return n},n}function q(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 32px;\n  flex-direction: column;\n  width: 100%;\n\n  ","\n"]);return q=function(){return n},n}function A(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: 32px;\n  margin-top: 32px;\n"]);return A=function(){return n},n}function B(){let n=(0,i.Z)(["\n      max-width: 100%;\n      flex-direction: row;\n      width: 100%;\n      gap: 24px;\n    "]);return B=function(){return n},n}function O(){let n=(0,i.Z)(["\n      flex-direction: column;\n      gap: 24px;\n    "]);return O=function(){return n},n}function U(){let n=(0,i.Z)(["\n    width: min-content;\n    max-width: 328px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n\n    ","\n\n    ","\n  "]);return U=function(){return n},n}function L(){let n=(0,i.Z)(["\n  ","\n"]);return L=function(){return n},n}function V(){let n=(0,i.Z)(["\n  color: #222121;\n  font-size: 16px;\n  line-height: 22px;\n  span {\n    color: #27ae60;\n  }\n"]);return V=function(){return n},n}function _(){let n=(0,i.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0px;\n  align-items: start;\n"]);return _=function(){return n},n}function G(){let n=(0,i.Z)(["\n     .selector {\n      height: ","px;\n      padding-right: 20px;\n    }\n    "]);return G=function(){return n},n}function F(){let n=(0,i.Z)(["\n    ","\n  "]);return F=function(){return n},n}function M(){let n=(0,i.Z)(["\n  width: 288px;\n  .optionsMenu {\n    overflow: inherit;\n  }\n\n  ","\n"]);return M=function(){return n},n}function W(){let n=(0,i.Z)(["\n     flex-direction: column;\n    "]);return W=function(){return n},n}function $(){let n=(0,i.Z)(["\n    ","\n  "]);return $=function(){return n},n}function Y(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 24px;\n  flex-wrap: wrap;\n  align-items: center;\n  position: relative;\n\n  ","\n"]);return Y=function(){return n},n}function K(){let n=(0,i.Z)(["\n      > div.inputwrapper {\n      height: ","px;\n    }\n    input {\n      margin-top: -","px;\n    }\n     input::placeholder {\n      white-space: normal;\n    }\n    "]);return K=function(){return n},n}function Q(){let n=(0,i.Z)(["\n    ","\n  "]);return Q=function(){return n},n}function H(){let n=(0,i.Z)(["\n  flex-basis: ",";\n  ","\n"]);return H=function(){return n},n}function X(){let n=(0,i.Z)(["\n    width: 100%;\n    "]);return X=function(){return n},n}function J(){let n=(0,i.Z)(["\n    ","\n  "]);return J=function(){return n},n}function nn(){let n=(0,i.Z)(["\n  flex-basis: 48%;\n\n  ","\n"]);return nn=function(){return n},n}function nt(){let n=(0,i.Z)(["\n     flex-direction: column;\n    "]);return nt=function(){return n},n}function ne(){let n=(0,i.Z)(["\n    ","\n  "]);return ne=function(){return n},n}function ni(){let n=(0,i.Z)(["\n  display: flex;\n  gap: 24px;\n  flex-wrap: wrap;\n\n  ","\n"]);return ni=function(){return n},n}function nr(){let n=(0,i.Z)(["\n  min-width: 30%;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]);return nr=function(){return n},n}function no(){let n=(0,i.Z)(["\n  color: #222121;\n  font-size: 24px;\n  white-space: nowrap;\n"]);return no=function(){return n},n}function nl(){let n=(0,i.Z)(["\n  color: #4f4f4f;\n  font-size: 20px;\n"]);return nl=function(){return n},n}function nc(){let n=(0,i.Z)(["\n  height: 2px;\n  background: #c6e1f3;\n"]);return nc=function(){return n},n}function na(){let n=(0,i.Z)(["\n  color: red;\n  font-size: 14px;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return na=function(){return n},n}function nu(){let n=(0,i.Z)(["\n  margin-top: -32px;\n  color: #8daec1;\n  font-size: 14px;\n"]);return nu=function(){return n},n}let ns=S.ZP.form.withConfig({componentId:"sc-2ffe6967-0"})(D()),nd=S.ZP.div.withConfig({componentId:"sc-2ffe6967-1"})(R(),n=>{let{theme:t}=n;return(0,S.iv)(T(),t.media.down("md")(N()))}),nf=S.ZP.div.withConfig({componentId:"sc-2ffe6967-2"})(q(),n=>{let{theme:t}=n;return(0,S.iv)(z(),t.media.down("md")(E()))}),np=S.ZP.div.withConfig({componentId:"sc-2ffe6967-3"})(A()),nh=S.ZP.div.attrs({className:"infoBlock"}).withConfig({componentId:"sc-2ffe6967-4"})(L(),n=>{let{theme:t}=n;return(0,S.iv)(U(),t.media.down("md")(B()),t.media.down("sm")(O()))}),nm=S.ZP.p.withConfig({componentId:"sc-2ffe6967-5"})(V()),nx=S.ZP.div.withConfig({componentId:"sc-2ffe6967-6"})(_()),ng=(0,S.ZP)(P.Z).withConfig({componentId:"sc-2ffe6967-7"})(M(),n=>{let{theme:t,mobileh:e,error:i}=n;return(0,S.iv)(F(),t.media.down("sm")(G(),null!=e?e:48))}),nv=S.ZP.div.withConfig({componentId:"sc-2ffe6967-8"})(Y(),n=>{let{theme:t}=n;return(0,S.iv)($(),t.media.down("sm")(W()))}),nw=(0,S.ZP)(I.Z).withConfig({componentId:"sc-2ffe6967-9"})(H(),n=>{let{fullWidth:t}=n;return t?"100%":"48%"},n=>{let{theme:t,mobileh:e}=n;return(0,S.iv)(Q(),t.media.down("sm")(K(),null!=e?e:48,e?.4*e:0))}),nZ=S.ZP.div.withConfig({componentId:"sc-2ffe6967-10"})(nn(),n=>{let{theme:t}=n;return(0,S.iv)(J(),t.media.down("sm")(X()))}),nb=S.ZP.div.withConfig({componentId:"sc-2ffe6967-11"})(ni(),n=>{let{theme:t}=n;return(0,S.iv)(ne(),t.media.down("sm")(nt()))}),ny=S.ZP.div.withConfig({componentId:"sc-2ffe6967-12"})(nr()),nj=S.ZP.p.withConfig({componentId:"sc-2ffe6967-13"})(no()),nC=S.ZP.p.withConfig({componentId:"sc-2ffe6967-14"})(nl());S.ZP.div.withConfig({componentId:"sc-2ffe6967-15"})(nc());let nk=S.ZP.span.withConfig({componentId:"sc-2ffe6967-16"})(na()),nI=S.ZP.p.withConfig({componentId:"sc-2ffe6967-17"})(nu());var nP=e(13556),nS=e(96894);let nD=n=>{let{schedule:t,maxNumberOfParticipants:e,isGroupType:i}=n,{control:l,formState:{errors:a},setValue:u}=(0,c.Gc)(),s=(0,d.Z)("(max-width: ".concat(f.AV.smTab,"px)")),p=(0,m.useRouter)();return(0,o.useEffect)(()=>{p.query.selectedDate&&u("date",p.query.selectedDate)},[]),(0,r.jsx)(nP.V8,{children:(0,r.jsx)(c.Qr,{name:"date",control:l,render:n=>{var o;let{field:{value:d,onChange:f},fieldState:{error:p}}=n;return(0,r.jsxs)(nx,{children:[(0,r.jsx)(j.Z,{numOfMonths:s?1:2,maxNumberOfParticipants:e,schedule:t,isGroupType:i,value:d?new Date(d):void 0,onChange:n=>{f(k()(n).format(nS.K_)),u("time","")}}),(0,r.jsxs)(nm,{children:["Выбранная дата: ",(0,r.jsx)("span",{children:d})]}),d?(0,r.jsx)(c.Qr,{name:"time",control:l,render:n=>{var e,i;let{field:o}=n,l=null===(e=t.find(n=>n.date===d))||void 0===e?void 0:e.timeList.map(n=>({value:n.time,title:n.time}));return(0,r.jsx)(ng,{label:"Время",options:l,style:{marginTop:"32px"},...o,value:"".concat(o.value),error:null===(i=a.time)||void 0===i?void 0:i.message,onChange:n=>{o.onChange(n)},placeholder:"Выберите время",mobileh:68})}}):(0,r.jsx)(nk,{children:null===(o=a.date)||void 0===o?void 0:o.message})]})}})})};var nN=e(88620),nT=e(88e3);let nR=n=>{var t,e,i,l,a,u,s,d;let{withChildren:f,schedule:p,maxNumberOfParticipants:h,isGroupType:m,userProfile:x}=n,{register:g,control:v,reset:w,setValue:Z,trigger:b,formState:{errors:y},getValues:j}=(0,c.Gc)(),{date:C,time:k}=j(),I=m?null===(t=null===(e=p.find(n=>n.date===C))||void 0===e?void 0:e.timeList.find(n=>n.time===k))||void 0===t?void 0:t.numberOfFreeCount:h;return(0,o.useEffect)(()=>{x&&w(n=>({...n,firstName:x.firstName,lastName:x.lastName,email:x.email,phone:x.phone?x.phone:n.phone}))},[x]),(0,r.jsxs)(np,{children:[(0,r.jsxs)(nv,{children:[(0,r.jsx)(nw,{label:"Фамилия",...g("lastName"),placeholder:"Введите вашу фамилию",error:null===(i=y.lastName)||void 0===i?void 0:i.message}),(0,r.jsx)(nw,{label:"Имя",...g("firstName"),placeholder:"Введите ваше имя",error:null===(l=y.firstName)||void 0===l?void 0:l.message}),(0,r.jsx)(nZ,{children:(0,r.jsx)(c.Qr,{name:"phone",control:v,render:n=>{var t;let{field:e}=n;return(0,r.jsx)(nN.Z,{label:"Номер телефона",placeholder:"Введите ваш номер телефона",onChange:e.onChange,error:null===(t=y.phone)||void 0===t?void 0:t.message,phoneNumber:e.value})}})}),(0,r.jsx)(nw,{label:"Email",...g("email"),placeholder:"Введите ваш email",error:null===(a=y.email)||void 0===a?void 0:a.message}),(0,r.jsx)(nw,{label:"Количество взрослых",...g("adultCount"),placeholder:"Введите количество участников",error:null===(u=y.adultCount)||void 0===u?void 0:u.message,onChange:n=>{let t=Number(n.target.value.replace(/[^0-9]/g,""));Z("adultCount",t),b(["adultCount","childrenCount"])},fullWidth:!f}),f&&(0,r.jsx)(nw,{label:"Количество детей младше 7 лет",...g("childrenCount"),placeholder:"Введите количество детей",error:null===(s=y.childrenCount)||void 0===s?void 0:s.message,onChange:n=>{let t=Number(n.target.value.replace(/[^0-9]/g,""));Z("childrenCount",t),b(["childrenCount","adultCount"])}})]}),(0,r.jsx)(nI,{children:"Максимум ".concat(I," человек")}),(0,r.jsx)(nT.Z,{label:"Комментарий",...g("bookingComments"),placeholder:"Расскажите о себе",error:null===(d=y.bookingComments)||void 0===d?void 0:d.message})]})};var nE=e(89882),nz=e(63366),nq=e(87462),nA=e(86010),nB=e(94780),nO=e(41796),nU=e(11496),nL=e(71657),nV=e(1588),n_=e(34867);function nG(n){return(0,n_.Z)("MuiDivider",n)}(0,nV.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);let nF=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],nM=n=>{let{absolute:t,children:e,classes:i,flexItem:r,light:o,orientation:l,textAlign:c,variant:a}=n;return(0,nB.Z)({root:["root",t&&"absolute",a,o&&"light","vertical"===l&&"vertical",r&&"flexItem",e&&"withChildren",e&&"vertical"===l&&"withChildrenVertical","right"===c&&"vertical"!==l&&"textAlignRight","left"===c&&"vertical"!==l&&"textAlignLeft"],wrapper:["wrapper","vertical"===l&&"wrapperVertical"]},nG,i)},nW=(0,nU.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,t)=>{let{ownerState:e}=n;return[t.root,e.absolute&&t.absolute,t[e.variant],e.light&&t.light,"vertical"===e.orientation&&t.vertical,e.flexItem&&t.flexItem,e.children&&t.withChildren,e.children&&"vertical"===e.orientation&&t.withChildrenVertical,"right"===e.textAlign&&"vertical"!==e.orientation&&t.textAlignRight,"left"===e.textAlign&&"vertical"!==e.orientation&&t.textAlignLeft]}})(({theme:n,ownerState:t})=>(0,nq.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:(0,nO.Fq)(n.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:n.spacing(2),marginRight:n.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:n.spacing(1),marginBottom:n.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:n})=>(0,nq.Z)({},n.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:n,ownerState:t})=>(0,nq.Z)({},t.children&&"vertical"!==t.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`}}),({theme:n,ownerState:t})=>(0,nq.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`}}),({ownerState:n})=>(0,nq.Z)({},"right"===n.textAlign&&"vertical"!==n.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===n.textAlign&&"vertical"!==n.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),n$=(0,nU.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,t)=>{let{ownerState:e}=n;return[t.wrapper,"vertical"===e.orientation&&t.wrapperVertical]}})(({theme:n,ownerState:t})=>(0,nq.Z)({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`})),nY=o.forwardRef(function(n,t){let e=(0,nL.Z)({props:n,name:"MuiDivider"}),{absolute:i=!1,children:o,className:l,component:c=o?"div":"hr",flexItem:a=!1,light:u=!1,orientation:s="horizontal",role:d="hr"!==c?"separator":void 0,textAlign:f="center",variant:p="fullWidth"}=e,h=(0,nz.Z)(e,nF),m=(0,nq.Z)({},e,{absolute:i,component:c,flexItem:a,light:u,orientation:s,role:d,textAlign:f,variant:p}),x=nM(m);return(0,r.jsx)(nW,(0,nq.Z)({as:c,className:(0,nA.Z)(x.root,l),role:d,ref:t,ownerState:m},h,{children:o?(0,r.jsx)(n$,{className:x.wrapper,ownerState:m,children:o}):null}))}),nK=n=>{let{duration:t}=n,{register:e,control:i,getFieldState:o,getValues:l}=(0,c.Gc)(),{date:a,time:u,firstName:s,lastName:d,phone:f,email:p,bookingComments:h,adultCount:m,childrenCount:x}=l();return(0,r.jsxs)(np,{children:[(0,r.jsxs)(nb,{children:[(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Дата"}),(0,r.jsx)(nC,{children:k()(a).format("DD MMM YYYY")})]}),(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Время"}),(0,r.jsx)(nC,{children:u})]}),(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Длительность"}),(0,r.jsxs)(nC,{children:[t," ",(0,nE.$)(t,["час","часа","часов"])]})]}),(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Количество взрослых"}),(0,r.jsx)(nC,{children:m})]}),x&&(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Количество детей младше 7 лет"}),(0,r.jsx)(nC,{children:x})]})]}),(0,r.jsx)(nY,{}),(0,r.jsxs)(nb,{children:[(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Имя"}),(0,r.jsxs)(nC,{children:[s," ",d]})]}),f&&(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Телефон"}),(0,r.jsxs)(nC,{children:["+",f]})]}),p&&(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Электронная почта"}),(0,r.jsx)(nC,{children:p})]})]}),(0,r.jsx)(nY,{}),(0,r.jsx)(nb,{children:h&&(0,r.jsxs)(ny,{children:[(0,r.jsx)(nj,{children:"Комментарий"}),(0,r.jsx)(nC,{style:{whiteSpace:"pre-wrap"},children:h})]})})]})};var nQ=e(44643),nH=e(54952),nX=e(81489),nJ=e(43180),n0=e(57441),n1=e(37574),n2=e(57632),n6=e(19218),n9=e(81985),n4=e(12439),n8=e(30838),n3=e(26239),n7=e(60268),n5=e(83344);let tn=["Выберите дату и время экскурсии","Укажите ваши контактные данные","Проверьте бронирование"],tt=n=>{let{excursionData:t}=n,{maxNumberOfParticipants:e,adultPrice:i,withChildren:l,childrenPrice:g,name:v,schedule:w,duration:Z,type:j}=t,C=(0,n0.T)(),k=(0,m.useRouter)(),I=(0,p.v9)(n5.pz),{currentStep:P,setStep:S}=(0,n7.g)(3,!(null==I?void 0:I.date),!0),D=(0,n0.C)(n9.tE),{queriesString:N}=(0,n3.k)(D,n3.y.payment),{id:T}=k.query,R=(0,d.Z)("(max-width: ".concat(f.AV.xs,"px)")),E=(0,n0.C)(h.NI),z=(0,p.v9)(h.eV),[q,{isLoading:A}]=(0,nJ.lq)(),B=1===P?b:y(z.codeNum.length,e),O=(0,c.cI)({resolver:(0,x.X)(B),mode:"onChange",defaultValues:{...I,excursionId:Number(T),idempotenceKey:(0,n2.Z)()}}),{handleSubmit:U,formState:{errors:L},setError:V,trigger:_,getValues:G,watch:F}=O,M=F("adultCount"),W=F("childrenCount"),$=async n=>{if(n.success){let{bookingId:t,...e}=n.data;C((0,n1.Ds)({...e}));let i=E?"/profile/booking/excursion/".concat(t):"/booking/excursion/".concat(T,"/auto-authorized-booking?bookingId=").concat(t);await k.replace(i),await k.push("/booking/excursion/".concat(T,"/payment?bookingId=").concat(t,"&").concat(N))}},Y=async n=>{try{let t=await q(n).unwrap();await $(t),C((0,n5.Jd)({}))}catch(n){n.data.data.forEach(n=>{V(n.field,n)}),401!==n.status||n.data.isBlocked||C((0,h.$_)(n6.G.LOGIN)),S(2)}},K=async()=>{try{let n=await _();await B.validate(G(),{abortEarly:!1}),n&&(C((0,n5.Jd)(G())),S(P+1))}catch(n){}},Q=()=>{S(P-1)},H=(0,o.useMemo)(()=>({upSection:{title:"Стоимость",list:[{listTitle:j===n4.o.INDIVIDUAL?"За экскурсию":"Взрослый",price:i||0},...l&&j===n4.o.GROUP?[{listTitle:"Ребенок младше 7л.",price:g||0}]:[]]},downSection:(M||W)&&j===n4.o.GROUP?{...M||W?{title:"Итого",list:[...M?[{listTitle:"".concat(M,"х Взрослый"),price:i*M}]:[],...W&&g&&l?[{listTitle:"".concat(W,"х Ребенок младше 7л."),price:g*W}]:[]]}:{}}:void 0}),[t,M,W]);return(0,o.useEffect)(()=>{let n=document.querySelector(".infoBlock"),t=document.querySelector(".footerBtns");R&&n&&t&&n.insertBefore(t,n.children[1])},[R]),(0,r.jsxs)(c.RV,{...O,children:[(0,r.jsx)(a.Z,{showSpinner:A}),(0,r.jsxs)(ns,{onSubmit:U(Y),children:[(0,r.jsxs)(nd,{children:[(0,r.jsxs)(nf,{children:[(0,r.jsx)(u.k,{title:v,subTitle:tn[P-1],currentStep:P,stepsAmount:3}),1===P&&(0,r.jsx)(nD,{schedule:w,maxNumberOfParticipants:e,isGroupType:j===n8.CN.GROUP}),2===P&&(0,r.jsx)(nR,{withChildren:l,schedule:w,maxNumberOfParticipants:e,isGroupType:j===n8.CN.GROUP,userProfile:E}),3===P&&(0,r.jsx)(nK,{duration:Z})]}),(0,r.jsxs)(nh,{children:[(0,r.jsx)(nQ.Z,{upSection:H.upSection,downSection:H.downSection}),(0,r.jsx)(nH.Z,{items:[{title:"Политика конфиденциальности",text:nX.uV},{title:"Условия использования данных",text:nX.RS}]})]})]}),(0,r.jsx)(s.Z,{className:"footerBtns step".concat(P),booking:!0,totalSteps:3,currentStep:P,handleNextStep:K,handleBackStep:Q})]})]})};var te=e(9008),ti=e.n(te);function tr(){let n=(0,i.Z)(["\n    "]);return tr=function(){return n},n}function to(){let n=(0,i.Z)(["\n    ","\n  "]);return to=function(){return n},n}function tl(){let n=(0,i.Z)(["\n  max-width: 1700px;\n  padding-bottom: 16px;\n\n  ","\n"]);return tl=function(){return n},n}let tc=S.ZP.div.withConfig({componentId:"sc-f91f19b8-0"})(tl(),n=>{let{theme:t}=n;return(0,S.iv)(to(),t.media.down("sm")(tr()))}),ta=n=>{let{data:t,errorData:e}=n;return t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ti(),{children:(0,r.jsx)("title",{children:"Go2Kavkaz : Бронирование"})}),(0,r.jsx)(tc,{children:(0,r.jsx)(tt,{excursionData:t})})]}):(0,r.jsx)(l.Z,{status:null==e?void 0:e.data.status,message:null==e?void 0:e.data.message})};var tu=!0,ts=ta},12918:function(n,t,e){n.exports=e(43499)},57632:function(n,t,e){"use strict";let i;e.d(t,{Z:function(){return u}});let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var o={randomUUID:r};let l=new Uint8Array(16);function c(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(l)}let a=[];for(let n=0;n<256;++n)a.push((n+256).toString(16).slice(1));var u=function(n,t,e){if(o.randomUUID&&!t&&!n)return o.randomUUID();n=n||{};let i=n.random||(n.rng||c)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){e=e||0;for(let n=0;n<16;++n)t[e+n]=i[n];return t}return function(n,t=0){return(a[n[t+0]]+a[n[t+1]]+a[n[t+2]]+a[n[t+3]]+"-"+a[n[t+4]]+a[n[t+5]]+"-"+a[n[t+6]]+a[n[t+7]]+"-"+a[n[t+8]]+a[n[t+9]]+"-"+a[n[t+10]]+a[n[t+11]]+a[n[t+12]]+a[n[t+13]]+a[n[t+14]]+a[n[t+15]]).toLowerCase()}(i)}}},function(n){n.O(0,[947,1940,5797,9774,2888,179],function(){return n(n.s=8126)}),_N_E=n.O()}]);