(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1553],{93976:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking/placement/[id]",function(){return e(19778)}])},79417:function(n,t,e){"use strict";e.d(t,{Z:function(){return E}});var r=e(85893),o=e(7297),i=e(186),l=e(41664),c=e.n(l);function a(){let n=(0,o.Z)([""]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n     align-items: center;\n  "]);return u=function(){return n},n}function s(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 10px;\n  list-style-type: none;\n  align-items: center;\n  flex-wrap: wrap;\n\n  ","\n"]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n  display: flex;\n  gap: 8px;\n"]);return d=function(){return n},n}function f(){let n=(0,o.Z)(["\n      font-size: ","\n    "]);return f=function(){return n},n}function p(){let n=(0,o.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    ",";\n  "]);return p=function(){return n},n}function m(){let n=(0,o.Z)(["\n  ","\n"]);return m=function(){return n},n}function h(){let n=(0,o.Z)(["\n      max-width: 34vw;\n    "]);return h=function(){return n},n}function x(){let n=(0,o.Z)(["\n      font-size: ","\n    "]);return x=function(){return n},n}function g(){let n=(0,o.Z)(["\n    color: ",";\n    font-weight: ",";\n    font-size: ",";\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return g=function(){return n},n}function w(){let n=(0,o.Z)(["\n  ","\n"]);return w=function(){return n},n}function v(){let n=(0,o.Z)(["\n      max-width: 34vw;\n    "]);return v=function(){return n},n}function Z(){let n=(0,o.Z)(["\n      font-size: ","\n    "]);return Z=function(){return n},n}function b(){let n=(0,o.Z)(["\n    max-width: 26vw;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n\n    ","\n\n    ","\n  "]);return b=function(){return n},n}function j(){let n=(0,o.Z)(["\n  ","\n"]);return j=function(){return n},n}let y=i.ZP.nav.withConfig({componentId:"sc-39019b6d-0"})(a()),C=i.ZP.ul.withConfig({componentId:"sc-39019b6d-1"})(s(),n=>{let{theme:t}=n;return t.media.down("xs")(u())}),P=i.ZP.li.withConfig({componentId:"sc-39019b6d-2"})(d()),I=i.ZP.span.withConfig({componentId:"sc-39019b6d-3"})(m(),n=>{let{theme:t}=n;return(0,i.iv)(p(),t.colors.primary,t.font.weight,t.font.size.subtitle1,t.media.down("xs")(f(),t.font.size.body2))}),k=i.ZP.span.withConfig({componentId:"sc-39019b6d-4"})(w(),n=>{let{theme:t}=n;return(0,i.iv)(g(),t.colors.default,t.font.weight,t.font.size.subtitle1,t.media.down("md")(h()),t.media.down("xs")(x(),t.font.size.body2))}),D=(0,i.ZP)(c()).withConfig({componentId:"sc-39019b6d-5"})(j(),n=>{let{theme:t}=n;return(0,i.iv)(b(),t.media.down("md")(v()),t.media.down("xs")(Z(),t.font.size.body2))});var S=e(67294),z=e(34956);let T=n=>{let{paths:t,isMobile:e}=n,o=t,i=!1;return e&&t.length>2&&(o=t.slice(-2),i=!0),(0,r.jsx)(y,{children:(0,r.jsxs)(C,{children:[i&&(0,r.jsxs)(P,{children:[(0,r.jsx)("span",{children:"..."}),(0,r.jsx)(z.Z,{})]}),o.map((n,t)=>(0,r.jsxs)(S.Fragment,{children:[(0,r.jsx)(P,{children:n.url&&t!==o.length-1?(0,r.jsx)(D,{href:n.url,passHref:!0,children:(0,r.jsx)(I,{children:n.label})}):(0,r.jsx)(k,{children:n.label})}),o.length-1>t&&(0,r.jsx)(P,{children:(0,r.jsx)(z.Z,{})})]},t))]})})};var E=T},81489:function(n,t,e){"use strict";e.d(t,{RS:function(){return l},gD:function(){return c},uV:function(){return i}});var r=e(27484),o=e.n(r);let i="Оформляя заказ, вы соглашаетесь с нашей политикой конфиденциальности. Мы защищаем ваши данные и используем их только для обработки заказа и обеспечения качественного обслуживания. Мы не передаем вашу информацию третьим лицам без вашего согласия. Если у вас есть вопросы, свяжитесь с нами.",l="Соглашаясь с условиями использования данных, вы разрешаете нам использовать их в соответствии с нашей политикой конфиденциальности. Мы не передаем данные третьим лицам без вашего согласия, кроме случаев, когда это необходимо для выполнения наших обязательств или по закону. Если у вас есть вопросы, свяжитесь с нами.",c=n=>{let t=o()(null==n?void 0:n.freeCancellationDeadlineLocal).format("DD.MM.YYYY HH:mm"),e="В случае отмены бронирования";return(null==n?void 0:n.freeCancellationPossible)?(null==n?void 0:n.freeCancellationDeadlineLocal)?"".concat(e," до ").concat(t," (по местному времени отеля) вам возвращается вся оплаченная сумма. При отмене после ").concat(t,"\n      с вас будет удержан штраф в размере ").concat(n.penaltyAmount," ₽."):"".concat(e,"  вам возвращается оплаченная сумма."):"".concat(e," вам возвращается оплаченная сумма с удержанием штрафа в размере ").concat(null==n?void 0:n.penaltyAmount," ₽.")}},54952:function(n,t,e){"use strict";e.d(t,{Z:function(){return w}});var r=e(85893);e(67294);var o=e(7297),i=e(186),l=e(96910);function c(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: column;\n  padding: 24px;\n  gap: 24px;\n  border-radius: 32px;\n  ",";\n"]);return c=function(){return n},n}function a(){let n=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: 5% 95%;\n  grid-column-gap: 15px;\n  grid-row-gap: 4px;\n  grid-row: 2;\n"]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n  align-self: center;\n"]);return u=function(){return n},n}function s(){let n=(0,o.Z)(["\n  white-space: nowrap;\n  grid-column: 2;\n  ",";\n"]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n  grid-column: 2;\n  ",";\n"]);return d=function(){return n},n}let f=i.ZP.div.withConfig({componentId:"sc-c99a7ba-0"})(c(),n=>{let{theme:t}=n;return"\n    border: 2px solid ".concat(t.colors.secondary,";\n  ")}),p=i.ZP.div.withConfig({componentId:"sc-c99a7ba-1"})(a()),m=(0,i.ZP)(l.Z).withConfig({componentId:"sc-c99a7ba-2"})(u()),h=i.ZP.h3.withConfig({componentId:"sc-c99a7ba-3"})(s(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=i.ZP.h4.withConfig({componentId:"sc-c99a7ba-4"})(d(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.secondary,";\n    font-size: ").concat(t.font.size.body3,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),g=n=>{let{items:t}=n;return(0,r.jsx)(f,{children:t.map((n,t)=>(0,r.jsxs)(p,{children:[n.icon?n.icon:(0,r.jsx)(m,{}),(0,r.jsx)(h,{children:n.title}),(0,r.jsx)(x,{children:n.text})]},t))})};var w=g},13435:function(n,t,e){"use strict";e.d(t,{k:function(){return v}});var r=e(85893);e(67294);var o=e(7297),i=e(186);function l(){let n=(0,o.Z)(["\n        gap: 8px;\n    "]);return l=function(){return n},n}function c(){let n=(0,o.Z)(["\n  ","\n"]);return c=function(){return n},n}function a(){let n=(0,o.Z)(["\n        font-size: ",";\n    "]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n  ","\n"]);return u=function(){return n},n}function s(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n"]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n        font-size: ",";\n    "]);return d=function(){return n},n}function f(){let n=(0,o.Z)(["\n  ","\n"]);return f=function(){return n},n}function p(){let n=(0,o.Z)(["\n  ","\n"]);return p=function(){return n},n}let m=i.ZP.div.withConfig({componentId:"sc-3b287813-0"})(c(),n=>{let{theme:t}=n;return"\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    ".concat(t.media.down("sm")(l()),"\n  ")}),h=i.ZP.h2.withConfig({componentId:"sc-3b287813-1"})(u(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.heading2,";\n    font-weight: ").concat(t.font.weight.regular,";\n    ").concat(t.media.down("sm")(a(),t.font.size.subtitle1),"\n  ")}),x=i.ZP.div.withConfig({componentId:"sc-3b287813-2"})(s()),g=i.ZP.h2.withConfig({componentId:"sc-3b287813-3"})(f(),n=>{let{theme:t,currentStep:e}=n;return"\n    font-weight: ".concat(t.font.weight.regular,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    color: ").concat(e?t.colors.default:"#8daec1",";\n    ").concat(t.media.down("xs")(d(),t.font.size.subtitle2),";\n  ")}),w=i.ZP.h3.withConfig({componentId:"sc-3b287813-4"})(p(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),v=n=>{let{currentStep:t,stepsAmount:e,subTitle:o,title:i}=n;return(0,r.jsxs)(m,{children:[i&&"string"==typeof i?(0,r.jsx)(h,{children:i}):i,t&&e&&(0,r.jsxs)(x,{children:[(0,r.jsxs)(g,{currentStep:!0,children:["Шаг ",t]}),(0,r.jsxs)(g,{children:["/",e]})]}),o&&(0,r.jsx)(w,{children:o})]})}},44643:function(n,t,e){"use strict";e.d(t,{Z:function(){return v}});var r=e(85893);e(67294);var o=e(7297),i=e(186);function l(){let n=(0,o.Z)(["\n  ",";\n"]);return l=function(){return n},n}function c(){let n=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  gap: 10px;\n  flex-wrap: wrap;\n"]);return c=function(){return n},n}function a(){let n=(0,o.Z)(["\n  ",";\n"]);return a=function(){return n},n}function u(){let n=(0,o.Z)(["\n  ",";\n"]);return u=function(){return n},n}function s(){let n=(0,o.Z)(["\n  width: 100%;\n  height: 1px;\n  background: #8daec1;\n"]);return s=function(){return n},n}function d(){let n=(0,o.Z)(["\n  display: flex;\n  padding: 24px;\n  border-radius: 32px;\n  flex-direction: column;\n  gap: 16px;\n  width: 100%;\n  background: #c6e1f3;\n  height: auto;\n"]);return d=function(){return n},n}let f=i.ZP.h3.withConfig({componentId:"sc-5c378-0"})(l(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),p=i.ZP.div.withConfig({componentId:"sc-5c378-1"})(c()),m=i.ZP.h4.withConfig({componentId:"sc-5c378-2"})(a(),n=>{let{theme:t}=n;return"\n    color: #4F4F4F;\n    font-size: ".concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),h=i.ZP.h4.withConfig({componentId:"sc-5c378-3"})(u(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle2,";\n    font-weight: ").concat(t.font.weight.regular,";\n  ")}),x=i.ZP.span.withConfig({componentId:"sc-5c378-4"})(s()),g=i.ZP.div.withConfig({componentId:"sc-5c378-5"})(d()),w=n=>{let{upSection:t,downSection:e}=n,o=null==e?void 0:e.list.reduce((n,t)=>n+(null==t?void 0:t.price),0);return(0,r.jsxs)(g,{children:[(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{children:"Стоимость"}),t.list.map(n=>(0,r.jsxs)(p,{children:[(0,r.jsxs)(m,{children:[n.listTitle,":"]}),(0,r.jsxs)(h,{children:[n.price," ₽"]})]},n.listTitle))]}),(0,r.jsx)(x,{}),e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(f,{children:"Итого"}),(0,r.jsxs)(f,{children:[o," ₽"]})]}),null==e?void 0:e.list.map(n=>(0,r.jsxs)(p,{children:[(0,r.jsxs)(m,{children:[n.listTitle,":"]}),(0,r.jsxs)(h,{children:[n.price," ₽"]})]},n.listTitle))]})]})};var v=w},96910:function(n,t,e){"use strict";var r=e(85893);e(67294);let o=n=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",...n,children:(0,r.jsx)("path",{stroke:"#8DAEC1",strokeLinecap:"round",strokeWidth:2,d:"m11 1-5.43 9.05a1 1 0 0 1-1.457.285L1 8"})});t.Z=o},34956:function(n,t,e){"use strict";var r=e(85893);e(67294);let o=n=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:20,fill:"none",...n,children:(0,r.jsx)("path",{stroke:n.stroke?n.stroke:"#222121",strokeLinecap:"round",strokeWidth:2,d:"m1 1 7.293 7.293a1 1 0 0 1 0 1.414L1 17"})});t.Z=o},43795:function(n,t,e){"use strict";var r=e(85893);e(67294);let o=n=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",...n,children:(0,r.jsx)("path",{fill:"#8DAEC1",fillRule:"evenodd",d:"M11 20a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1ZM18 3.879c-.297 0-.583.118-.793.328L4.903 16.511l-.529 2.115 2.115-.529L18.793 5.793A1.123 1.123 0 0 0 18 3.879Zm-2.207-1.086a3.121 3.121 0 0 1 4.414 4.414l-12.5 12.5a1 1 0 0 1-.464.263l-4 1a1 1 0 0 1-1.213-1.212l1-4a1 1 0 0 1 .263-.465l12.5-12.5Z",clipRule:"evenodd"})});t.Z=o},88e3:function(n,t,e){"use strict";e.d(t,{Z:function(){return I}});var r=e(85893),o=e(67294),i=e(7297),l=e(186);function c(){let n=(0,i.Z)(["\n  position: relative;\n  display: block;\n  width: 100%;\n  padding-bottom: 17px;\n"]);return c=function(){return n},n}function a(){let n=(0,i.Z)(["\n    font-size: ",";\n    color: ",";\n  "]);return a=function(){return n},n}function u(){let n=(0,i.Z)(["\n  display: block;\n  margin-bottom: 8px;\n  line-height: 23px;\n  ","\n"]);return u=function(){return n},n}function s(){let n=(0,i.Z)(["\n      &::after {\n        transform: scaleX(1);\n      }\n    "]);return s=function(){return n},n}function d(){let n=(0,i.Z)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n  width: 100%;\n  border-bottom: 1px solid ",";\n  overflow: hidden;\n  transition: ",";\n  height: 88px;\n  background: #ffffff !important;\n  border: 3px solid\n    ",";\n  border-radius: 16px;\n\n  &::after {\n    content: '';\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 0;\n    display: block;\n    width: 100%;\n    height: 2px;\n    transform: scaleX(0);\n    transition: ",";\n  }\n\n  ","\n"]);return d=function(){return n},n}function f(){let n=(0,i.Z)(["\n      margin-left: 17px;\n    "]);return f=function(){return n},n}function p(){let n=(0,i.Z)(["\n      margin-left: 8px;\n    "]);return p=function(){return n},n}function m(){let n=(0,i.Z)(["\n      cursor: pointer;\n    "]);return m=function(){return n},n}function h(){let n=(0,i.Z)(["\n  display: flex;\n\n  ","\n\n  ","\n\n  ","\n"]);return h=function(){return n},n}function x(){let n=(0,i.Z)(["\n  width: 100%;\n  height: 100%;\n  border: none;\n  outline: none;\n  font-size: ",";\n  font-weight: ",";\n  padding: 6px 16px;\n  resize: none;\n  &::-ms-reveal,\n  &::-ms-clear {\n    display: none;\n  }\n\n  &:disabled {\n    background-color: ",";\n    color: ",";\n  }\n\n  &::placeholder {\n    color: ",";\n  }\n"]);return x=function(){return n},n}function g(){let n=(0,i.Z)(["\n  position: absolute;\n  left: 0;\n  color: red;\n  font-size: 14px;\n  width: 100%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return g=function(){return n},n}let w=l.ZP.label.withConfig({componentId:"sc-9639c41f-0"})(c()),v=l.ZP.label.withConfig({componentId:"sc-9639c41f-1"})(u(),n=>{let{theme:t}=n;return(0,l.iv)(a(),t.font.size.subtitle2,t.colors.default)}),Z=l.ZP.div.withConfig({componentId:"sc-9639c41f-2"})(d(),n=>{let{theme:t,isError:e}=n;return e?"red":"grey"},n=>n.theme.transition.fast,n=>{let{theme:t,isError:e,isFilled:r}=n;return r&&!e?t.colors.primary:e?"red":t.colors.secondary},n=>n.theme.transition.fast,n=>n.isFocused&&(0,l.iv)(s())),b=l.ZP.div.withConfig({componentId:"sc-9639c41f-3"})(h(),n=>"left"===n.position&&(0,l.iv)(f()),n=>"right"===n.position&&(0,l.iv)(p()),n=>n.isPassword&&(0,l.iv)(m())),j=l.ZP.textarea.withConfig({componentId:"sc-9639c41f-4"})(x(),n=>n.theme.font.size.body2,n=>n.theme.font.weight.semiBold,n=>n.theme.colors.lightDefault,n=>n.theme.colors.default,n=>n.theme.colors.secondary),y=l.ZP.span.withConfig({componentId:"sc-9639c41f-5"})(g());var C=e(62405);let P=(0,o.forwardRef)((n,t)=>{let{name:e,label:i,placeholder:l,startAdornment:c,endAdornment:a,className:u,style:s,disabled:d=!1,error:f,onFocus:p,onBlur:m,...h}=n,[x,g]=(0,C.k)(),[P,I]=(0,o.useState)(!1),[k,D]=(0,o.useState)(!1),S=(0,o.useCallback)(n=>{p&&p(n),g.on()},[p,g.on]),z=(0,o.useCallback)(n=>{m&&m(n),g.off(),D(!0)},[m,g.off]);return(0,r.jsxs)(w,{className:u,style:s,children:[!!i&&(0,r.jsx)(v,{children:i}),(0,r.jsxs)(Z,{className:"textarea",isError:!!f,isFocused:x,isFilled:k,children:[c&&(0,r.jsx)(b,{position:"left",children:c}),(0,r.jsx)(j,{placeholder:l,name:e,disabled:d,ref:t,onFocus:S,onBlur:z,...h}),a&&(0,r.jsx)(b,{position:"right",children:a})]}),!!f&&(0,r.jsx)(y,{children:f})]})});P.displayName="TextareaStyled";var I=P},16812:function(n,t,e){"use strict";e.d(t,{x:function(){return s}});var r=e(67294),o=e(57441),i=e(11163),l=e(82741),c=e(27484),a=e.n(c),u=e(96894);let s=()=>{let n=(0,o.T)(),t=(0,i.useRouter)(),e=(0,o.C)(l.N$);(0,r.useEffect)(()=>{let{numOfAdult:r,cityId:o,childAges:i,placementType:c,rating:s,offset:d,roomId:f,ratePlanId:p,specialOffer:m,breakfast:h,amenityCodes:x}=t.query,{arrivalDate:g,departureDate:w}=t.query;a()(g).format(u.K_)<a()().format(u.K_)&&(g=a()().format(u.K_),w=a()().add(1,"day").format(u.K_)),n((0,l.hL)({arrivalDate:g?String(g):e.arrivalDate,departureDate:w?String(w):e.departureDate,cityId:o&&"null"!==o?String(o):e.cityId,rating:"true"===s,numOfAdult:r?Number(r):e.numOfAdult,childAges:i?Array.isArray(i)?i:[i]:e.childAges,offset:d?Number(d):e.offset,roomId:f?Number(f):e.roomId,ratePlanId:p?Number(p):e.ratePlanId,popular:e.popular&&!e.cityId,specialOffer:"true"===m,breakfast:"true"===h,amenityCodes:x?x.split(","):[]}))},[t])}},42326:function(n,t,e){"use strict";var r=e(89882),o=e(27484),i=e.n(o);let l=n=>{let{arrivalDate:t,departureDate:e}=n;if(!t||!e)return{daysString:null,dateRangeString:null,datesWithTime:{arrivalDate:null,departureDate:null}};let o={departureDate:i()(e.split("T")[0]),arrivalDate:i()(t.split("T")[0])},l={departureDate:i()(e),arrivalDate:i()(t)},c=o.departureDate.diff(o.arrivalDate,"day",!0),a="".concat(c+1," ").concat((0,r.$)(c+1,["день","дня","дней"]),", ").concat(c," ").concat((0,r.$)(c,["ночь","ночи","ночей"])),u="".concat(o.arrivalDate.format("DD MMM")," - ").concat(o.departureDate.format("DD MMM, YYYY"));return{daysString:a,dateRangeString:u,datesWithTime:l,nights:c}};t.Z=l},51949:function(n,t,e){"use strict";e.d(t,{l:function(){return o}});var r=e(20377);function o(){let{enqueueSnackbar:n}=(0,r.Ds)(),t=(t,e)=>{n(t,{variant:e})};return t}},88025:function(n,t,e){"use strict";e.d(t,{F8:function(){return m},G9:function(){return h},HK:function(){return p},PK:function(){return d},PM:function(){return g},Qw:function(){return x},TK:function(){return a},YE:function(){return s},mQ:function(){return w},px:function(){return f}});var r=e(49836),o=e(49305);let i=o.gk.injectEndpoints({endpoints:n=>({blockPlacement:n.mutation({query:n=>({url:"/placement/".concat(n,"/block"),method:"PUT"})}),unblockPlacement:n.mutation({query:n=>({url:"/placement/".concat(n,"/unblock"),method:"PUT"})}),deletePlacement:n.mutation({query:n=>({url:"/placement/".concat(n),method:"DELETE",body:n})}),getPartnerPlacements:n.query({query:n=>({url:"/placement?".concat(n)}),transformResponse:(n,t,e)=>{var r;return{...n,totalCount:(null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["Placements"],keepUnusedDataFor:0}),getBookingData:n.query({query:n=>({url:"/placement?".concat((0,r.z)(n))}),transformResponse:(n,t,e)=>{var r;return{data:n,totalCount:(null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0}),getDetailBookingData:n.query({query:n=>{let{id:t,urlQueries:e}=n;return{url:"/placement/".concat(t,"?").concat("string"!=typeof e?(0,r.z)(e):e)}}}),getSpecialOffer:n.query({query:()=>({url:"/placement?specialOffer=true"})}),bookCurrentRoom:n.mutation({query:n=>({url:"/booking/verify",method:"POST",body:n}),extraOptions:{name:"bookCurrentRoom"}}),getBookedListItems:n.query({query:n=>({url:"/booking?".concat(n)}),transformResponse:(n,t)=>{var e;return{...n,totalCount:(null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.headers.get("X-TOTAL-COUNT"))||"1"}},providesTags:["bookings"],keepUnusedDataFor:0}),getBookedExcursionGroupedItems:n.query({query:n=>({url:"/booking/excursion?".concat(n)}),transformResponse:(n,t)=>{var e;return{...n,totalCount:(null==t?void 0:null===(e=t.response)||void 0===e?void 0:e.headers.get("X-TOTAL-COUNT"))||"1"}},keepUnusedDataFor:0,providesTags:["bookings"]}),addPlacementById:n.mutation({query:n=>({url:"/placement",method:"POST",body:n}),invalidatesTags:["Placements"],extraOptions:{name:"addPlacement"}}),getBookingDataByAmenities:n.query({query:n=>({url:"/placement?".concat((0,r.z)(n))}),transformResponse:(n,t,e)=>{var r;return{data:n.data,totalCount:(null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.headers.get("X-TOTAL-COUNT"))||"1",amenitiesData:n.amenitiesData}}}),addExcursionExternalPlaces:n.mutation({query:n=>({url:"/booking/excursion",method:"PUT",body:n})})}),overrideExisting:!0}),{endpoints:{getBookingData:l,getDetailBookingData:c}}=i,{useGetDetailBookingDataQuery:a,useGetSpecialOfferQuery:u,useBookCurrentRoomMutation:s,useGetBookedListItemsQuery:d,useAddPlacementByIdMutation:f,useGetPartnerPlacementsQuery:p,useDeletePlacementMutation:m,useUnblockPlacementMutation:h,useBlockPlacementMutation:x,useGetBookedExcursionGroupedItemsQuery:g,useAddExcursionExternalPlacesMutation:w,useGetBookingDataByAmenitiesQuery:v}=i},19778:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return tO}});var r,o,i,l,c=e(85893),a=e(67294),u=e(57441),s=e(11163),d=e(82741),f=e(90756),p=e(88025),m=e(16812),h=e(79417),x=e(7297),g=e(186);function w(){let n=(0,x.Z)(["\n    "]);return w=function(){return n},n}function v(){let n=(0,x.Z)(["\n    flex-direction: column;\n    ","\n  "]);return v=function(){return n},n}function Z(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 32px;\n\n  ","\n"]);return Z=function(){return n},n}function b(){let n=(0,x.Z)(["\n  position: relative;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 44px;\n  gap: 24px;\n"]);return b=function(){return n},n}function j(){let n=(0,x.Z)(["\n      max-width: 100%;\n      flex-direction: row;\n      width: 100%;\n      gap: 24px;\n    "]);return j=function(){return n},n}function y(){let n=(0,x.Z)(["\n    width: min-content;\n    max-width: 328px;\n    display: flex;\n    flex-direction: column;\n    gap: 24px;\n\n    ","\n  "]);return y=function(){return n},n}function C(){let n=(0,x.Z)(["\n  ","\n"]);return C=function(){return n},n}function P(){let n=(0,x.Z)(["\n        font-size: ",";\n    "]);return P=function(){return n},n}function I(){let n=(0,x.Z)(["\n    color: ",";\n    font-size: ",";\n    font-weight: ",";\n    ","\n  "]);return I=function(){return n},n}function k(){let n=(0,x.Z)(["\n  ","\n"]);return k=function(){return n},n}function D(){let n=(0,x.Z)(["\n        gap: 8px;\n    "]);return D=function(){return n},n}function S(){let n=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    ","\n  "]);return S=function(){return n},n}function z(){let n=(0,x.Z)(["\n  ","\n"]);return z=function(){return n},n}function T(){let n=(0,x.Z)(["\n          margin: 0;\n      "]);return T=function(){return n},n}function E(){let n=(0,x.Z)(["\n    height: 2px;\n    background: #c6e1f3;\n    width: 100%;\n    margin: 28px 0 16px;\n    ","\n  "]);return E=function(){return n},n}function N(){let n=(0,x.Z)(["\n  ","\n"]);return N=function(){return n},n}let F=g.ZP.div.withConfig({componentId:"sc-e5c24a5f-0"})(Z(),n=>{let{theme:t}=n;return t.media.down("md")(v(),t.media.down("sm")(w()))}),L=g.ZP.div.withConfig({componentId:"sc-e5c24a5f-1"})(b()),A=g.ZP.div.withConfig({componentId:"sc-e5c24a5f-2"})(C(),n=>{let{theme:t}=n;return(0,g.iv)(y(),t.media.down("md")(j()))});g.ZP.h2.withConfig({componentId:"sc-e5c24a5f-3"})(k(),n=>{let{theme:t}=n;return(0,g.iv)(I(),t.colors.default,t.font.size.heading2,t.font.weight.regular,t.media.down("sm")(P(),t.font.size.subtitle1))}),g.ZP.div.withConfig({componentId:"sc-e5c24a5f-4"})(z(),n=>{let{theme:t}=n;return(0,g.iv)(S(),t.media.down("sm")(D()))});let R=g.ZP.span.withConfig({componentId:"sc-e5c24a5f-5"})(N(),n=>{let{theme:t}=n;return(0,g.iv)(E(),t.media.down("sm")(T()))});var M=e(24062),O=e(42143),q=e(50480);function _(){let n=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n  "]);return _=function(){return n},n}function H(){let n=(0,x.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: auto;\n  grid-column-gap: 24px;\n  grid-row-gap: 8px;\n\n  &::-webkit-scrollbar {\n    width: 4px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: #8daec1;\n    border-radius: 10px;\n    height: 50px !important;\n  }\n\n  &::-webkit-scrollbar-track {\n    border-radius: 10px;\n  }\n  ","\n"]);return H=function(){return n},n}function G(){let n=(0,x.Z)(["\n  width: auto;\n  white-space: nowrap;\n  font-size: 24px;\n"]);return G=function(){return n},n}function V(){let n=(0,x.Z)(["\n  width: auto;\n  white-space: nowrap;\n  font-size: 24px;\n"]);return V=function(){return n},n}function Y(){let n=(0,x.Z)(["\n  grid-column: 1 / 3;\n"]);return Y=function(){return n},n}function U(){let n=(0,x.Z)(["\n  grid-column: 1 / 3;\n  height: 2px;\n  background: #c6e1f3;\n  width: 100%;\n  margin-top: 6px;\n  margin-bottom: 20px;\n"]);return U=function(){return n},n}function B(){let n=(0,x.Z)(["\n  grid-column: 1 / 3;\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  gap: 20px;\n  justify-content: flex-end;\n"]);return B=function(){return n},n}function K(){let n=(0,x.Z)(["\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return K=function(){return n},n}function X(){let n=(0,x.Z)(["\n  grid-column: 1 / 3;\n  width: 100%;\n  height: 30px;\n  margin-bottom: 16px;\n  ","\n"]);return X=function(){return n},n}function $(){let n=(0,x.Z)(["\n  grid-column: 1 / 3;\n"]);return $=function(){return n},n}function Q(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 20px;\n  align-items: center;\n"]);return Q=function(){return n},n}function W(){let n=(0,x.Z)(["\n    flex-direction: column;\n    gap: 0;\n  "]);return W=function(){return n},n}function J(){let n=(0,x.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: flex-end;\n  gap: 24px;\n  ","\n"]);return J=function(){return n},n}function nn(){let n=(0,x.Z)(["\n  margin-bottom: 24px;\n"]);return nn=function(){return n},n}function nt(){let n=(0,x.Z)([""]);return nt=function(){return n},n}function ne(){let n=(0,x.Z)(["\n  font-family: ",";\n  font-size: ",";\n  color: ",";\n"]);return ne=function(){return n},n}let nr=g.ZP.form.withConfig({componentId:"sc-4c35e397-0"})(H(),n=>{let{theme:t}=n;return t.media.down("lg")(_())}),no=(0,g.ZP)(O.Z).withConfig({componentId:"sc-4c35e397-1"})(G());(0,g.ZP)(O.Z).withConfig({componentId:"sc-4c35e397-2"})(V());let ni=g.ZP.div.withConfig({componentId:"sc-4c35e397-3"})(Y()),nl=g.ZP.span.withConfig({componentId:"sc-4c35e397-4"})(U()),nc=g.ZP.div.withConfig({componentId:"sc-4c35e397-5"})(B()),na=g.ZP.h2.withConfig({componentId:"sc-4c35e397-6"})(X(),n=>{let{theme:t}=n;return(0,g.iv)(K(),t.font.size.subtitle1,t.font.weight.regular,t.colors.default)}),nu=g.ZP.div.withConfig({componentId:"sc-4c35e397-7"})($()),ns=g.ZP.div.withConfig({componentId:"sc-4c35e397-8"})(Q()),nd=g.ZP.div.withConfig({componentId:"sc-4c35e397-9"})(J(),n=>{let{theme:t}=n;return t.media.down("lg")(W())}),nf=g.ZP.div.withConfig({componentId:"sc-4c35e397-10"})(nn()),np=(0,g.ZP)(q.Z).withConfig({componentId:"sc-4c35e397-11"})(nt()),nm=g.ZP.span.withConfig({componentId:"sc-4c35e397-12"})(ne(),n=>{let{theme:t}=n;return t.font.family.gothicMedium},n=>{let{theme:t}=n;return t.font.size.subtitle2},n=>{let{theme:t}=n;return t.colors.default});var nh=e(88620),nx=e(88e3);function ng(){let n=(0,x.Z)(["\n        flex-direction: ",";\n        flex-flow: ",";\n    "]);return ng=function(){return n},n}function nw(){let n=(0,x.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n    ","\n  "]);return nw=function(){return n},n}function nv(){let n=(0,x.Z)(["\n  ","\n"]);return nv=function(){return n},n}function nZ(){let n=(0,x.Z)(["\n  ",";\n"]);return nZ=function(){return n},n}function nb(){let n=(0,x.Z)(["\n  cursor: pointer;\n  ",";\n"]);return nb=function(){return n},n}function nj(){let n=(0,x.Z)(["\n       flex-direction: column;\n       gap: 16px;\n       margin: 0;\n    "]);return nj=function(){return n},n}function ny(){let n=(0,x.Z)(["\n    grid-column: 1 / 3;\n    gap: 32px;\n    display: flex;\n    margin: 16px 0;\n    flex-direction: row;\n    ","\n  "]);return ny=function(){return n},n}function nC(){let n=(0,x.Z)(["\n  ","\n"]);return nC=function(){return n},n}function nP(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 56px;\n"]);return nP=function(){return n},n}let nI=g.ZP.div.withConfig({componentId:"sc-929eba06-0"})(nv(),n=>{let{theme:t,isMobileLastStep:e}=n;return(0,g.iv)(nw(),t.media.down("sm")(ng(),e?"column":"row",e?"auto":"wrap"))}),nk=g.ZP.h3.withConfig({componentId:"sc-929eba06-1"})(nZ(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),nD=g.ZP.h3.withConfig({componentId:"sc-929eba06-2"})(nb(),n=>{let{theme:t,dark:e}=n;return"\n    color: ".concat(e?"#4F4F4F":"#27AE60",";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),nS=g.ZP.div.withConfig({componentId:"sc-929eba06-3"})(nC(),n=>{let{theme:t}=n;return(0,g.iv)(ny(),t.media.down("sm")(nj()))}),nz=g.ZP.div.withConfig({componentId:"sc-929eba06-4"})(nP());var nT=e(42326);let nE=n=>{var t,e,r,o;let{stayDates:i,isMobileFinalStep:l,backwardLink:a}=n,u=(0,s.useRouter)(),{daysString:d,dateRangeString:f,datesWithTime:p}=(0,nT.Z)({arrivalDate:(null==i?void 0:i.arrivalDateTime)||null,departureDate:(null==i?void 0:i.departureDateTime)||null}),m=()=>{a&&u.push(a)};return l?(0,c.jsxs)(nS,{onClick:m,children:[(0,c.jsxs)(nI,{isMobileLastStep:!0,children:[(0,c.jsx)(nk,{children:"Даты"}),(0,c.jsx)(nD,{dark:!0,children:f})]}),(0,c.jsxs)(nz,{children:[(0,c.jsxs)(nI,{isMobileLastStep:!0,children:[(0,c.jsx)(nk,{children:"Время заезда:"}),(0,c.jsx)(nD,{dark:!0,children:null===(r=p.arrivalDate)||void 0===r?void 0:r.format("HH:mm")})]}),(0,c.jsxs)(nI,{isMobileLastStep:!0,children:[(0,c.jsx)(nk,{children:"Время выезда:"}),(0,c.jsx)(nD,{dark:!0,children:null===(o=p.departureDate)||void 0===o?void 0:o.format("HH:mm")})]})]})]}):(0,c.jsxs)(nS,{children:[(0,c.jsxs)(nI,{children:[(0,c.jsx)(nk,{children:"Выбранные даты:"}),(0,c.jsx)(nD,{onClick:m,children:f}),(0,c.jsx)(nk,{onClick:m,children:d})]}),(0,c.jsxs)(nI,{children:[(0,c.jsx)(nk,{children:"Время заезда:"}),(0,c.jsx)(nD,{onClick:m,children:null===(t=p.arrivalDate)||void 0===t?void 0:t.format("HH:mm")})]}),(0,c.jsxs)(nI,{children:[(0,c.jsx)(nk,{children:"Время выезда:"}),(0,c.jsx)(nD,{onClick:m,children:null===(e=p.departureDate)||void 0===e?void 0:e.format("HH:mm")})]})]})};function nN(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  gap: 4px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #c6e1f3;\n  margin: 16px 0 0;\n"]);return nN=function(){return n},n}function nF(){let n=(0,x.Z)(["\n  position: relative;\n  height: 100vh;\n  width: 100%;\n  overflow-y: scroll;\n  background: white;\n  display: flex;\n  flex-direction: column;\n  padding: 46px 16px 100px;\n"]);return nF=function(){return n},n}function nL(){let n=(0,x.Z)(["\n  position: fixed;\n  width: 90%;\n  align-self: center;\n  bottom: 20px;\n"]);return nL=function(){return n},n}function nA(){let n=(0,x.Z)(["\n  ",";\n"]);return nA=function(){return n},n}function nR(){let n=(0,x.Z)(["\n  align-self: center;\n"]);return nR=function(){return n},n}function nM(){let n=(0,x.Z)(["\n  gap: 24px;\n  display: flex;\n  flex-direction: column;\n"]);return nM=function(){return n},n}function nO(){let n=(0,x.Z)(["\n  ",";\n"]);return nO=function(){return n},n}function nq(){let n=(0,x.Z)(["\n  ",";\n"]);return nq=function(){return n},n}function n_(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n"]);return n_=function(){return n},n}function nH(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n"]);return nH=function(){return n},n}function nG(){let n=(0,x.Z)(["\n  font-size: 20px;\n  line-height: 23px;\n  display: flex;\n  align-items: flex-end;\n  color: #222121;\n"]);return nG=function(){return n},n}function nV(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n  margin-top: -8px;\n"]);return nV=function(){return n},n}function nY(){let n=(0,x.Z)(["\n  font-weight: 400;\n  font-size: 20px;\n  color: ",";\n"]);return nY=function(){return n},n}function nU(){let n=(0,x.Z)(["\n  ",";\n"]);return nU=function(){return n},n}let nB=g.ZP.div.withConfig({componentId:"sc-9f22f325-0"})(nN()),nK=g.ZP.div.withConfig({componentId:"sc-9f22f325-1"})(nF()),nX=(0,g.ZP)(O.Z).withConfig({componentId:"sc-9f22f325-2"})(nL()),n$=g.ZP.h2.withConfig({componentId:"sc-9f22f325-3"})(nA(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.subtitle1,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),nQ=(0,g.ZP)(O.Z).withConfig({componentId:"sc-9f22f325-4"})(nR()),nW=g.ZP.div.withConfig({componentId:"sc-9f22f325-5"})(nM()),nJ=g.ZP.h3.withConfig({componentId:"sc-9f22f325-6"})(nO(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),n0=g.ZP.h3.withConfig({componentId:"sc-9f22f325-7"})(nq(),n=>{let{theme:t}=n;return"\n    color: #4F4F4F;\n    font-size: ".concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),n1=g.ZP.div.withConfig({componentId:"sc-9f22f325-8"})(n_());g.ZP.div.withConfig({componentId:"sc-9f22f325-9"})(nH()),g.ZP.h2.withConfig({componentId:"sc-9f22f325-10"})(nG()),g.ZP.h2.withConfig({componentId:"sc-9f22f325-11"})(nV()),g.ZP.h2.withConfig({componentId:"sc-9f22f325-12"})(nY(),n=>n.currentStep?n.theme.colors.default:"#8daec1");let n2=g.ZP.h3.withConfig({componentId:"sc-9f22f325-13"})(nU(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")});var n3=e(64468),n4=e(87536),n9=e(72890),n8=e(36872);(r=i||(i={})).HIMSELF="HIMSELF",r.ANOTHER="ANOTHER";let n5=n=>{var t,e,r,o,l,u,s,d,f,p;let{register:m,handleSubmit:h,control:x,watch:g,trigger:w,formState:{errors:v,isValid:Z},stayDates:b,getValues:j,isMobile:y,nextStepFn:C,fullPaymentFn:P,partialPaymentFn:I,guestsCount:k=n3.np.numOfAdult,setFirstGuestDataToForm:D,setValue:S,backwardLink:z}=n,{firstName:T,lastName:E,whoIsGuest:N}=g();(0,a.useEffect)(()=>{j("whoIsGuest")===i.HIMSELF&&S("guests",[{firstName:T,lastName:E}]),T&&w()},[T,E,N]);let F=n=>({...n}),L=()=>{C&&C()},A=n=>{P&&P(F(n))};return(0,c.jsxs)(nr,{children:[(0,c.jsx)(na,{children:"Введите свои данные"}),(0,c.jsx)(M.Z,{label:"Фамилия",placeholder:"Введите вашу фамилию",...m("lastName"),error:null===(t=v.lastName)||void 0===t?void 0:t.message}),(0,c.jsx)(M.Z,{label:"Имя",placeholder:"Введите ваше имя",...m("firstName"),error:null===(e=v.firstName)||void 0===e?void 0:e.message}),(0,c.jsx)(M.Z,{label:"Электронная почта",placeholder:"Введите вашу электронную почту",...m("email"),error:null===(r=v.email)||void 0===r?void 0:r.message}),(0,c.jsx)(n4.Qr,{name:"phone",control:x,render:()=>{var n;return(0,c.jsx)(nh.Z,{label:"Телефон",phoneNumber:j&&j("phone"),placeholder:"Введите номер телефона",error:null===(n=v.phone)||void 0===n?void 0:n.message,onChange:n=>{S("phone",n),n&&w("phone")}})}}),(0,c.jsxs)(nf,{children:[(0,c.jsx)(na,{children:"Кто основной гость?"}),(0,c.jsxs)(n9.Z,{defaultValue:j("whoIsGuest"),name:"GuestType",onChange:n=>{S("whoIsGuest",n.target.value),S("guests",[]),n.target.value===i.HIMSELF&&w()},children:[(0,c.jsx)(np,{value:i.HIMSELF,control:(0,c.jsx)(n8.Z,{}),label:(0,c.jsx)(nm,{children:"Я"})}),(0,c.jsx)(np,{value:i.ANOTHER,control:(0,c.jsx)(n8.Z,{}),label:(0,c.jsx)(nm,{children:"Другой человек"})})]})]}),N===i.ANOTHER&&(0,c.jsxs)(nu,{children:[(0,c.jsx)(ns,{children:(0,c.jsx)(na,{children:"Введите данные гостя"})}),(0,c.jsxs)(nd,{children:[(0,c.jsx)(M.Z,{label:"Фамилия гостя",placeholder:"Введите фамилию гостя",...m("guests.".concat(0,".lastName")),error:null==v?void 0:null===(o=v.guests)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:null===(u=l.lastName)||void 0===u?void 0:u.message}),(0,c.jsx)(M.Z,{label:"Имя гостя",placeholder:"Введите имя гостя",...m("guests.".concat(0,".firstName")),error:null==v?void 0:null===(s=v.guests)||void 0===s?void 0:null===(d=s[0])||void 0===d?void 0:null===(f=d.firstName)||void 0===f?void 0:f.message})]})]}),b&&(0,c.jsx)(nE,{stayDates:b,backwardLink:z}),(0,c.jsx)(ni,{children:(0,c.jsx)(nx.Z,{label:"Расскажите нам о ваших особых пожеланиях",placeholder:"Администрация объекта размещения не может гарантировать выполнение особых пожеланий, но сделает для этого все возможное. Вы всегда можете оставить пожелание после завершения бронирования",...m("bookingComments"),error:null===(p=v.bookingComments)||void 0===p?void 0:p.message})}),!y&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nl,{}),(0,c.jsx)(nc,{children:(0,c.jsx)(no,{dark:!0,onClick:h(A),disabled:!Z,children:"Оплатить"})})]}),y&&(0,c.jsxs)(nW,{children:[(0,c.jsx)(R,{}),(0,c.jsx)(nQ,{dark:!0,disabled:!Z,onClick:L,children:"Продолжить"})]})]})};var n7=e(40152),n6=e(80514),tn=e(89882),tt=e(25675),te=e.n(tt);function tr(){let n=(0,x.Z)(["\n  display: inline-flex;\n  flex-direction: row;\n  gap: 16px;\n  max-width: 80%;\n  cursor: pointer;\n"]);return tr=function(){return n},n}function to(){let n=(0,x.Z)(["\n  border: 2px solid #1d7abd;\n  border-radius: 16px;\n"]);return to=function(){return n},n}function ti(){let n=(0,x.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n"]);return ti=function(){return n},n}function tl(){let n=(0,x.Z)(["\n  display: flex;\n  align-items: flex-end;\n  ",";\n"]);return tl=function(){return n},n}function tc(){let n=(0,x.Z)(["\n  display: flex;\n  align-items: flex-end;\n  ",";\n"]);return tc=function(){return n},n}function ta(){let n=(0,x.Z)(["\n  display: flex;\n  align-items: flex-end;\n  ",";\n"]);return ta=function(){return n},n}let tu=g.ZP.div.withConfig({componentId:"sc-6c4ad117-0"})(tr()),ts=(0,g.ZP)(te()).withConfig({componentId:"sc-6c4ad117-1"})(to()),td=g.ZP.div.withConfig({componentId:"sc-6c4ad117-2"})(ti()),tf=g.ZP.h3.withConfig({componentId:"sc-6c4ad117-3"})(tl(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.default,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),tp=g.ZP.h3.withConfig({componentId:"sc-6c4ad117-4"})(tc(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.secondary,";\n    font-size: ").concat(t.font.size.body3,";\n    font-weight: ").concat(t.font.weight.regular,"\n  ")}),tm=g.ZP.h3.withConfig({componentId:"sc-6c4ad117-5"})(ta(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-size: ").concat(t.font.size.body2,";\n    font-weight: ").concat(t.font.weight.bold,"\n  ")}),th=n=>{var t;let{currentRoom:e,guestsCount:r,services:o,backwardLink:i}=n,l=(0,s.useRouter)(),{price:a,currencyCode:u}=(null==e?void 0:e.placementExtraData)||{},d=()=>{i&&l.push(i)},f=null===(t=null==e?void 0:e.placementExtraData.includedServices)||void 0===t?void 0:t.map(n=>{let{id:t}=n;return null==o?void 0:o.find(n=>String(n.id)===String(t))});return(0,c.jsxs)(tu,{onClick:d,children:[(null==e?void 0:e.images[0])&&(0,c.jsx)(ts,{width:68,height:68,src:(null==e?void 0:e.images[0])||"",alt:"Room-image"}),(0,c.jsxs)(td,{children:[(0,c.jsx)(tf,{children:(null==e?void 0:e.roomName)||""}),(0,c.jsxs)(tp,{children:["".concat(r," ").concat((0,tn.$)(r,["гость","гостя","гостей"])),f.length>0&&". Включено: ".concat(null==f?void 0:f.map(n=>" ".concat(n.name.toLowerCase())))]}),a&&u&&(0,c.jsx)(tm,{children:"".concat(a.pricePerDay||0," ").concat((0,n3.fd)(a.pricePerDay||0,u)," / ночь")})]})]})};var tx=e(43795),tg=e(72908),tw=e(54952),tv=e(81489),tZ=e(44643),tb=e(13435);let tj=n=>{let{breadcrumbsItems:t,name:e,address:r,currentRoom:o,guestsCount:i,services:l,rooms:u,changeRoomFn:s,stayDates:d,nextStepFn:f,currentPrices:p}=n,[m,x]=(0,a.useState)(!1),[g,w]=(0,a.useState)(o?{roomId:null==o?void 0:o.placementExtraData.roomId,ratePlanId:null==o?void 0:o.placementExtraData.ratePlan.id}:null),v=n=>{w(n)},Z=()=>{g&&s(g),x(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(F,{children:(0,c.jsxs)(L,{children:[(0,c.jsx)(h.Z,{paths:t,isMobile:!0}),(0,c.jsx)(tb.k,{title:e,subTitle:r,stepsAmount:3,currentStep:1}),(0,c.jsx)(n2,{children:"Проверьте дату и время бронирования"}),(0,c.jsxs)(nB,{children:[(0,c.jsx)(th,{guestsCount:i,currentRoom:o,services:l,backwardLink:t[2].url}),(0,c.jsx)(tx.Z,{onClick:()=>x(n=>!n)})]}),(0,c.jsx)(nE,{stayDates:d,backwardLink:t[1].url}),(0,c.jsx)(tZ.Z,{upSection:p.upSection,downSection:p.downSection}),(0,c.jsx)(R,{}),(0,c.jsx)(nQ,{dark:!0,onClick:f,children:"Продолжить"}),(0,c.jsx)(tw.Z,{items:[{title:"Отмена бронирования",text:(0,tv.gD)(null==o?void 0:o.placementExtraData.cancellationPolicy)},{title:"Политика конфиденциальности",text:tv.uV},{title:"Условия использования данных",text:tv.RS}]})]})}),(0,c.jsx)(tg.Z,{open:m,children:(0,c.jsxs)(nK,{children:[(0,c.jsx)(n$,{children:"Выберите номер"}),u&&u.map((n,t)=>{let{roomId:e,ratePlan:r}=n.placementExtraData;return(0,c.jsxs)(nB,{children:[(0,c.jsx)(th,{guestsCount:i,currentRoom:n,services:l}),(0,c.jsx)(n8.Z,{checked:(null==g?void 0:g.roomId)===e&&g.ratePlanId===r.id,onChange:()=>v({roomId:e,ratePlanId:r.id})})]},"".concat(e,"-").concat(t))}),(0,c.jsx)(nX,{dark:!0,onClick:Z,children:"Подтвердить выбор"})]})})]})},ty=n=>{let{register:t,handleSubmit:e,control:r,watch:o,trigger:i,formState:l,breadcrumbsItems:a,name:u,address:s,nextStepFn:d,guestsCount:f,getValues:p,currentPrices:m,cancellationPolicy:x,setFirstGuestDataToForm:g,setValue:w}=n;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(F,{children:(0,c.jsxs)(L,{children:[(0,c.jsx)(h.Z,{paths:a,isMobile:!0}),(0,c.jsx)(tb.k,{title:u,subTitle:s,stepsAmount:3,currentStep:2}),(0,c.jsx)(n2,{children:"Укажите ваши контактные данные"}),(0,c.jsx)(n5,{setFirstGuestDataToForm:g,setValue:w,getValues:p,register:t,watch:o,trigger:i,handleSubmit:e,control:r,formState:l,isMobile:!0,nextStepFn:d,stayDates:null,guestsCount:f}),(0,c.jsx)(tZ.Z,{upSection:m.upSection,downSection:m.downSection}),(0,c.jsx)(tw.Z,{items:[{title:"Отмена бронирования",text:(0,tv.gD)(x)},{title:"Политика конфиденциальности",text:tv.uV},{title:"Условия использования данных",text:tv.RS}]})]})})})},tC=n=>{let{handleSubmit:t,watch:e,breadcrumbsItems:r,name:o,address:i,guestsCount:l,currentRoom:a,services:u,stayDates:s,fullPaymentFn:d,partialPaymentFn:f,currentPrices:p}=n,{firstName:m,lastName:x,phone:g,email:w,bookingComments:v}=e();return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(F,{children:(0,c.jsxs)(L,{children:[(0,c.jsx)(h.Z,{paths:r,isMobile:!0}),(0,c.jsx)(tb.k,{title:o,subTitle:i}),(0,c.jsx)(n2,{children:"Проверьте бронирование"}),(0,c.jsx)(th,{guestsCount:l,currentRoom:a,services:u,backwardLink:r[2].url}),(0,c.jsx)(R,{}),(0,c.jsx)(nE,{stayDates:s,isMobileFinalStep:!0,backwardLink:r[1].url}),(0,c.jsx)(R,{}),(0,c.jsxs)(n1,{children:[(0,c.jsx)(nJ,{children:"Имя"}),(0,c.jsx)(n0,{children:"".concat(m," ").concat(x)})]}),(0,c.jsxs)(n1,{children:[(0,c.jsx)(nJ,{children:"Телефон"}),(0,c.jsx)(n0,{children:g})]}),(0,c.jsxs)(n1,{children:[(0,c.jsx)(nJ,{children:"Email"}),(0,c.jsx)(n0,{children:w})]}),(0,c.jsx)(R,{}),v&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n1,{children:[(0,c.jsx)(nJ,{children:"Комментарий"}),(0,c.jsx)(n0,{style:{whiteSpace:"pre-wrap"},children:v})]}),(0,c.jsx)(R,{})]}),(0,c.jsx)(tZ.Z,{upSection:p.upSection,downSection:p.downSection}),(0,c.jsx)(R,{}),(0,c.jsx)(nQ,{dark:!0,onClick:t(d),children:"Оплатить"}),(0,c.jsx)(tw.Z,{items:[{title:"Отмена бронирования",text:(0,tv.gD)(null==a?void 0:a.placementExtraData.cancellationPolicy)},{title:"Политика конфиденциальности",text:tv.uV},{title:"Условия использования данных",text:tv.RS}]})]})})})};var tP=e(51949),tI=e(65959),tk=e(57632),tD=e(16310),tS=e(38445),tz=e(47533),tT=e(37574),tE=e(68270),tN=e(19218);(o=l||(l={})).PREPAYMENT="PREPAYMENT",o.FULL_PAYMENT="FULL_PAYMENT";let tF=n=>tD.Ry().shape({email:tS.Dp,firstName:(0,tS.Fw)("Введите ваше имя"),lastName:(0,tS.Fw)("Введите вашу фамилию"),bookingComments:tS.K3,phone:(0,tS.yV)(n),guests:tD.IX().of(tD.Ry().shape({firstName:(0,tS.Fw)("Введите имя гостя"),lastName:(0,tS.Fw)("Введите фамилию гостя")}))}),tL=()=>{let n=(0,u.T)(),[t,e]=(0,a.useState)(1);(0,m.x)();let r=(0,tP.l)(),o=(0,n7.Z)("(max-width: ".concat(n6.AV.sm,"px)")),x=(0,u.C)(d.N$),g=(0,s.useRouter)(),w=(0,u.C)(tE.NI),v=(0,u.C)(tE.eV);(0,a.useEffect)(()=>{w&&K(n=>({...n,firstName:w.firstName,lastName:w.lastName,email:w.email,phone:w.phone?w.phone:n.phone}))},[w]);let Z=()=>{K(n=>({...n,guests:[{firstName:n.firstName,lastName:n.lastName}]}))},[b,{isLoading:j}]=(0,p.YE)(),{id:y}=g.query,{queriesString:C}=(0,f.F)(x,f.v.detail),{queriesString:P}=(0,f.F)(x,f.v.list),{queriesString:I}=(0,f.F)(x,f.v.payment),{data:k,isLoading:D,refetch:S}=(0,p.TK)({id:Number(y),urlQueries:C},{skip:!y}),{name:z,address:T,filterDto:E,services:N,rooms:R}=(null==k?void 0:k.data)||{},M=[{url:"/",label:"Главная"},{url:"/placement?".concat(P),label:"Результаты поиска"},{url:"/placement/".concat(y,"?").concat(C),label:z||""},{url:"/booking/placement/".concat(g.query.id),label:"Бронирование"}],O=(0,a.useMemo)(()=>null==R?void 0:R.find(n=>{var t,e;return(null===(t=n.placementExtraData)||void 0===t?void 0:t.roomId)===Number(g.query.roomId)&&(null===(e=n.placementExtraData)||void 0===e?void 0:e.ratePlan.id)===Number(g.query.ratePlanId)}),[R,g]),q=(0,a.useMemo)(()=>({upSection:{title:"Стоимость",list:[{listTitle:"За ночь",price:(null==O?void 0:O.placementExtraData.price.pricePerDay)||0}]},downSection:{title:"Итого",list:[{listTitle:"".concat(null==O?void 0:O.placementExtraData.price.daysCount," ").concat((0,tn.$)((null==O?void 0:O.placementExtraData.price.daysCount)||0,["ночь","ночи","ночей"])),price:(null==O?void 0:O.placementExtraData.price.totalPrice)||0}]}}),[O]),_=(0,a.useMemo)(()=>{var n;return((null==E?void 0:E.numOfAdult)||0)+((null==E?void 0:null===(n=E.childAges)||void 0===n?void 0:n.length)||0)},[E]),{register:H,handleSubmit:G,control:V,formState:Y,watch:U,trigger:B,reset:K,getValues:X,setError:$,setValue:Q}=(0,n4.cI)({defaultValues:{idempotenceKey:(0,tk.Z)(),whoIsGuest:i.HIMSELF},resolver:(0,tz.X)(tF(10+v.codeNum.length)),mode:"onChange"}),W=n=>{let{pathname:t,query:e}=g,r={pathname:t,query:{...e,roomId:String(n.roomId),ratePlanId:String(n.ratePlanId)}};g.push(r,void 0,{shallow:!0})},J=(0,a.useCallback)((n,t)=>{var e,o;return y&&O&&E?{placementId:String(y),bookingPaymentType:n,firstName:t.firstName,lastName:t.lastName,phone:t.phone,email:t.email,bookingComments:null==t?void 0:t.bookingComments,roomStays:[{guests:null==t?void 0:t.guests,stayDates:{arrivalDateTime:null==O?void 0:O.placementExtraData.stayDates.arrivalDateTime,departureDateTime:null==O?void 0:O.placementExtraData.stayDates.departureDateTime},ratePlan:{id:null==O?void 0:O.placementExtraData.ratePlan.id.toString()},roomType:{id:null==O?void 0:O.placementExtraData.roomType.id.toString(),placements:null==O?void 0:null===(e=O.placementExtraData)||void 0===e?void 0:null===(o=e.roomType)||void 0===o?void 0:o.placements.map(n=>({code:n.code}))},guestCount:{adultCount:null==E?void 0:E.numOfAdult,childAges:null==E?void 0:E.childAges},checksum:null==O?void 0:O.placementExtraData.checksum}],idempotenceKey:t.idempotenceKey}:(r("Что-то пошло не так","error"),null)},[y,O,E,r]),nn=async r=>{try{let n=J(l.FULL_PAYMENT,r);if(n){let t=await b(n).unwrap();await ne(t)}}catch(r){r.data.data.forEach(n=>{$(n.field,n)}),401!==r.status||3!==t||r.data.isBlocked||(e(2),n((0,tE.$_)(tN.G.LOGIN))),401!==r.status||1!==t||r.data.isBlocked||n((0,tE.$_)(tN.G.LOGIN)),409===r.status&&(S(),e(1))}},nt=async r=>{try{let n=J(l.PREPAYMENT,r);if(n){let t=await b(n).unwrap();await ne(t)}}catch(r){r.data.data.forEach(n=>{$(n.field,n)}),401!==r.status||3!==t||r.data.isBlocked||(e(2),n((0,tE.$_)(tN.G.LOGIN))),401!==r.status||1!==t||r.data.isBlocked||n((0,tE.$_)(tN.G.LOGIN))}},ne=async t=>{if(t.success){let{bookingId:e,...r}=t.data;n((0,tT.Ds)({...r}));let o=w?"/profile/booking/placement/".concat(e):"/booking/placement/".concat(y,"/auto-authorized-booking?bookingId=").concat(e);await g.replace(o),await g.push("/booking/placement/".concat(y,"/payment?bookingId=").concat(e,"&").concat(I))}};return D||j?(0,c.jsx)(tI.Z,{showSpinner:!0}):o?(0,c.jsxs)(c.Fragment,{children:[1===t&&(0,c.jsx)(tj,{name:z,currentPrices:q,address:T,breadcrumbsItems:M,currentRoom:O,guestsCount:_,services:N,rooms:R,changeRoomFn:W,stayDates:(null==O?void 0:O.placementExtraData.stayDates)||null,nextStepFn:()=>e(n=>n+1)}),2===t&&(0,c.jsx)(ty,{setValue:Q,setFirstGuestDataToForm:Z,currentPrices:q,getValues:X,register:H,handleSubmit:G,control:V,watch:U,trigger:B,formState:Y,name:z,address:T,breadcrumbsItems:M,nextStepFn:()=>e(n=>n+1),guestsCount:_,cancellationPolicy:null==O?void 0:O.placementExtraData.cancellationPolicy}),3===t&&(0,c.jsx)(tC,{handleSubmit:G,watch:U,name:z,address:T,currentPrices:q,breadcrumbsItems:M,currentRoom:O,guestsCount:_,services:N,stayDates:(null==O?void 0:O.placementExtraData.stayDates)||null,fullPaymentFn:nn,partialPaymentFn:nt})]}):(0,c.jsxs)(F,{children:[(0,c.jsxs)(L,{children:[(0,c.jsx)(h.Z,{paths:M}),(0,c.jsx)(tb.k,{title:z,subTitle:T}),(0,c.jsx)(th,{currentRoom:O,guestsCount:_,services:N,backwardLink:M[2].url}),(0,c.jsx)(n5,{setValue:Q,setFirstGuestDataToForm:Z,register:H,watch:U,trigger:B,getValues:X,handleSubmit:G,control:V,formState:Y,isMobile:!1,fullPaymentFn:nn,partialPaymentFn:nt,stayDates:(null==O?void 0:O.placementExtraData.stayDates)||null,guestsCount:_,backwardLink:M[1].url})]}),(0,c.jsxs)(A,{children:[(0,c.jsx)(tZ.Z,{upSection:q.upSection,downSection:q.downSection}),(0,c.jsx)(tw.Z,{items:[{title:"Отмена бронирования",text:(0,tv.gD)(null==O?void 0:O.placementExtraData.cancellationPolicy)},{title:"Политика конфиденциальности",text:tv.uV},{title:"Условия использования данных",text:tv.RS}]})]})]})};var tA=e(9008),tR=e.n(tA);let tM=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tR(),{children:(0,c.jsx)("title",{children:"Go2Kavkaz : Бронирование"})}),(0,c.jsx)(tL,{})]});var tO=tM}},function(n){n.O(0,[9896,9774,2888,179],function(){return n(n.s=93976)}),_N_E=n.O()}]);