(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3997],{99564:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking/[id]/confirm/[token]",function(){return e(52696)}])},74037:function(n,t,e){"use strict";e.d(t,{W:function(){return p}});var r=e(85893);e(67294);var i=e(84276),c=e(42143),o=e(7297),l=e(57681),u=e(186);function s(){let n=(0,o.Z)([""]);return s=function(){return n},n}function f(){let n=(0,o.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  gap: 10px;\n  margin-top: 30px;\n"]);return f=function(){return n},n}function d(){let n=(0,o.Z)(["\n  ","\n"]);return d=function(){return n},n}let a=(0,u.ZP)(l.Z).withConfig({componentId:"sc-df9bad11-0"})(s()),h=u.ZP.div.withConfig({componentId:"sc-df9bad11-1"})(f()),x=u.ZP.h3.withConfig({componentId:"sc-df9bad11-2"})(d(),n=>{let{theme:t}=n;return"\n    color: ".concat(t.colors.primary,";\n    font-weight: ").concat(t.font.weight,";\n    font-size: ").concat(t.font.size.subtitle3,";\n    text-align: center;\n    margin-top: 16px;\n  ")});var g=e(64468);let p=n=>{let{closeButton:t,cancelBooking:e,isOpen:o,penaltyAmount:l}=n;return(0,r.jsxs)(a,{isOpen:o,onClose:t,children:[(0,r.jsx)(i.r6,{children:"Вы уверены, что хотите отменить бронирование?"}),l?(0,r.jsx)(x,{children:"Сумма штрафа - ".concat(l," ").concat((0,g.fd)(l||0,g.Tl.rubles))}):null,(0,r.jsxs)(h,{children:[(0,r.jsx)(c.Z,{onClick:t,children:"Нет"}),(0,r.jsx)(c.Z,{dark:!0,onClick:e,children:"Да"})]})]})}},52696:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return X}});var r=e(85893),i=e(67294),c=e(11163),o=e(43180),l=e(42143),u=e(7297),s=e(186);function f(){let n=(0,u.Z)(["\n    "]);return f=function(){return n},n}function d(){let n=(0,u.Z)(["\n    flex-direction: column;\n    ","\n  "]);return d=function(){return n},n}function a(){let n=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  gap: 24px;\n  ","\n"]);return a=function(){return n},n}function h(){let n=(0,u.Z)(["\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n  "]);return h=function(){return n},n}function x(){let n=(0,u.Z)(["\n  ","\n"]);return x=function(){return n},n}function g(){let n=(0,u.Z)(["\n      grid-template-columns: 1fr 1fr;\n    "]);return g=function(){return n},n}function p(){let n=(0,u.Z)(["\n      grid-template-columns: 1fr;\n    "]);return p=function(){return n},n}function j(){let n=(0,u.Z)(["\n    display: grid;\n    width: 100%;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 24px;\n    ",";\n    ",";\n  "]);return j=function(){return n},n}function m(){let n=(0,u.Z)(["\n  ","\n"]);return m=function(){return n},n}function w(){let n=(0,u.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n"]);return w=function(){return n},n}function Z(){let n=(0,u.Z)(["\n  font-weight: 400;\n  font-size: 24px;\n  line-height: 27px;\n  color: #222121;\n"]);return Z=function(){return n},n}function k(){let n=(0,u.Z)(["\n  font-size: 20px;\n  line-height: 23px;\n  color: #4f4f4f;\n"]);return k=function(){return n},n}function C(){let n=(0,u.Z)(["\n  height: 2px;\n  background: #8daec1;\n"]);return C=function(){return n},n}function P(){let n=(0,u.Z)(["\n      flex-direction: column;\n      width: 100%;\n      margin-bottom: 30px;\n    "]);return P=function(){return n},n}function b(){let n=(0,u.Z)(["\n    display: flex;\n    justify-content: center;\n    align-self: flex-end;\n    flex-direction: row;\n    gap: 10px;\n    margin-top: 30px;\n    ",";\n  "]);return b=function(){return n},n}function I(){let n=(0,u.Z)(["\n  ","\n"]);return I=function(){return n},n}let y=s.ZP.div.withConfig({componentId:"sc-98860c3f-0"})(a(),n=>{let{theme:t}=n;return t.media.down("md")(d(),t.media.down("sm")(f()))}),v=s.ZP.h2.withConfig({componentId:"sc-98860c3f-1"})(x(),n=>{let{theme:t}=n;return(0,s.iv)(h(),t.font.size.heading3,t.font.weight.regular,t.colors.default)}),E=s.ZP.div.withConfig({componentId:"sc-98860c3f-2"})(m(),n=>{let{theme:t}=n;return(0,s.iv)(j(),t.media.down("md")(g()),t.media.down("xs")(p()))}),_=s.ZP.div.withConfig({componentId:"sc-98860c3f-3"})(w()),N=s.ZP.h6.withConfig({componentId:"sc-98860c3f-4"})(Z()),A=s.ZP.p.withConfig({componentId:"sc-98860c3f-5"})(k());s.ZP.div.withConfig({componentId:"sc-98860c3f-6"})(C());let T=s.ZP.div.withConfig({componentId:"sc-98860c3f-7"})(I(),n=>{let{theme:t}=n;return(0,s.iv)(b(),t.media.down("sm")(P()))});var z=e(65959),R=e(89882),D=e(74037),L=e(51949),O=e(20293),S=e(3980),W=e(78872);let B=()=>{let n;let[t,e]=(0,i.useState)(!1),[u,s]=(0,i.useState)(""),f=(0,L.l)(),d=(0,c.useRouter)(),{id:a,token:h}=d.query,{data:x,isLoading:g,isError:p,refetch:j}=(0,o.X4)({bookingId:Number(a),token:h},{skip:!a||!h}),[m,{isLoading:w}]=(0,o.kP)(),[Z,{isLoading:k}]=(0,o._h)(),{name:C,date:P,time:b,numberOfParticipants:I,numberOfChildren:B,bookingNumber:G,duration:X,status:F}=(null==x?void 0:x.data)||{},M=async()=>{if(a)try{let n=await m({bookingId:Number(a),token:h}).unwrap();n.success&&(s("Бронирование отменено"),f("Вы успешно отменили бронирование","success"))}catch(n){s(""),console.error(n)}finally{j(),e(!1)}},q=()=>{e(!1)},Y=async()=>{if(a)try{let n=await Z({bookingId:Number(a),token:h}).unwrap();n.success&&(s("Бронирование подтверждено"),f("Вы успешно подтвердили бронирование","success"))}catch(n){s(""),console.error(n)}finally{j(),e(!1)}};if(p)return(0,r.jsx)(y,{children:(0,r.jsx)(v,{children:"Бронирование не найдено"})});switch(F){case O.g.WAITING_PARTNER:n="Подтвердите бронирование";break;case O.g.CANCELLED:n="Бронирование отменено";break;case O.g.PAID:case O.g.PARTNER_ACCEPTED:n="Бронирование подтверждено";break;case O.g.WAITING_PAYMENT:n="Ожидается оплата бронирования";break;default:n=""}return(0,r.jsxs)(y,{children:[(0,r.jsx)(z.Z,{showSpinner:g||w||k}),(0,r.jsx)(D.W,{isOpen:t,closeButton:q,cancelBooking:M,penaltyAmount:null}),(0,r.jsx)(v,{children:u||n}),(0,r.jsxs)(E,{children:[G&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Номер брони:"}),(0,r.jsx)(A,{children:G})]}),C&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Название:"}),(0,r.jsx)(A,{children:C})]}),P&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Дата:"}),(0,r.jsx)(A,{children:P})]}),b&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Время:"}),(0,r.jsx)(A,{children:b})]}),I&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Количество участников:"}),(0,r.jsx)(A,{children:I})]}),void 0!==B&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Количество детей младше 7 лет:"}),(0,r.jsx)(A,{children:B})]}),X&&(0,r.jsxs)(_,{children:[(0,r.jsx)(N,{children:"Продолжительность:"}),(0,r.jsx)(A,{children:"".concat(X," ").concat((0,R.$)(X,["час","часа","часов"]))})]})]}),(0,r.jsx)(T,{children:(null==x?void 0:x.data)&&F!==O.g.CANCELLED?(0,r.jsxs)(r.Fragment,{children:[F!==O.g.PARTNER_ACCEPTED&&F!==O.g.PAID&&(0,r.jsx)(l.Z,{onClick:()=>Y(),children:"Подтвердить"}),(0,r.jsx)(l.Z,{dark:!0,onClick:()=>e(!0),children:"Отклонить"})]}):(0,r.jsx)(r.Fragment,{children:F&&(0,r.jsx)(S.Ms,{style:{fontSize:"22px"},type:F,showBackground:!1,children:W.Gd.get(F)})})})]})},G=()=>(0,r.jsx)(B,{});var X=G}},function(n){n.O(0,[4881,9774,2888,179],function(){return n(n.s=99564)}),_N_E=n.O()}]);